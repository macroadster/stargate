{"id":"starlight-0dl","title":"Unify contract vs proposal lifecycle state model","description":"Clarify and align state transitions between wishes, proposals, contracts, claims, submissions, PSBT, and closure. Remove ambiguity that makes the flow hard to follow.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-21T18:46:21.368692-08:00","updated_at":"2025-12-21T18:57:50.275726-08:00","closed_at":"2025-12-21T18:57:50.275726-08:00","close_reason":"Documented lifecycle state model and aligned status comments"}
{"id":"starlight-0e7","title":"Interactive API playground","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-21T14:10:53.528898-08:00","updated_at":"2025-12-21T23:36:30.364858-08:00","closed_at":"2025-12-21T23:36:30.364858-08:00","close_reason":"Closed"}
{"id":"starlight-0g4","title":"Detect testnet4 network from base URL","description":"BitcoinNodeClient inferred 'testnet' for testnet4 URLs because it only checked for 'testnet'. This caused raw block fetches to hit blockstream testnet instead of mempool testnet4.","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-18T17:47:15.977316-08:00","updated_at":"2025-12-18T17:47:32.418511-08:00","closed_at":"2025-12-18T17:47:32.418511-08:00","close_reason":"Infer testnet4 before testnet in BitcoinNodeClient"}
{"id":"starlight-0m1r","title":"AI identifier should be user's wallet address not a separate field","description":"Use wallet address (from API key) as AI identifier instead of separate ai_identifier field. No database migration - no existing data to migrate.\n\nChanges needed:\n1. backend/storage/smart_contract/pg_store.go:\n   - ClaimTask(): Accept walletAddress parameter, store in ai_identifier column\n   - Update all claim queries to use walletAddress\n\n2. backend/core/smart_contract/types.go:\n   - No changes - keep AiIdentifier field name (now stores wallet address)\n\n3. backend/middleware/smart_contract/server.go:\n   - Remove AiIdentifier from ContractFilter\n   - Update claim handler: get wallet from API key, validate format, pass to ClaimTask()\n   - Add getWalletFromKey() helper\n\n4. backend/mcp/http_mcp_server.go:\n   - handleClaimTask(): Remove ai_identifier parameter, get wallet from API key store\n\n5. backend/mcp/tools.go:\n   - Remove ai_identifier from claim_task tool definition\n\n6. backend/docs/openapi.yaml:\n   - Remove ai_identifier from request schema\n\n7. backend/docs/API_DOCUMENTATION.md:\n   - Update examples to show wallet-based claiming\n\n8. backend/mcp/http_mcp_server_test.go:\n   - Update test to use wallet address\n\nWallet address becomes the identifier - responsibility lies with the bearer","notes":"Also updated frontend: removed ai_identifier from request body in DiscoverPage.jsx and test file. aiId variable already set to auth.wallet, so filtering logic works unchanged. Frontend builds successfully.","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-17T11:11:35.776772-08:00","updated_at":"2026-01-17T11:28:24.774683-08:00","closed_at":"2026-01-17T11:24:28.278497-08:00","close_reason":"Implemented wallet address as AI identifier. Updated ClaimTask() signature in both PGStore and MemoryStore to accept single walletAddress parameter (removed separate aiID and contractorWallet parameters). Updated HTTP handler to get wallet from API key instead of request body. Updated MCP server to remove ai_identifier parameter. Removed ai_identifier from ContractFilter. Updated all tests, documentation (openapi.yaml, API_DOCUMENTATION.md, docs.go). All tests pass."}
{"id":"starlight-0pox","title":"Modify BuildRaiseFundPSBT to pre-calculate TxID for SegWit inputs","description":"Update BuildRaiseFundPSBT function to use allInputsAreSegWit() check and calculate FundingTxID for all-SegWit transactions. Ensures raise fund mode also benefits from zero-cost funding reliability.","status":"closed","priority":1,"issue_type":"feature","created_at":"2026-01-18T14:51:11.878537-08:00","updated_at":"2026-01-18T14:56:52.012973-08:00","closed_at":"2026-01-18T14:56:52.012973-08:00","close_reason":"Modified BuildRaiseFundPSBT to use allPayerSelectionsAreSegWit() helper and pre-calculate TxID for all-SegWit transactions."}
{"id":"starlight-0rbr","title":"Refactor backend/api/data_api.go - split 2,058 line API file","description":"Large API file with complex data aggregation and poor error handling. Split endpoints by resource type, extract query builders and data transformers, implement proper API versioning.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-15T10:11:32.896417-08:00","updated_at":"2026-01-15T10:11:32.896417-08:00"}
{"id":"starlight-0w3i","title":"Reaudit Dec 26 MCP/payment/validation changes","description":"Audit regressions from Dec 26 closed issues (payment_details endpoint, proposal validation, MCP docs) and create fixes or follow-up bugs.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-26T09:42:14.019897-08:00","updated_at":"2025-12-26T09:52:45.213649-08:00","closed_at":"2025-12-26T09:52:45.213649-08:00","close_reason":"Reaudit complete; regressions addressed in payment-details and proposal validation.","dependencies":[{"issue_id":"starlight-0w3i","depends_on_id":"starlight-4ov","type":"discovered-from","created_at":"2025-12-26T09:42:14.024349-08:00","created_by":"daemon"},{"issue_id":"starlight-0w3i","depends_on_id":"starlight-xn0","type":"discovered-from","created_at":"2025-12-26T09:42:14.021707-08:00","created_by":"daemon"},{"issue_id":"starlight-0w3i","depends_on_id":"starlight-id57","type":"discovered-from","created_at":"2025-12-26T09:42:14.022351-08:00","created_by":"daemon"},{"issue_id":"starlight-0w3i","depends_on_id":"starlight-fv5","type":"discovered-from","created_at":"2025-12-26T09:42:14.022851-08:00","created_by":"daemon"},{"issue_id":"starlight-0w3i","depends_on_id":"starlight-3qr","type":"discovered-from","created_at":"2025-12-26T09:42:14.023389-08:00","created_by":"daemon"},{"issue_id":"starlight-0w3i","depends_on_id":"starlight-c1y","type":"discovered-from","created_at":"2025-12-26T09:42:14.023885-08:00","created_by":"daemon"}]}
{"id":"starlight-11n","title":"Update search placeholder and labels","description":"Change search placeholder to 'Search...' and rename inscription labels to Transactions.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-20T10:21:14.49595-08:00","updated_at":"2025-12-20T10:21:53.089717-08:00","closed_at":"2025-12-20T10:21:53.089717-08:00","close_reason":"Updated search placeholder and labels."}
{"id":"starlight-13uf","title":"Add metrics/logging for IPFS mirror publish/subscribe and ingest outcomes","description":"Add info logs for IPFS mirror publish and ingest outcomes with file counts.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-27T21:32:55.761258-08:00","updated_at":"2025-12-28T23:01:30.57475-08:00","closed_at":"2025-12-28T23:01:30.57475-08:00","close_reason":"Added publish and sync summary logs with counts."}
{"id":"starlight-17v","title":"Filter confirmed contracts from Discover proposals API","description":"Exclude confirmed/on-chain contracts from proposals API used by Discover page; rely on oracle reconcile to mark status.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-20T09:52:18.265062-08:00","updated_at":"2025-12-20T09:57:19.486191-08:00","closed_at":"2025-12-20T09:57:19.486191-08:00","close_reason":"Filter confirmed ingestions from proposals API by default."}
{"id":"starlight-17x","title":"Hide PSBT builder when no deliverables","description":"In Deliverables tab, the Publish \u0026 Build PSBT panel still appears when there are no deliverable tasks. Hide/disable the PSBT builder entirely until tasks/deliverables exist (post-approval) to avoid confusion.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-17T19:49:02.174409-08:00","updated_at":"2025-12-17T19:55:00.56765-08:00","closed_at":"2025-12-17T19:55:00.56765-08:00","close_reason":"Closed"}
{"id":"starlight-1aen","title":"Optimized pending-transactions endpoint performance","status":"closed","priority":2,"issue_type":"bug","created_at":"2026-01-18T09:05:41.579329-08:00","updated_at":"2026-01-18T09:05:49.733015-08:00","closed_at":"2026-01-18T09:05:49.733015-08:00","close_reason":"Reduced ingestion list size from 200 to 50 items to reduce database load and response time. The endpoint was taking 7-30 seconds due to excessive data loading and N+1 queries."}
{"id":"starlight-1aio","title":"Fix critical path traversal vulnerabilities in file operations","description":"Critical security vulnerabilities identified in file operations allowing path traversal attacks. User-controlled filenames and file paths are used directly with filepath.Join() without sanitization, enabling attackers to read/write arbitrary files on the system. Affected components: file uploads, inscription file reading, block data storage, and content serving. Potential impacts include RCE, sensitive data exfiltration, and system compromise.","status":"closed","priority":0,"issue_type":"bug","created_at":"2026-01-17T12:55:37.724637-08:00","updated_at":"2026-01-17T13:19:24.704174-08:00","closed_at":"2026-01-17T13:19:24.704178-08:00"}
{"id":"starlight-1aio.1","title":"Create security utility functions (path_sanitizer.go)","description":"Create backend/security/path_sanitizer.go with SanitizeFilename(), SanitizePath(), ValidateExtension(), and SafeFilePath() functions. Write comprehensive unit tests to ensure path sequences like '../' and '..\\' are properly handled.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-17T12:57:26.839213-08:00","updated_at":"2026-01-17T13:05:19.362065-08:00","closed_at":"2026-01-17T13:05:19.362071-08:00","dependencies":[{"issue_id":"starlight-1aio.1","depends_on_id":"starlight-1aio","type":"parent-child","created_at":"2026-01-17T12:57:26.846846-08:00","created_by":"daemon"}]}
{"id":"starlight-1aio.2","title":"Fix file upload path traversal vulnerabilities","description":"Sanitize user-controlled filenames in handlers/handlers.go (lines 249, 566, 830) using security.SafeFilePath() to prevent arbitrary file writes outside uploads directory.","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-01-17T12:57:40.416081-08:00","updated_at":"2026-01-17T13:06:04.543083-08:00","closed_at":"2026-01-17T13:06:04.543089-08:00","dependencies":[{"issue_id":"starlight-1aio.2","depends_on_id":"starlight-1aio","type":"parent-child","created_at":"2026-01-17T12:57:40.41778-08:00","created_by":"daemon"}]}
{"id":"starlight-1aio.3","title":"Fix inscription file read path traversal vulnerabilities","description":"Protect file read operations in api/data_api.go (lines 859, 1368, 1523) by validating paths with security.SanitizePath() to prevent reading files outside intended directories.","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-01-17T12:57:40.765068-08:00","updated_at":"2026-01-17T13:07:24.013168-08:00","closed_at":"2026-01-17T13:07:24.013182-08:00","dependencies":[{"issue_id":"starlight-1aio.3","depends_on_id":"starlight-1aio","type":"parent-child","created_at":"2026-01-17T12:57:40.766477-08:00","created_by":"daemon"}]}
{"id":"starlight-1aio.4","title":"Fix ReadTextContent path traversal","description":"Validate filePath parameter in storage/data_storage.go ReadTextContent() to prevent directory traversal attacks. Return error for invalid paths instead of allowing arbitrary file reads.","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-01-17T12:57:58.475387-08:00","updated_at":"2026-01-17T13:07:55.852495-08:00","closed_at":"2026-01-17T13:07:55.8525-08:00","dependencies":[{"issue_id":"starlight-1aio.4","depends_on_id":"starlight-1aio","type":"parent-child","created_at":"2026-01-17T12:57:58.482878-08:00","created_by":"daemon"}]}
{"id":"starlight-1aio.5","title":"Fix block monitor file write vulnerabilities","description":"Apply security.SafeFilePath() to all file write operations in bitcoin/block_monitor.go (lines 854, 892, 914, 987, 1488, 2459, 2522) to prevent malicious filenames from writing outside block directories.","status":"closed","priority":2,"issue_type":"bug","created_at":"2026-01-17T12:57:58.836786-08:00","updated_at":"2026-01-17T13:10:37.81919-08:00","closed_at":"2026-01-17T13:10:37.819195-08:00","dependencies":[{"issue_id":"starlight-1aio.5","depends_on_id":"starlight-1aio","type":"parent-child","created_at":"2026-01-17T12:57:58.838069-08:00","created_by":"daemon"}]}
{"id":"starlight-1aio.6","title":"Add file extension validation","description":"Create backend/security/allowed_extensions.go with whitelists for images, text files, and data files. Integrate validation into upload handlers to reject unauthorized file types.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-17T12:57:59.271648-08:00","updated_at":"2026-01-17T13:11:04.477147-08:00","closed_at":"2026-01-17T13:11:04.477152-08:00","dependencies":[{"issue_id":"starlight-1aio.6","depends_on_id":"starlight-1aio","type":"parent-child","created_at":"2026-01-17T12:57:59.273009-08:00","created_by":"daemon"}]}
{"id":"starlight-1aio.7","title":"Write security integration tests","description":"Create comprehensive integration tests in backend/security/integration_test.go to verify path traversal protections work correctly against malicious payloads including '../', '..\\', unicode, and control characters.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-17T12:58:20.332289-08:00","updated_at":"2026-01-17T13:14:32.612322-08:00","closed_at":"2026-01-17T13:14:32.612328-08:00","dependencies":[{"issue_id":"starlight-1aio.7","depends_on_id":"starlight-1aio","type":"parent-child","created_at":"2026-01-17T12:58:20.34056-08:00","created_by":"daemon"}]}
{"id":"starlight-1aio.8","title":"Add security regression tests","description":"Add path traversal tests to existing test suites (handlers_test.go, data_api_test.go, data_storage_test.go) to prevent regressions in future code changes.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-17T12:58:20.76988-08:00","updated_at":"2026-01-17T13:17:55.424669-08:00","closed_at":"2026-01-17T13:17:55.424672-08:00","dependencies":[{"issue_id":"starlight-1aio.8","depends_on_id":"starlight-1aio","type":"parent-child","created_at":"2026-01-17T12:58:20.772725-08:00","created_by":"daemon"}]}
{"id":"starlight-1aio.9","title":"Update security documentation","description":"Document security fixes in SECURITY.md and update AGENTS.md with guidelines for secure file operations. Include examples of proper path sanitization patterns.","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-17T12:58:21.130736-08:00","updated_at":"2026-01-17T13:19:24.2744-08:00","closed_at":"2026-01-17T13:19:24.274405-08:00","dependencies":[{"issue_id":"starlight-1aio.9","depends_on_id":"starlight-1aio","type":"parent-child","created_at":"2026-01-17T12:58:21.132149-08:00","created_by":"daemon"}]}
{"id":"starlight-1ce","title":"Reorder PSBT metadata and remove helper text","description":"Move Payer/Network metadata above PSBT hex textbox and remove the Sparrow helper text.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-19T22:47:04.648482-08:00","updated_at":"2025-12-19T22:49:45.844997-08:00","closed_at":"2025-12-19T22:49:45.844997-08:00","close_reason":"Move payer/network above PSBT; remove helper text"}
{"id":"starlight-1e5","title":"Reorder Publish \u0026 Build PSBT summary into invoice layout","description":"Reorder PSBT summary UI to show payer/network/payout script first, then invoice-like breakdown with Selected, Budget (Price), Commitment (Donation), Fee, Change.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-20T08:58:17.390016-08:00","updated_at":"2025-12-20T08:59:48.995804-08:00","closed_at":"2025-12-20T08:59:48.995804-08:00","close_reason":"Reordered PSBT summary into invoice layout."}
{"id":"starlight-1hx","title":"Remove pixel hash field from PSBT UI","description":"PSBT builder UI shows Pixel Hash as N/A; field is not needed for users. Remove Pixel Hash display/input from PSBT UI.","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-17T16:02:53.08309-08:00","updated_at":"2025-12-17T17:16:19.233209-08:00","closed_at":"2025-12-17T17:16:19.233209-08:00","close_reason":"Closed"}
{"id":"starlight-1i6","title":"Fix ESLint warnings in frontend","description":"Resolve current ESLint warnings after adding lint configuration.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-22T18:37:34.062018-08:00","updated_at":"2025-12-22T18:50:02.987209-08:00","closed_at":"2025-12-22T18:50:02.987209-08:00","close_reason":"Fixed DeliverablesReview memoization to stop test loop"}
{"id":"starlight-1je","title":"Deliverable Review UI refresh collapses review while reviewing","description":"Deliverable Review UI refresh/collapse interrupts active review; improve usability so reviewers don't lose context while review is in progress.","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-12-21T16:34:00.09591-08:00","updated_at":"2025-12-21T16:35:22.588218-08:00","closed_at":"2025-12-21T16:35:22.588218-08:00","close_reason":"Preserve review state across refresh; prune stale entries only"}
{"id":"starlight-1k6t","title":"UI shows [object Object], when clicking build PSBT with mismatching API key.","description":"API responded 400 with JSON object: {\"success\":false,\"error\":{\"error\":\"invalid api key\",\"message\":\"invalid api key\",\"code\":403,\"timestamp\":\"2026-01-06T00:30:42Z\"}}","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-05T16:28:43.133317-08:00","updated_at":"2026-01-06T13:25:03.996129-08:00","closed_at":"2026-01-06T13:25:03.996129-08:00","close_reason":"Fixed [object Object] error message in PSBT building by improving error message extraction to handle API error objects correctly"}
{"id":"starlight-1o0","title":"Allow smart contract card image height to grow","description":"Remove fixed height so tall images can display more of the content in cards.","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-19T10:58:09.422056-08:00","updated_at":"2025-12-19T10:58:47.223934-08:00","closed_at":"2025-12-19T10:58:47.223934-08:00","close_reason":"Remove fixed card height and allow taller images"}
{"id":"starlight-1sg","title":"Pending view should merge ingestion data regardless of ingestion status","description":"Pending contracts need image/text from ingestion even when ingestion status is not pending; adjust pending-transactions merge to list recent ingestions without status filter.","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-18T21:39:56.466653-08:00","updated_at":"2025-12-18T21:40:15.770702-08:00","closed_at":"2025-12-18T21:40:15.770702-08:00","close_reason":"Merge ingestion data for pending contracts regardless of ingestion status"}
{"id":"starlight-1ud","title":"Add submission preview and summary in list","description":"Show preview snippet, word count, metadata, and quick approve/reject actions with expandable detail.","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-21T14:32:28.347252-08:00","updated_at":"2025-12-21T15:09:57.158333-08:00","closed_at":"2025-12-21T15:09:57.158333-08:00","close_reason":"Completed"}
{"id":"starlight-1vbt","title":"MEDIUM: Fix panic-prone input parsing in height parameter","status":"closed","priority":2,"issue_type":"bug","created_at":"2026-01-08T17:47:54.025396-08:00","updated_at":"2026-01-08T18:49:32.073299-08:00","closed_at":"2026-01-08T18:49:32.073299-08:00","close_reason":"Already fixed - strconv.ParseInt calls now have proper error handling"}
{"id":"starlight-1ww","title":"Smart Contract Details: fix wallet address regression","description":"Wallet Address in Smart Contract/Inscription Details shows a hard-coded value instead of the actual address. Fix binding to display the correct wallet (funding/payer or inscription metadata) across tabs, no hard-coded demo values.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-17T22:42:22.213139-08:00","updated_at":"2025-12-20T20:58:42.186572-08:00","closed_at":"2025-12-20T20:58:42.186572-08:00","close_reason":"Outdated"}
{"id":"starlight-1y2b","title":"Support donation toggle for commitment output pubkey","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-29T13:40:12.174672-08:00","updated_at":"2025-12-29T13:44:15.933129-08:00","closed_at":"2025-12-29T13:44:15.933129-08:00","close_reason":"Added commitment target toggle for donation vs funding address"}
{"id":"starlight-226","title":"Fix fund deposit auto-fill and layout ordering","description":"Auto-fill fund deposit address using task funding metadata; reorder checkboxes and widen fee rate field.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-20T11:28:19.000426-08:00","updated_at":"2025-12-20T11:28:49.697892-08:00","closed_at":"2025-12-20T11:28:49.697892-08:00","close_reason":"Auto-filled fund deposit address and adjusted checkbox/fee layout."}
{"id":"starlight-23q8","title":"Implement MCP get_open_contracts tool","description":"Add get_open_contracts tool to MCP toolkit. Include tool schema in tools.go, add to toolRequiresAuth() (no auth required), implement handleGetOpenContracts() method with caching, add to callToolDirect() switch statement. Support limit and status filtering parameters.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-18T11:43:40.045708-08:00","updated_at":"2026-01-18T11:53:54.711235-08:00","closed_at":"2026-01-18T11:53:54.711235-08:00","close_reason":"Added get_open_contracts tool to MCP toolkit with schema in tools.go, no auth required in toolRequiresAuth, implemented handleGetOpenContracts method with caching via store.ListContracts, added to callToolDirect switch, and supports limit/status filtering with defaults.","dependencies":[{"issue_id":"starlight-23q8","depends_on_id":"starlight-9s1j","type":"discovered-from","created_at":"2026-01-18T11:43:40.048132-08:00","created_by":"daemon"}]}
{"id":"starlight-280","title":"Separate smart contract vs inscription counts","description":"Smart contracts are being counted as inscriptions in UI/API; add distinct counting to avoid conflating smart_contract_count with inscription_count.","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-12-18T20:16:58.501875-08:00","updated_at":"2025-12-18T20:25:50.249601-08:00","closed_at":"2025-12-18T20:25:50.249601-08:00","close_reason":"Separate smart contract and inscription counts in summaries/UI"}
{"id":"starlight-2frx","title":"Review security patch banning word 'update' for SQL injection risk","description":"Assess whether blocking the word 'update' is a valid SQL injection mitigation; locate patch/code and evaluate.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-26T18:38:38.495294-08:00","updated_at":"2025-12-26T18:39:43.839516-08:00","closed_at":"2025-12-26T18:39:43.839516-08:00","close_reason":"Completed review"}
{"id":"starlight-2i4","title":"Use txid-based filenames for oracle reconcile","description":"Store extracted/moved images using txid-based filenames to avoid collisions and simplify oracle reconcile lookup and matching.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-18T20:16:27.995786-08:00","updated_at":"2025-12-18T20:25:34.215635-08:00","closed_at":"2025-12-18T20:25:34.215635-08:00","close_reason":"Use txid-based filenames when moving oracle-matched images"}
{"id":"starlight-2o1m","title":"Refactor psbt_builder.go - extract complex PSBT logic","description":"Complex PSBT building logic with nested conditions and Bitcoin-specific complexity. Extract PSBT building strategies, create validation layers, implement builder pattern.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-15T10:11:39.40905-08:00","updated_at":"2026-01-15T10:11:39.40905-08:00"}
{"id":"starlight-2z4","title":"Expose oracle smart contracts in block-inscriptions response","description":"GUI uses /api/data/block-inscriptions and block summaries; when oracle reconciliation creates smart_contracts but no inscriptions, the UI shows nothing. Synthesize inscription entries from smart_contracts and provide image_url via /api/block-image.","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-18T19:46:46.350077-08:00","updated_at":"2025-12-18T19:47:05.026978-08:00","closed_at":"2025-12-18T19:47:05.026978-08:00","close_reason":"Map smart contracts into block inscriptions responses"}
{"id":"starlight-32u","title":"PSBT payout split rules and fee estimation refinements","description":"Define payout-splitting rules (task-level vs proposal-level budgets, validation rules, ordering) and revisit fee estimation to minimize relay shortfalls without overpaying.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-19T16:19:54.16854-08:00","updated_at":"2025-12-19T16:50:55.418105-08:00","closed_at":"2025-12-19T16:50:55.418105-08:00","close_reason":"Relaxed payout validation, added flexible payout selection, and adjusted fee buffer behavior.","dependencies":[{"issue_id":"starlight-32u","depends_on_id":"starlight-yov","type":"discovered-from","created_at":"2025-12-19T16:19:54.169858-08:00","created_by":"daemon"}]}
{"id":"starlight-33z","title":"Add optional donation checkbox and right-align PSBT invoice amounts","description":"Add donation (commitment) checkbox default on; right-align invoice rows in PSBT summary.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-20T09:09:56.743451-08:00","updated_at":"2025-12-20T09:10:25.038169-08:00","closed_at":"2025-12-20T09:10:25.038169-08:00","close_reason":"Added donation toggle and right-aligned invoice layout."}
{"id":"starlight-344z","title":"Refactor backend/handlers/handlers.go - separate mixed concerns","description":"Generic handler file with multiple concerns, mixed API endpoints, poor separation of business logic. Split into domain-specific handlers, extract business logic to service layer.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-15T10:11:37.923409-08:00","updated_at":"2026-01-15T10:11:37.923409-08:00"}
{"id":"starlight-3c3f","title":"HIGH: Fix memory exhaustion DoS vulnerability in multipart form parsing","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-01-08T17:47:43.614225-08:00","updated_at":"2026-01-08T18:15:01.588658-08:00","closed_at":"2026-01-08T18:15:01.588658-08:00","close_reason":"Fixed memory exhaustion DoS by reducing multipart form limits and adding request size middleware"}
{"id":"starlight-3g9s","title":"Always include P2WSH commitment output in PSBT builds","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-29T13:24:39.49312-08:00","updated_at":"2025-12-29T13:25:26.329016-08:00","closed_at":"2025-12-29T13:25:26.329016-08:00","close_reason":"Always include P2WSH commitment output in PSBT builds"}
{"id":"starlight-3h93","title":"Backfill funding_txid via proposal ingestion_id","description":"If PSBT uses a stego contract id, resolve ingestion_id from proposal metadata and persist funding_txid and payout script hashes on that ingestion record.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-29T00:17:50.26552-08:00","updated_at":"2025-12-29T00:18:26.057005-08:00","closed_at":"2025-12-29T00:18:26.057005-08:00","close_reason":"Resolve ingestion_id via proposal metadata for PSBT funding metadata updates.","dependencies":[{"issue_id":"starlight-3h93","depends_on_id":"starlight-q867","type":"discovered-from","created_at":"2025-12-29T00:17:50.268964-08:00","created_by":"daemon"}]}
{"id":"starlight-3klo","title":"Use wish text in pending stego ingest","description":"When publishing pending stego ingest, set message from wish_text/embedded_message so remote pending transactions show the human wish.","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-31T16:30:24.821245-08:00","updated_at":"2025-12-31T16:30:56.488652-08:00","closed_at":"2025-12-31T16:30:56.488652-08:00","close_reason":"Use wish text for pending stego ingest message"}
{"id":"starlight-3n4c","title":"Escort service is not connected with smart contract server","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-04T16:38:57.279943-08:00","updated_at":"2026-01-05T08:00:01.826919-08:00","closed_at":"2026-01-05T08:00:01.826919-08:00","close_reason":"Closed"}
{"id":"starlight-3oz","title":"Document /api/inscribe price units and optional image fields","description":"Clarify /api/inscribe price units (BTC string) and require image (multipart or image_base64) since steganographic image is mandatory for wish creation.","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-21T20:01:16.052665-08:00","updated_at":"2025-12-21T20:06:38.710479-08:00","closed_at":"2025-12-21T20:06:38.710479-08:00","close_reason":"Documented /api/inscribe price units and image requirement"}
{"id":"starlight-3qr","title":"Update and complete MCP API documentation with accurate examples","description":"Updated MCP API documentation with complete proposal examples including tasks array, metadata, and budget validation. Added payment_details endpoint documentation and complete payment workflow guide.","notes":"Revisited in starlight-0w3i: MCP docs reviewed; no doc changes required for current endpoint behavior.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-26T07:58:21.551627-08:00","updated_at":"2025-12-26T09:52:29.724182-08:00","closed_at":"2025-12-26T08:15:53.333439-08:00","close_reason":"Updated MCP API documentation with complete examples and payment workflow"}
{"id":"starlight-3vj","title":"performance issue when rendering inscription images","description":"Stargate frontend gets HTTP code 408 frequently when there is large number of inscriptions to render.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-17T11:13:12.537981-08:00","updated_at":"2025-12-17T11:45:28.754307-08:00","closed_at":"2025-12-17T11:45:28.754307-08:00","close_reason":"Closed"}
{"id":"starlight-3ywr","title":"Fix MCP tool REST calls missing X-API-Key","description":"Ensure /mcp/call forwards the caller's X-API-Key to REST fallbacks so claim_task can bind contractor wallets.","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-26T10:32:30.195488-08:00","updated_at":"2025-12-26T10:32:43.958326-08:00","closed_at":"2025-12-26T10:32:43.958326-08:00","close_reason":"Forward caller API key through /mcp/call REST fallbacks and use it for claim wallet lookup."}
{"id":"starlight-40z","title":"Standardize header naming (pick one case)","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-21T14:10:40.524599-08:00","updated_at":"2025-12-26T18:24:57.215172-08:00","closed_at":"2025-12-26T18:24:57.215172-08:00","close_reason":"Closed"}
{"id":"starlight-44u","title":"Disable PSBT when funding wallet mismatch","description":"Disable Publish \u0026 Build PSBT if the signed-in wallet does not match the funding wallet recorded for the contract/task.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-19T21:06:10.804074-08:00","updated_at":"2025-12-19T21:19:51.57656-08:00","closed_at":"2025-12-19T21:19:51.57656-08:00","close_reason":"Disable Publish \u0026 Build when funding wallet differs"}
{"id":"starlight-45v","title":"Sweep commitments during oracle reconcile","description":"Trigger commitment sweep when oracle reconcile confirms a contract so missed sweeps are handled immediately.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-19T23:39:29.265161-08:00","updated_at":"2025-12-19T23:40:02.444052-08:00","closed_at":"2025-12-19T23:40:02.444052-08:00","close_reason":"Sweep on oracle reconcile via shared sweep helper"}
{"id":"starlight-460","title":"Remove fake QR code after smart contract inscription and refresh pending transaction","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-19T08:09:01.300535-08:00","updated_at":"2025-12-19T08:11:44.052454-08:00","closed_at":"2025-12-19T08:11:44.052454-08:00","close_reason":"Removed fake QR flow and refresh pending list after inscription"}
{"id":"starlight-46q4","title":"Fix redemption sweep: find commitment output by script hash","description":"Fixed contract redemption sweep bug where contract 7d452cc69b0f42777bf78f180c28e88ec9658c48ed7e50d427095daefd5e6377 failed to redeem commitment.\n\n**Root cause:** Contract has two outputs (vout=0: commitment, vout=1: payout). Sweep code used hardcoded vout=1 which fetched PAYOUT output instead of COMMITMENT output, causing script mismatch.\n\n**Fix:** Modified commitment_sweep.go to fetch full transaction and iterate all outputs to find commitment by matching script hash, not hardcoded vout.\n\n**Files modified:**\n- backend/bitcoin/commitment_sweep.go (lines 40-72)\n- backend/bitcoin/psbt_builder.go (line 253)\n\n**Status:** Code committed (88729f6), built, and deployed to default namespace. Needs deployment to starlight namespace and final verification that sweep succeeds.","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-01-13T13:07:34.120074-08:00","updated_at":"2026-01-13T13:07:58.999535-08:00","closed_at":"2026-01-13T13:07:58.999541-08:00"}
{"id":"starlight-4cg","title":"Confirmed block shows duplicate contracts with unknown_*.png IDs","description":"After oracle reconcile, confirmed block lists extra contracts using image filenames (unknown_*.png). Only real txid contract should appear.","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-19T08:52:20.47108-08:00","updated_at":"2025-12-19T09:07:35.597505-08:00","closed_at":"2025-12-19T09:07:35.597505-08:00","close_reason":"Preserve contract metadata so confirmed views show content and proposals"}
{"id":"starlight-4dwc","title":"Rename PendingTransactionsView to OpenContractsView in frontend","description":"Rename PendingTransactionsView.jsx to OpenContractsView.jsx, update component name, import in App.jsx, and API endpoint from /api/pending-transactions to /api/open-contracts. Update component title to 'Open Contracts'.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-18T11:43:44.34604-08:00","updated_at":"2026-01-18T11:56:00.800046-08:00","closed_at":"2026-01-18T11:56:00.800046-08:00","close_reason":"Renamed PendingTransactionsView.jsx to OpenContractsView.jsx, updated component name and export, changed API endpoint from /api/pending-transactions to /api/open-contracts, updated component title to 'Open Contracts', and updated import/usage in App.jsx.","dependencies":[{"issue_id":"starlight-4dwc","depends_on_id":"starlight-9s1j","type":"discovered-from","created_at":"2026-01-18T11:43:44.34844-08:00","created_by":"daemon"}]}
{"id":"starlight-4g82","title":"Set contract status to confirmed when oracle reconcile confirms ingestion","description":"When oracle reconcile moves a confirmed ingestion image into blocks, update the MCP contract status to confirmed (or another agreed value) so confirmed contracts are no longer treated as open.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-30T22:21:28.112461-08:00","updated_at":"2025-12-30T22:24:09.473977-08:00","closed_at":"2025-12-30T22:24:09.473977-08:00","close_reason":"Marked contracts confirmed when oracle reconcile confirms ingestion."}
{"id":"starlight-4idy","title":"Decoupled IPFS publishing from approval process","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-18T08:22:11.878223-08:00","updated_at":"2026-01-18T08:22:16.76931-08:00","closed_at":"2026-01-18T08:22:16.76931-08:00","close_reason":"Implemented async stego publishing during approval. Approval now returns immediately while IPFS operations happen in background with 2-minute timeout and proper error logging."}
{"id":"starlight-4kt","title":"Auto-sweep confirmed proofs","description":"Ensure commitment sweep runs for confirmed proofs even when confirmation status is already confirmed (not just provisional).","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-19T23:20:47.906524-08:00","updated_at":"2025-12-19T23:23:21.26097-08:00","closed_at":"2025-12-19T23:23:21.26097-08:00","close_reason":"Run sweep logic for confirmed proofs as well"}
{"id":"starlight-4ov","title":"Document payment workflow from wallet association to PSBT building","description":"Already documented complete payment workflow in MCP docs including wallet association, payment details endpoint, and PSBT building steps.","notes":"Revisited in starlight-0w3i: payment workflow docs reviewed; behavior remains consistent.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-26T07:58:23.811476-08:00","updated_at":"2025-12-26T09:52:31.562111-08:00","closed_at":"2025-12-26T08:16:41.088627-08:00","close_reason":"Payment workflow already documented in MCP API docs"}
{"id":"starlight-4tgl","title":"Unify upload-\u003eblocks reconcile with stego ingest","description":"Update stego publish to backfill ingestion metadata and ensure stego reconcile runs even when uploads-\u003eblocks move fails.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-27T21:32:52.565682-08:00","updated_at":"2025-12-28T23:13:08.655853-08:00","closed_at":"2025-12-28T23:13:08.655853-08:00","close_reason":"Backfill stego metadata on ingestion at approval and reconcile stego even if move fails."}
{"id":"starlight-4x3","title":"Make GET /mcp/ return helpful JSON with links","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-21T14:09:34.01279-08:00","updated_at":"2025-12-21T14:15:29.27684-08:00","closed_at":"2025-12-21T14:15:29.27684-08:00","close_reason":"Added /mcp index JSON with links"}
{"id":"starlight-4yyr","title":"Block proposal creation without wish reference","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-31T20:27:05.494326-08:00","updated_at":"2025-12-31T20:28:30.947206-08:00","closed_at":"2025-12-31T20:28:30.947206-08:00","close_reason":"Added wish check for proposal creation from ingestion"}
{"id":"starlight-5112","title":"Fix approved proposal validation not deployed","description":"Deployed validation code but issue persists in production. PGStore uses ValidateProposalInput correctly (zero budget validation works), but approved proposals with empty tasks still being approved. May be deployment timing issue or edge case in validation logic. Zero budget validation is working correctly.","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-26T08:28:32.96775-08:00","updated_at":"2025-12-26T10:58:39.852751-08:00","closed_at":"2025-12-26T10:58:39.852751-08:00","close_reason":"Require tasks at approval time and update tests to include tasks."}
{"id":"starlight-55dl","title":"Create roadmap proposal for contract 4e5c15a0...","description":"Draft and submit MCP proposal with vision, budget, and tasks for the starlight roadmap contract.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-26T19:20:36.218829-08:00","updated_at":"2025-12-26T19:22:21.872204-08:00","closed_at":"2025-12-26T19:22:21.872204-08:00","close_reason":"Submitted MCP proposal"}
{"id":"starlight-59mb","title":"Include stego payload metadata in IPFS ingestion records","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-29T15:16:28.206627-08:00","updated_at":"2025-12-29T15:17:28.340915-08:00","closed_at":"2025-12-29T15:17:28.340915-08:00","close_reason":"Merged stego payload metadata into IPFS ingestion records"}
{"id":"starlight-5f8g","title":"Use wish text for proposal pending view","description":"Pending transaction view should show wish_text from proposal metadata instead of proposal title.","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-31T16:51:02.860309-08:00","updated_at":"2025-12-31T16:51:16.634981-08:00","closed_at":"2025-12-31T16:51:16.634981-08:00","close_reason":"Pending proposals now prefer wish_text"}
{"id":"starlight-5le","title":"Define and document end-to-end wish→proposal→contract workflow","description":"Document the ideal flow: inscribe wish → create proposal → approve into contract → claim/submit → review → PSBT → confirm → close. Provide step-by-step API + UI mapping and roles (agent1/agent2).","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-21T18:46:19.862169-08:00","updated_at":"2025-12-21T19:04:31.594544-08:00","closed_at":"2025-12-21T19:04:31.594544-08:00","close_reason":"Documented end-to-end wish→proposal→contract workflow"}
{"id":"starlight-5mb2","title":"Prefer approved proposal for stego payload","description":"When building PSBT stego payload, resolve proposal ID by preferring approved/published proposals for a visible hash instead of the wish proposal ID.","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-31T15:33:50.973981-08:00","updated_at":"2025-12-31T15:34:29.590568-08:00","closed_at":"2025-12-31T15:34:29.590568-08:00","close_reason":"Prefer approved proposal when resolving stego payload"}
{"id":"starlight-5orb","title":"Fix PSBT build bug - task status reverts to available after PSBT creation","description":"After building PSBT for contract 5a8c2a1a7a1b6b48a20545479a6fc07539826d5efde350f7f24d7f007f295025, task status incorrectly changes from claimed/submitted back to available. Need to investigate PSBT build process and identify what's causing status reversion.","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-01-17T21:13:35.901415-08:00","updated_at":"2026-01-17T21:19:16.34266-08:00","closed_at":"2026-01-17T21:19:16.34266-08:00","close_reason":"Fixed PSBT build bug - task status was being reset to available during contract_upsert sync. The issue was in sync reconciliation where UpsertContractWithTasks was called with nil tasks, causing task status to reset. Fixed by skipping contract_upsert sync events that would reset task statuses."}
{"id":"starlight-5p41","title":"Persist API key wallet bindings server-side","description":"Ensure wallet_address is stored with API keys so contractors can claim tasks without re-supplying wallets; update auth/login and claim flows to persist wallet mappings.","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-26T10:08:59.759874-08:00","updated_at":"2025-12-26T10:10:33.383973-08:00","closed_at":"2025-12-26T10:10:33.383973-08:00","close_reason":"Persist wallet bindings via auth login and claim updates (server-side API key wallet mapping)."}
{"id":"starlight-5py","title":"Add split per-payer PSBT option for raise_fund","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-20T17:48:13.245292-08:00","updated_at":"2025-12-21T23:33:15.293494-08:00","closed_at":"2025-12-21T23:33:15.293494-08:00","close_reason":"Closed"}
{"id":"starlight-5sjr","title":"Local instance missing pending transaction after IPFS ingest","description":"Image replicated via IPFS (file present) but local instance shows no pending transaction for same visible_pixel_hash; likely proposal/contract ingestion missing or UI filtering.","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-29T18:59:39.170846-08:00","updated_at":"2025-12-29T19:21:20.03758-08:00","closed_at":"2025-12-29T19:21:20.03758-08:00","close_reason":"Pending transactions now include proposals; IPFS-ingested wish shows in local pending view."}
{"id":"starlight-5sjy","title":"Test SegWit TxID pre-calculation scenarios","description":"Create comprehensive tests for the zero-cost funding feature: verify pre-calculated TxID matches final TxID for P2WPKH, P2WSH, and Taproot inputs; confirm Legacy inputs still return empty TxID; test fallback mechanisms remain intact.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-18T14:51:14.908906-08:00","updated_at":"2026-01-18T14:57:33.251469-08:00","closed_at":"2026-01-18T14:57:33.251469-08:00","close_reason":"Created comprehensive test structure for zero-cost funding feature. Added basic helper function tests and placeholders for integration tests that require mock setup."}
{"id":"starlight-5txt","title":"IPFS ingest sync should merge funding/commitment metadata for remote reconcile","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-29T21:35:30.444262-08:00","updated_at":"2025-12-29T21:39:27.222301-08:00","closed_at":"2025-12-29T21:39:27.222301-08:00","close_reason":"Published ingest_update announcements for funding/commitment metadata; IPFS ingest applies updates."}
{"id":"starlight-601","title":"visible_pixel_hash is truncated (8 bytes) and unusable for PSBT/oracle matching","description":"visible_pixel_hash is computed as only 8 bytes (short hash). Needs full-length 32-byte hash (sha256) for PSBT/oracle matching; update computeVisiblePixelHash and ingestion metadata to store full hash.","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-18T14:05:32.808841-08:00","updated_at":"2025-12-18T14:10:46.017075-08:00","closed_at":"2025-12-18T14:10:46.017075-08:00","close_reason":"Done","dependencies":[{"issue_id":"starlight-601","depends_on_id":"starlight-qpc","type":"discovered-from","created_at":"2025-12-18T14:05:32.810266-08:00","created_by":"eric"}]}
{"id":"starlight-6c2","title":"Add Taproot option for PSBT builder","description":"Add a Taproot option to the PSBT builder: allow payer/change and/or payout to use taproot (bc1p/tb1p) when wallets support it, lowering fees. Keep P2WPKH as default for compatibility. Update UI toggle, fee estimation, and builder logic to handle taproot addresses/scripts.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-17T21:56:34.034315-08:00","updated_at":"2025-12-21T23:35:08.031899-08:00","closed_at":"2025-12-21T23:35:08.031899-08:00","close_reason":"Closed"}
{"id":"starlight-6dna","title":"Modify BuildFundingPSBT to pre-calculate TxID for SegWit inputs","description":"Update BuildFundingPSBT function to use allInputsAreSegWit() check and calculate FundingTxID for all-SegWit transactions. Enables O(1) transaction identification for zero-cost funding without dust commitment outputs.","status":"closed","priority":1,"issue_type":"feature","created_at":"2026-01-18T14:51:09.193597-08:00","updated_at":"2026-01-18T14:55:38.324552-08:00","closed_at":"2026-01-18T14:55:38.324552-08:00","close_reason":"Modified BuildFundingPSBT to pre-calculate TxID for all-SegWit transactions. Added inline SegWit detection logic and TxID calculation."}
{"id":"starlight-6k8a","title":"HIGH: Fix unrestricted file serving in /uploads and /docs endpoints","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-01-08T17:47:32.735497-08:00","updated_at":"2026-01-08T17:57:50.491999-08:00","closed_at":"2026-01-08T17:57:50.491999-08:00","close_reason":"Fixed unrestricted file serving by implementing whitelist-based file access control"}
{"id":"starlight-6lbz","title":"Show payer address from signed-in wallet in payout mode","description":"Deliverables Review shows empty Payer address in payout mode; use auth.wallet as fallback when not raise_fund.","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-26T17:07:22.108823-08:00","updated_at":"2025-12-26T17:07:49.827747-08:00","closed_at":"2025-12-26T17:07:49.827747-08:00","close_reason":"Use auth.wallet for payout payer address display"}
{"id":"starlight-6qs3","title":"Stego metadata missing for confirmed contracts","description":"Confirmed smart contracts sometimes lack stego flags/metadata in UI despite stego payload present. Verify scan metadata propagation for confirmed blocks.","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-30T11:08:32.818965-08:00","updated_at":"2025-12-30T13:08:56.857441-08:00","closed_at":"2025-12-30T13:08:56.857441-08:00","close_reason":"Fixed","dependencies":[{"issue_id":"starlight-6qs3","depends_on_id":"starlight-lipm","type":"discovered-from","created_at":"2025-12-30T11:08:32.821609-08:00","created_by":"daemon"}]}
{"id":"starlight-6skz","title":"Propagate PSBT metadata into proposal for stego payload","description":"Update proposal metadata with funding_txid/commitment_lock_address during PSBT build so stego payload carries match data across instances.","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-29T17:57:48.906231-08:00","updated_at":"2025-12-29T18:00:13.701491-08:00","closed_at":"2025-12-29T18:00:13.701491-08:00","close_reason":"Stopped by user; PSBT metadata should not be propagated"}
{"id":"starlight-6va","title":"Enable task reclaim after rejection","description":"Ensure rejected tasks return to available status, clear claim association, and track attempt count with rejection feedback.","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-21T14:32:18.25734-08:00","updated_at":"2025-12-21T14:55:04.519034-08:00","closed_at":"2025-12-21T14:55:04.519034-08:00","close_reason":"Completed"}
{"id":"starlight-701","title":"PSBT payout targets wrong output","description":"Sparrow import shows PSBT consolidating to funder wallet instead of paying contractor payout from task; ensure payout output uses contractor/funding_address and not funder change only.","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-17T16:02:40.640467-08:00","updated_at":"2025-12-17T16:32:23.736725-08:00","closed_at":"2025-12-17T16:32:23.736725-08:00","close_reason":"Closed"}
{"id":"starlight-72c","title":"Reduce deliverables refresh blink and prefer latest submission","description":"Background refresh should not toggle loading or reset state; proposals tab should show latest submission status instead of task default. Also constrain notes overflow.","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-12-21T21:56:08.029844-08:00","updated_at":"2025-12-21T21:59:49.786271-08:00","closed_at":"2025-12-21T21:59:49.786271-08:00","close_reason":"Updated refresh behavior, task status display, and notes overflow"}
{"id":"starlight-73t8","title":"Archive wish after approved contract; ingest proposal from stego","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-29T10:20:00.400492-08:00","updated_at":"2025-12-29T10:25:49.077706-08:00","closed_at":"2025-12-29T10:25:49.077706-08:00","close_reason":"Implemented"}
{"id":"starlight-78l","title":"Auth re-login loses wallet binding","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-17T17:00:37.76199-08:00","updated_at":"2025-12-17T17:04:49.949702-08:00","closed_at":"2025-12-17T17:04:49.949702-08:00","close_reason":"Closed"}
{"id":"starlight-7nc7","title":"Refactor /api/open-contracts to query mcp_contracts only","description":"Rewrite SmartContractHandler.HandleGetContracts to query mcp_contracts table only and return PendingTransactionsResponse format. Remove ingestion fallback logic, use persisted stego_image_url, compute fallback URL /uploads/{contract_id}.png when needed. Remove API key requirement.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-18T11:43:32.002544-08:00","updated_at":"2026-01-18T11:52:15.579096-08:00","closed_at":"2026-01-18T11:52:15.579096-08:00","close_reason":"Completely refactored /api/open-contracts to query mcp_contracts only, implemented caching with 10-minute TTL, removed ingestion fallback logic, added stego_image_url persistence support, changed response format to PendingTransactionsResponse, and removed API key requirement.","dependencies":[{"issue_id":"starlight-7nc7","depends_on_id":"starlight-9s1j","type":"discovered-from","created_at":"2026-01-18T11:43:32.004824-08:00","created_by":"daemon"}]}
{"id":"starlight-7pmk","title":"Fix inscribe endpoint image size validation and task availability consistency","description":"FRONTEND/BACKEND SYNC ISSUE IDENTIFIED:\n\nROOT CAUSE: User wallet 'tb1qgsn5zdszkzjhpslg6wnt3y0rqup7l9c9k5hwfz' correctly claims task in backend, but 'claimed_by' field not being updated in database due to:\n\n1. CONFLICTING CLAIM LOGIC - Line 456 in pg_store.go: task.ClaimedBy = claim.ClaimID (sets to Claim ID instead of aiID)\n2. 'CONN BUSY' ERRORS - Database connection pool exhaustion due to IPFS failures \n3. BINARY DEPLOYMENT - Backend binary runs from /usr/local/bin/stargate but code expects /app/backend/\n\nEVIDENCE: \n- User can successfully claim task via direct API call\n- Database shows task.status='available' after claim (claimed_by field empty)\n- Frontend shows task as claimable (stale data)\n- 'conn busy' errors indicate database issues\n\nACTUAL BUGS TO FIX:\n1. pg_store.go:456 - task.ClaimedBy = claim.ClaimID should be task.ClaimedBy = aiID\n2. Binary deployment path mismatch causing resource access issues\n3. IPFS connection failures causing database pool exhaustion\n\nThis is a multi-layered deployment and infrastructure issue requiring systematic fixes across both backend logic and deployment configuration.","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-01-12T22:46:26.026959-08:00","updated_at":"2026-01-12T23:33:57.406953-08:00","closed_at":"2026-01-12T23:33:57.406953-08:00","close_reason":"Multi-layered issue identified - frontend/backend data inconsistency due to conflicting claim logic, database connection issues, and deployment path mismatches. Requires systematic fixes across backend ClaimTask logic, IPFS connectivity, and deployment configuration."}
{"id":"starlight-7uy","title":"Infer network from wallet addresses","description":"Smart Contract Details shows wrong network (mainnet) for testnet contracts. Update network detection to infer from funding/payer/contractor wallet addresses first (bech32/base58 hrp/prefix), fallback to metadata, and only then health endpoint. Display testnet when wallets are testnet addresses.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-17T20:17:40.375749-08:00","updated_at":"2025-12-17T20:27:03.701572-08:00","closed_at":"2025-12-17T20:27:03.701572-08:00","close_reason":"Closed"}
{"id":"starlight-7yi","title":"Update smart contract grid cards to photo-style layout","description":"Make smart contract grid cards resemble contracts poster style but smaller photo size with headline overlay.","status":"closed","priority":3,"issue_type":"feature","created_at":"2025-12-19T10:26:48.091828-08:00","updated_at":"2025-12-19T10:36:45.040424-08:00","closed_at":"2025-12-19T10:36:45.040424-08:00","close_reason":"Adjusted smart contract grid to 3-column flow layout"}
{"id":"starlight-832o","title":"Inscribe flow price not reflected in total_budget_sats","description":"Inscribe flow shows price but total_budget_sats stays 0; wire price -\u003e total_budget_sats.","notes":"Fixed price parsing for total_budget_sats","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-30T14:55:46.221336-08:00","updated_at":"2025-12-30T14:58:14.063046-08:00","closed_at":"2025-12-30T14:58:14.063055-08:00"}
{"id":"starlight-83jr","title":"Add approval-guard tests","description":"Add tests for REST/MCP proposal approval guard requiring wish contract.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-31T11:38:25.204761-08:00","updated_at":"2025-12-31T11:42:00.85365-08:00","closed_at":"2025-12-31T11:42:00.85365-08:00","close_reason":"Added REST/MCP approval guard tests"}
{"id":"starlight-83k","title":"Remove NODE_OPTIONS localstorage warning from frontend test runs","description":"Stop injecting --localstorage-file into frontend Node options so tests run without warnings.","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-22T18:51:58.242857-08:00","updated_at":"2025-12-22T18:54:36.233129-08:00","closed_at":"2025-12-22T18:54:36.233129-08:00","close_reason":"Suppress test warning noise via NODE_NO_WARNINGS"}
{"id":"starlight-85l","title":"Add contract/task filters for agent coordination","description":"Add contract_id filter to list_tasks and creator/ai_identifier filters to list_contracts to support multi-agent workflows.","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-21T18:46:35.898377-08:00","updated_at":"2025-12-26T17:22:39.688355-08:00","closed_at":"2025-12-26T17:22:39.688355-08:00","close_reason":"Add contract/task filters for list_contracts and list_tasks"}
{"id":"starlight-86hu","title":"Auto-select stego method by image type and add wish contract prefix","description":"Auto-select stego method based on image type in /api/inscribe. Map JPEG-\u003eexif (fallback eoi), PNG-\u003ealpha, GIF-\u003epalette; keep requested method if compatible. Add wish-\u003cvisible_hash\u003e prefix for pre-approval contracts; pending list merges ingestion records into wish contracts; wish contracts archived (status=superseded) when stego publish succeeds.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-28T21:00:52.183679-08:00","updated_at":"2025-12-28T21:02:32.699765-08:00","closed_at":"2025-12-28T21:02:32.699765-08:00","close_reason":"Implemented stego method selection and wish contract lifecycle."}
{"id":"starlight-87d","title":"Hide PSBT for confirmed contracts uses right fields","description":"Contract shows confirmed in UI but Deliverables still renders Publish \u0026 Build PSBT; expand confirmation detection to include top-level confirmed fields/status.","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-12-19T19:51:41.482569-08:00","updated_at":"2025-12-19T19:53:18.365725-08:00","closed_at":"2025-12-19T19:53:18.365725-08:00","close_reason":"Check top-level confirmation fields for PSBT gating","dependencies":[{"issue_id":"starlight-87d","depends_on_id":"starlight-jzn","type":"discovered-from","created_at":"2025-12-19T19:51:41.483618-08:00","created_by":"daemon"}]}
{"id":"starlight-899c","title":"Publish pending ingestion announcements over IPFS pubsub","description":"Add pubsub announcements for pending ingestions and subscribe to create pending ingestion records on peers without shared manifest.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-27T21:04:28.798936-08:00","updated_at":"2025-12-27T21:06:19.858396-08:00","closed_at":"2025-12-27T21:06:19.858396-08:00","close_reason":"Done"}
{"id":"starlight-8ca","title":"Add submission comparison view","description":"Provide side-by-side submission comparison with status filters, sorting, and export.","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-21T14:32:25.870476-08:00","updated_at":"2025-12-21T15:08:44.659758-08:00","closed_at":"2025-12-21T15:08:44.659758-08:00","close_reason":"Completed"}
{"id":"starlight-8can","title":"Deploy redemption sweep fix to starlight namespace and verify","description":"Reverted broken PSBT builder change (commit dfe932d). The original fix (88729f6) accidentally removed tx.AddTxOut() call, causing contract transactions to be built WITHOUT commitment output.\n\n**Root cause:**\nCommit 88729f6 removed the line that adds commitment output to transaction, making redemption sweep fail because commitment doesn't exist in the transaction.\n\n**Fix applied:**\n- Reverted commit 88729f6, restoring tx.AddTxOut() call\n- This ensures commitment output is properly added to contract transactions\n- Sweep code fix (commit 96f10fa) remains in place to find commitment by script hash\n\n**Current status:**\n- Code committed (dfe932d) and deployed to both default and starlight namespaces\n- Contract transaction 7d452cc... was confirmed with BROKEN code (no commitment output)\n- This specific contract cannot be swept because commitment output doesn't exist in it\n- Future contracts will be built with correct code and commitment output will exist\n\n**For existing failed contract:**\n- Transaction 7d452cc... was confirmed without commitment output\n- Sweep will continue to fail because there's no commitment to sweep\n- Manual investigation needed to determine if funds can be recovered from vout=1 P2WSH output","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-13T13:08:04.506988-08:00","updated_at":"2026-01-13T13:25:42.928414-08:00","closed_at":"2026-01-13T13:25:42.928421-08:00"}
{"id":"starlight-8cv5","title":"Add SegWit detection helper function to psbt_builder.go","description":"Implement allInputsAreSegWit() helper function that checks if all UTXO inputs are SegWit types (P2WPKH, P2WSH, Taproot). This function is needed to determine when TxID pre-calculation is safe for zero-cost funding reliability.","status":"closed","priority":1,"issue_type":"feature","created_at":"2026-01-18T14:51:06.002526-08:00","updated_at":"2026-01-18T14:51:49.541866-08:00","closed_at":"2026-01-18T14:51:49.541866-08:00","close_reason":"Implemented allInputsAreSegWit() helper function in psbt_builder.go"}
{"id":"starlight-8g06","title":"Refactor backend/middleware/smart_contract/server.go - split 3,442 line monolith","description":"Started refactoring server.go - extracted basic handlers structure. Created directory structure, middleware, contract/proposal handlers, and PSBT service. Build errors need fixing, but foundation is established.","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-15T10:11:29.350169-08:00","updated_at":"2026-01-15T15:02:43.617626-08:00"}
{"id":"starlight-8g0v","title":"Fix fundraise oracle reconcile: add payout_script_hash","description":"Fundraise contracts not being confirmed because ingestion metadata missing payout_script_hash. Oracle reconcile needs this to match funding transaction outputs. PSBT broadcasted by sparrow wallet externally, so metadata update must populate it.","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-01-16T16:03:04.263531-08:00","updated_at":"2026-01-16T16:09:22.782621-08:00","closed_at":"2026-01-16T16:09:22.782621-08:00","close_reason":"Fixed by adding payout_script_hash to ingest update announcement and apply logic"}
{"id":"starlight-8h8","title":"Content handler should resolve txids via smart contracts","description":"Frontend uses /content/{txid}?witness=0. When oracle reconciliation only populates smart_contracts, tx index and content lookups fail. Include smart_contracts when building tx index and resolving inscriptions.","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-18T20:01:47.357685-08:00","updated_at":"2025-12-18T20:02:07.884401-08:00","closed_at":"2025-12-18T20:02:07.884401-08:00","close_reason":"Include smart contracts when resolving content txids"}
{"id":"starlight-8ms","title":"Fix fund deposit autofill and checkbox styling","description":"Ignore placeholder deposit address, prefer funding metadata, and remove gray borders on checkbox rows.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-20T11:37:05.467955-08:00","updated_at":"2025-12-20T11:37:52.809702-08:00","closed_at":"2025-12-20T11:37:52.809702-08:00","close_reason":"Ignore placeholder deposit address and restyle checkbox rows."}
{"id":"starlight-8my5","title":"Add deterministic YAML manifest builder for stego payload","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-27T16:51:40.743517-08:00","updated_at":"2025-12-27T16:55:48.914696-08:00","closed_at":"2025-12-27T16:55:48.914696-08:00","close_reason":"Added deterministic YAML manifest builder"}
{"id":"starlight-8q8","title":"Auto-sweep commitment outputs on confirmation","description":"When a funding tx confirms and a task has commitment metadata (redeem script, vout, visible pixel hash), automatically build and broadcast the sweep tx to STARLIGHT_DONATION_ADDRESS. Persist sweep txid/status and guard against dust outputs.","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-19T19:24:25.82344-08:00","updated_at":"2025-12-19T19:30:05.134391-08:00","closed_at":"2025-12-19T19:30:05.134391-08:00","close_reason":"Auto-sweep added in funding sync with broadcast + status tracking.","dependencies":[{"issue_id":"starlight-8q8","depends_on_id":"starlight-yov","type":"discovered-from","created_at":"2025-12-19T19:24:25.824735-08:00","created_by":"daemon"}]}
{"id":"starlight-8tqk","title":"Fix oracle matching regression for transactions without payout scripts","description":"Oracle matching logic was updated to require script hashes, but funding transaction 21579ead345e05183556b9c2eb241a7a696a13e882aa2e35b4e12b971ab6fa0b has no payout scripts (only simple P2WPKH outputs). Oracle fails to match because it tries to match non-existent script hashes. Need to support fallback matching for transactions without scripts.","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-01-17T23:01:18.022703-08:00","updated_at":"2026-01-17T23:31:33.106027-08:00","closed_at":"2026-01-17T23:31:33.106027-08:00","close_reason":"Fixed oracle matching regression for transactions without payout scripts. Added fallback matching for simple outputs like P2WPKH that don't have script hashes."}
{"id":"starlight-8u5","title":"UI shows 0 smart contracts despite block-summaries count","description":"block-summaries API reports smart_contract_count \u003e 0 but frontend shows 0; investigate mapping in UI counters and ensure smart_contract_count is consumed.","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-18T20:16:48.685483-08:00","updated_at":"2025-12-18T20:25:44.910075-08:00","closed_at":"2025-12-18T20:25:44.910075-08:00","close_reason":"UI now uses smart_contract_count and smart_contracts"}
{"id":"starlight-8uij","title":"when trying to approve a proposal, error message shows up: Approve failed: Fetch is aborted","description":"Approving a proposal seems to cause a SQL state instability.  There is a error in response, but the UI is quickly refreshed and show Approved.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-05T16:15:41.314754-08:00","updated_at":"2026-01-08T19:16:05.733235-08:00","closed_at":"2026-01-08T19:16:05.733235-08:00","close_reason":"Fixed approval process timeout and context cancellation errors by increasing stego publishing timeout and improving error handling"}
{"id":"starlight-8x6t","title":"Fix build errors in refactored server.go handlers","description":"Fixed all build errors in refactored handlers. Resolved import conflicts by using aliases for smart_contract package. All handlers now compile successfully.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-15T10:26:29.165258-08:00","updated_at":"2026-01-15T10:57:27.265303-08:00","closed_at":"2026-01-15T10:57:27.265303-08:00","close_reason":"All build errors fixed. Refactored handlers now compile successfully with proper import aliases. Ready for next phase of server.go refactoring.","dependencies":[{"issue_id":"starlight-8x6t","depends_on_id":"starlight-8g06","type":"discovered-from","created_at":"2026-01-15T10:26:29.168998-08:00","created_by":"daemon"}]}
{"id":"starlight-8ya","title":"Log sweep broadcasts","description":"Add backend log entry when commitment sweep broadcast succeeds so oracle reconcile runs are visible.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-19T23:45:43.675872-08:00","updated_at":"2025-12-19T23:53:48.606088-08:00","closed_at":"2025-12-19T23:53:48.606088-08:00","close_reason":"Add log on sweep broadcast"}
{"id":"starlight-9196","title":"Complete server.go refactoring - extract remaining handlers","description":"Extracted all remaining handlers from server.go: TaskHandler, ClaimHandler, SubmissionHandler, EventHandler. Created TaskService for business logic. All handlers build successfully. Ready for server.go route updates and final code removal.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-15T10:26:43.753725-08:00","updated_at":"2026-01-15T11:16:28.162253-08:00","closed_at":"2026-01-15T11:16:28.162253-08:00","close_reason":"Handler extraction complete. All major handlers extracted: ContractHandler, ProposalHandler, TaskHandler, ClaimHandler, SubmissionHandler, EventHandler. Supporting services created. Foundation ready for route updates.","dependencies":[{"issue_id":"starlight-9196","depends_on_id":"starlight-8g06","type":"discovered-from","created_at":"2026-01-15T10:26:43.758244-08:00","created_by":"daemon"}]}
{"id":"starlight-923","title":"Block monitor fetches mainnet raw blocks when BITCOIN_NETWORK=testnet4","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-18T11:52:42.695857-08:00","updated_at":"2025-12-18T12:02:56.420903-08:00","closed_at":"2025-12-18T12:02:56.420903-08:00","close_reason":"Done","dependencies":[{"issue_id":"starlight-923","depends_on_id":"starlight-93h","type":"discovered-from","created_at":"2025-12-18T11:52:42.696973-08:00","created_by":"eric"}]}
{"id":"starlight-92j","title":"Validate review rejection/resubmission scenarios","description":"Run Round 3 test scenarios for rejection/resubmission flow, multi-round contest, and long-form submission stress test.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-21T14:32:38.641465-08:00","updated_at":"2025-12-21T16:12:34.880411-08:00","closed_at":"2025-12-21T16:12:34.880411-08:00","close_reason":"Reviewed Round 3 submissions; approved/rejected accordingly and fixed submissions API scan"}
{"id":"starlight-93h","title":"Move confirmed smart contract from uploads directory to the correct block height images directory","description":"block monitor should check pixel hash and payout script hash to move image to designated block height directory for historical record keeping, and update smart contract info for the block accordingly","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-18T11:05:09.187384-08:00","updated_at":"2025-12-18T11:31:09.995518-08:00","closed_at":"2025-12-18T11:31:09.995518-08:00","close_reason":"Done"}
{"id":"starlight-98l","title":"Round 5 wish + proposal approval + progress review","description":"Create Round 5 wish, allow agents to propose, approve best proposal, and review progress.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-21T19:16:09.500391-08:00","updated_at":"2025-12-21T19:25:22.614604-08:00","closed_at":"2025-12-21T19:25:22.614604-08:00","close_reason":"Created Round 5 wish, approved proposal, reviewed progress"}
{"id":"starlight-99bx","title":"Block summary drops smart_contracts when stegoCount is zero","description":"saveBlockSummaryWithScanResults writes smart_contracts as empty when stegoCount==0, wiping oracle-reconciled contracts from inscriptions.json.","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-29T20:26:24.413973-08:00","updated_at":"2025-12-29T20:27:19.261024-08:00","closed_at":"2025-12-29T20:27:19.261024-08:00","close_reason":"Block summary now preserves smart_contracts even when stegoCount==0."}
{"id":"starlight-9b8t","title":"Fix IPFS pubsub publish payload","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-27T15:33:48.074218-08:00","updated_at":"2025-12-27T15:34:23.064737-08:00","closed_at":"2025-12-27T15:34:23.064737-08:00","close_reason":"Send pubsub data as multipart"}
{"id":"starlight-9c4c","title":"CRITICAL: Add authentication to all sensitive API endpoints","status":"closed","priority":0,"issue_type":"bug","created_at":"2026-01-08T17:47:29.783973-08:00","updated_at":"2026-01-08T17:57:00.992911-08:00","closed_at":"2026-01-08T17:57:00.992911-08:00","close_reason":"Added authentication middleware to all sensitive API endpoints and fixed CORS policy"}
{"id":"starlight-9i2","title":"PSBT should store funding_txid even when use_pixel_hash=false","description":"handleContractPSBT only saved funding_txid when use_pixel_hash resolved an ingestion record. This prevents oracle reconcile from matching by txid when pixel hash is disabled.","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-18T19:03:56.077174-08:00","updated_at":"2025-12-18T19:04:14.455893-08:00","closed_at":"2025-12-18T19:04:14.455893-08:00","close_reason":"Always load ingestion by contract id for funding_txid storage"}
{"id":"starlight-9jd","title":"Polish fundraiser payout UI labels and defaults","description":"Update fundraiser labels (Raise Fund / Deposit Fund) and align checkbox styling; default deposit to contract creator address.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-20T11:01:02.27934-08:00","updated_at":"2025-12-20T11:19:57.316682-08:00","closed_at":"2025-12-20T11:19:57.316682-08:00","close_reason":"Superseded by starlight-dbj updates."}
{"id":"starlight-9ko","title":"Use contractor wallets as payer_addresses for raise_fund PSBT","description":"Derive multi-payer inputs from claimed contractor wallets for raise_fund contracts, with change sent to contract creator address, and remove UI toggles.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-20T15:38:30.535079-08:00","updated_at":"2025-12-20T15:39:36.282763-08:00","closed_at":"2025-12-20T15:39:36.282763-08:00","close_reason":"Derive raise_fund payers from contractor wallets"}
{"id":"starlight-9nzc","title":"Remove SQL keyword stripping from input sanitizer","description":"Eliminate SQL keyword blacklist from SanitizeInput; rely on parameterized queries. Adjust tests if needed.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-26T18:51:54.685094-08:00","updated_at":"2025-12-26T18:52:41.949746-08:00","closed_at":"2025-12-26T18:52:41.949746-08:00","close_reason":"Removed SQL keyword blacklist"}
{"id":"starlight-9o19","title":"Update MCP e2e workflow script for current API","description":"Refresh scripts/e2e_mcp_workflow.sh to use /mcp/call and cover payout + raise_fund flows; handle PSBT build and known no-UTXO warnings.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-26T16:02:18.820591-08:00","updated_at":"2025-12-26T16:03:03.242876-08:00","closed_at":"2025-12-26T16:03:03.242876-08:00","close_reason":"Updated script and validated payout/raise-fund flows"}
{"id":"starlight-9prp","title":"Fix PSBT UI to use contract id (visible pixel hash)","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-29T12:52:56.597336-08:00","updated_at":"2025-12-29T12:54:09.720534-08:00","closed_at":"2025-12-29T12:54:09.720534-08:00","close_reason":"Implemented"}
{"id":"starlight-9r0","title":"Remove zero confidence placeholders in smart contract grid and details","description":"Smart contract grid and details show a 0 where stego confidence placeholder used to be; hide confidence indicators when zero.","status":"closed","priority":3,"issue_type":"bug","created_at":"2025-12-19T09:27:45.643287-08:00","updated_at":"2025-12-19T09:36:06.207213-08:00","closed_at":"2025-12-19T09:36:06.207213-08:00","close_reason":"Hide zero-percent confidence indicators in cards and details"}
{"id":"starlight-9rfo","title":"Pending transactions dedupe by contract id","description":"Pending transactions shows multiple IDs for one wish (proposal id, ingestion id, contract id). Dedupe by canonical contract/visible_pixel_hash so only canonical contract appears.","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-31T00:08:45.099266-08:00","updated_at":"2025-12-31T00:14:00.770294-08:00","closed_at":"2025-12-31T00:14:00.770294-08:00","close_reason":"Also dedupe pending ingestions by wish key derived from proposal description/title."}
{"id":"starlight-9s1j","title":"Remove /api/pending-transactions endpoint and replace with /api/open-contracts","description":"Replace /api/pending-transactions with /api/open-contracts across frontend, backend, and documentation. Ensure API consistency and update all references.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-18T11:07:57.849723-08:00","updated_at":"2026-01-18T11:44:19.597995-08:00","closed_at":"2026-01-18T11:44:19.597995-08:00","close_reason":"Broken down into 8 specific implementation tasks for database migration, caching, backend refactoring, MCP integration, frontend updates, ingestion service changes, documentation updates, and testing/deployment."}
{"id":"starlight-9t1","title":"Add funding_mode metadata at inscribe and use to preselect PSBT flow","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-20T14:29:58.170742-08:00","updated_at":"2025-12-20T14:31:40.64603-08:00","closed_at":"2025-12-20T14:31:40.64603-08:00","close_reason":"Added funding_mode to inscribe metadata and PSBT defaults"}
{"id":"starlight-9ul","title":"Migrate frontend from CRA (react-scripts) to Vite to address dependency vulnerabilities","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-22T18:11:29.111258-08:00","updated_at":"2025-12-22T18:20:27.804469-08:00","closed_at":"2025-12-22T18:20:27.804469-08:00","close_reason":"Completed Vite migration and resolved vulnerabilities"}
{"id":"starlight-9y1t","title":"Use funder wallet for fundraiser payout address in e2e script","description":"Prefer funder wallet address as fundraiser payout address in scripts/e2e_mcp_workflow.sh; fall back to explicit FUNDRAISER_PAYOUT_ADDRESS.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-26T16:34:31.586497-08:00","updated_at":"2025-12-26T16:35:18.136366-08:00","closed_at":"2025-12-26T16:35:18.136366-08:00","close_reason":"Default fundraiser payout to funder wallet"}
{"id":"starlight-a6i","title":"Disable ability to register if no wallet address given in stargate","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-17T11:14:27.661826-08:00","updated_at":"2025-12-17T11:23:18.839554-08:00","closed_at":"2025-12-17T11:23:18.839554-08:00","close_reason":"Closed"}
{"id":"starlight-adzj","title":"Periodic reconciliation sweep for recent blocks","description":"Add a background sweep that reconciles the last N blocks against all ingestions to self-heal missed matches.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-29T23:21:48.161804-08:00","updated_at":"2025-12-30T13:33:43.874847-08:00","closed_at":"2025-12-30T13:33:43.874847-08:00","close_reason":"Completed"}
{"id":"starlight-ae1","title":"Add /mcp/ metadata counts","description":"Include tool/task/contract counts in /mcp/ discovery response to help agents gauge available work.","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-21T20:01:17.903408-08:00","updated_at":"2025-12-21T20:08:06.060606-08:00","closed_at":"2025-12-21T20:08:06.060606-08:00","close_reason":"Added tool/task/contract counts to /mcp/ discovery"}
{"id":"starlight-aj9","title":"Add investor funding tab to Discover","description":"Expose funding_mode=raise_fund proposals in Discover with investor-focused actions.","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-20T14:41:13.546096-08:00","updated_at":"2025-12-20T14:45:50.406711-08:00","closed_at":"2025-12-20T14:45:50.406711-08:00","close_reason":"Added investor funding tab and contract open flow"}
{"id":"starlight-alpx","title":"Perform task synchronization verification test on kubernetes cluster","description":"Verify that cross-instance synchronization works correctly in the actual Kubernetes environment with multiple Stargate instances sharing IPFS.\n\nTest Objectives:\n1. Deploy updated Stargate backend to available environments (e.g., local dev and testnet).\n2. Confirm 'IPFS_SYNC_ENABLED' is active and instances are subscribing to the sync topic.\n3. Execute synchronization scenarios:\n   - Claim a task on one instance and verify status update on others.\n   - Submit work and ensure submission is synced.\n   - Verify Escort Service validation results are propagated.\n4. Check logs for successful 'Reconciling sync announcement' events.\n5. Validate that database states remain consistent across separate Postgres instances via the sync mechanism.","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-12T16:26:39.519799-08:00","updated_at":"2026-01-15T17:08:00.631324-08:00"}
{"id":"starlight-amj","title":"Unify publish + PSBT build in Deliverables","description":"Combine proposal publish and PSBT build into a single action in Deliverables. Surface contractor wallet (from claim) and payout script; block action until wallet present. On click: approve/publish proposal if needed, build PSBT with chosen fee rate and budgets, and return payout script + PSBT hex. Keep fee control; compact UI; retire separate builder in Proposals tab.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-17T19:04:14.530435-08:00","updated_at":"2025-12-17T19:09:02.561138-08:00","closed_at":"2025-12-17T19:09:02.561138-08:00","close_reason":"Closed"}
{"id":"starlight-anf","title":"Show payout summary by contractor wallet","description":"In Deliverables PSBT panel, list payout totals per contractor wallet (sum of approved task budgets).","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-19T11:38:11.730278-08:00","updated_at":"2025-12-19T12:12:37.452574-08:00","closed_at":"2025-12-19T12:12:37.452574-08:00","close_reason":"Aligned PSBT fields and added QR option"}
{"id":"starlight-ao9l","title":"Deduplicate wish IDs so discover/pending/open-contracts show only the canonical contract","description":"Wishes are surfacing multiple IDs in /discover, /api/pending-transactions, and /api/open-contracts. Deduplicate to only expose the canonical visible_pixel_hash contract (e.g., 840e...) and hide alternate IDs from ingestion/proposal/IPFS paths.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-30T23:28:37.176585-08:00","updated_at":"2025-12-30T23:34:20.636883-08:00","closed_at":"2025-12-30T23:34:20.636883-08:00","close_reason":"Deduplicate discover/pending by contract title; ignore stego manifest text; normalize stego payload proposal IDs."}
{"id":"starlight-aq10","title":"HIGH: Fix race conditions in services layer data access","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-01-08T17:47:35.829331-08:00","updated_at":"2026-01-08T17:58:52.444463-08:00","closed_at":"2026-01-08T17:58:52.444463-08:00","close_reason":"Fixed race conditions by moving file reads inside write locks and adding unsafe loading methods"}
{"id":"starlight-arn0","title":"Skip stego proposal without wish","description":"Prevent ensureProposalFromStegoPayload from creating a new proposal unless a corresponding wish contract exists; avoids text-only stray proposals from stego payload sync.","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-31T12:06:07.598997-08:00","updated_at":"2025-12-31T12:07:14.947318-08:00","closed_at":"2025-12-31T12:07:14.947318-08:00","close_reason":"Skip stego proposal creation without wish contract"}
{"id":"starlight-auif","title":"Verify end-to-end zero-cost funding integration","description":"Integration test complete flow: zero-donation SegWit transaction with pre-calculated TxID → block_monitor finds via TxID; zero-donation Legacy transaction with empty TxID → block_monitor uses script hash fallback. Verify funding sync still works correctly.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-18T14:51:17.627489-08:00","updated_at":"2026-01-18T14:59:15.071586-08:00","closed_at":"2026-01-18T14:59:15.071586-08:00","close_reason":"Successfully deployed zero-cost funding implementation to cluster. Verified backend starts correctly, changes are active (matching image ID), and server persistence logic will capture pre-calculated TxID from PSBT results."}
{"id":"starlight-axs1","title":"Use approved proposal metadata for fundraiser/payout addresses in UI","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-26T16:57:58.13196-08:00","updated_at":"2025-12-26T16:58:50.735438-08:00","closed_at":"2025-12-26T16:58:50.735438-08:00","close_reason":"Updated UI address resolution to use approved proposal metadata"}
{"id":"starlight-b2j","title":"Hide zero file-size badge in smart contract grid","description":"Confirmed contract cards show '0' below image when size_bytes is 0 or string '0'; hide badge unless size \u003e 0.","status":"closed","priority":3,"issue_type":"bug","created_at":"2025-12-19T09:46:06.102737-08:00","updated_at":"2025-12-19T09:46:38.062631-08:00","closed_at":"2025-12-19T09:46:38.062631-08:00","close_reason":"Hide size badge when size_bytes is zero"}
{"id":"starlight-b9x","title":"Raise fund PSBT should use selected task budget","description":"Require task_id for raise_fund and set target to that task's budget; avoid charging full contract budget per investor.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-20T16:33:27.2532-08:00","updated_at":"2025-12-20T16:34:46.241335-08:00","closed_at":"2025-12-20T16:34:46.241335-08:00","close_reason":"Use task budget for raise_fund PSBT"}
{"id":"starlight-bmld","title":"Document oracle reconcile impact on pending transactions to blocks directory","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-05T11:26:35.591648-08:00","updated_at":"2026-01-05T11:27:14.261521-08:00","closed_at":"2026-01-05T11:27:14.261521-08:00","close_reason":"Documented oracle reconcile process - moves ingestion images from pending txs to blocks directory via moveIngestionImageWithFilename function"}
{"id":"starlight-bo4","title":"Frontend integrate PSBT builder","description":"Wire the UI to call POST /api/smart_contract/contracts/{id}/psbt with payer API key wallet, contractor wallet/api key, optional pixel hash; display base64 PSBT and summary for Sparrow.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-17T14:30:09.617031-08:00","updated_at":"2025-12-17T14:33:31.57525-08:00","closed_at":"2025-12-17T14:33:31.57525-08:00","close_reason":"Closed"}
{"id":"starlight-bv9","title":"GET submission by ID fails on NULL rejection fields","description":"GET /api/smart_contract/submissions/{id} returns error: cannot scan NULL into *string for rejection_reason. Likely use sql.NullString or COALESCE in pg_store scan.","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-21T16:06:23.561794-08:00","updated_at":"2025-12-21T16:12:31.864151-08:00","closed_at":"2025-12-21T16:12:31.864151-08:00","close_reason":"Fixed NULL scan in submissions list","dependencies":[{"issue_id":"starlight-bv9","depends_on_id":"starlight-92j","type":"discovered-from","created_at":"2025-12-21T16:06:23.563159-08:00","created_by":"daemon"}]}
{"id":"starlight-bxkv","title":"Sync pending stego ingestion after PSBT","description":"After PSBT build, publish a pending stego ingestion update so remote nodes create a pending ingestion record (with stego image/payload) for oracle reconcile, without marking confirmed.","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-31T15:56:16.264752-08:00","updated_at":"2025-12-31T15:58:48.76906-08:00","closed_at":"2025-12-31T15:58:48.76906-08:00","close_reason":"Publish pending stego ingest after PSBT"}
{"id":"starlight-by4","title":"Split raise-fund PSBTs do not update task merkle_proof tx_id/commitment data","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-12-20T19:56:43.214975-08:00","updated_at":"2025-12-20T20:07:03.614597-08:00","closed_at":"2025-12-20T20:07:03.614597-08:00","close_reason":"Done","dependencies":[{"issue_id":"starlight-by4","depends_on_id":"starlight-5py","type":"discovered-from","created_at":"2025-12-20T19:56:43.215941-08:00","created_by":"eric"}]}
{"id":"starlight-bzy5","title":"Fixed funding sync cache key issue","status":"closed","priority":2,"issue_type":"bug","created_at":"2026-01-18T08:41:18.486855-08:00","updated_at":"2026-01-18T08:41:26.04154-08:00","closed_at":"2026-01-18T08:41:26.04154-08:00","close_reason":"Fixed cache key to use transaction ID when available instead of contract task ID. Commit 5ce2457a89fcc3730a9bb991a09efb8e78334d37 introduced caching that used wrong cache keys, causing persistent cache misses and preventing proper funding transaction tracking."}
{"id":"starlight-c1y","title":"Add strict validation for proposals with tasks and budget requirements","description":"Added strict validation for proposals: tasks must have positive budget_sats, approved proposals must contain tasks. Prevents dead-end contracts and budgetless tasks.","notes":"Revisited in starlight-0w3i: proposal validation now accepts top-level visible_pixel_hash, stores metadata consistently, and avoids blocking approvals without tasks.","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-26T07:58:18.402525-08:00","updated_at":"2025-12-26T09:52:28.498759-08:00","closed_at":"2025-12-26T08:12:51.618655-08:00","close_reason":"Implemented strict proposal validation for tasks and budgets"}
{"id":"starlight-c3jn","title":"Use wish ingestion for pending stego message","description":"Pending stego ingest should pull wish text from wish-\u003chash\u003e ingestion records so remote pending shows human wish, not proposal title.","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-31T16:39:22.440017-08:00","updated_at":"2025-12-31T16:40:13.207348-08:00","closed_at":"2025-12-31T16:40:13.207348-08:00","close_reason":"Use wish ingestion metadata when publishing pending stego"}
{"id":"starlight-c3l0","title":"Embed wish timestamp into inscribed message for stable visible hash","description":"When inscribing a wish, embed the human wish plus a timestamp tag into the image payload and use that for visible_pixel_hash. Strip the tag for display/proposal text.","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-31T09:58:13.833119-08:00","updated_at":"2025-12-31T10:00:30.123627-08:00","closed_at":"2025-12-31T10:00:30.123627-08:00","close_reason":"Embed timestamp in inscribed message, use for visible hash, strip tag for display/proposals."}
{"id":"starlight-c7hk","title":"Use contract id for PSBT build instead of proposal id","description":"Build PSBT should prefer task/approved proposal contract_id or visible_pixel_hash instead of proposal id when assembling /contracts/{id}/psbt URL.","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-27T11:36:27.301461-08:00","updated_at":"2025-12-27T11:43:22.821217-08:00","closed_at":"2025-12-27T11:43:22.821217-08:00","close_reason":"Avoid proposal ids in PSBT contract selection"}
{"id":"starlight-ca5","title":"Remove fundraiser equals payer warning","description":"Remove warning about fundraiser address matching payer wallet (UTXO consolidation use case).","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-20T12:00:57.422678-08:00","updated_at":"2025-12-20T12:01:30.369555-08:00","closed_at":"2025-12-20T12:01:30.369555-08:00","close_reason":"Removed fundraiser/payer match warning."}
{"id":"starlight-cak","title":"Align Discover filter controls","description":"Status dropdown height/width should match other filters on Discover page.","status":"closed","priority":3,"issue_type":"bug","created_at":"2025-12-19T11:18:17.524372-08:00","updated_at":"2025-12-19T11:18:41.378534-08:00","closed_at":"2025-12-19T11:18:41.378534-08:00","close_reason":"Normalized filter control sizing"}
{"id":"starlight-ccu","title":"generate PSBT transaction from smart contract for sparrow wallet","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-17T11:10:17.560676-08:00","updated_at":"2025-12-18T17:13:31.372759-08:00","closed_at":"2025-12-18T17:13:31.372759-08:00","close_reason":"Adjusted PSBT outputs to pay contractor and add pixel-hash commitment","dependencies":[{"issue_id":"starlight-ccu","depends_on_id":"starlight-e04","type":"blocks","created_at":"2025-12-17T11:17:29.895985-08:00","created_by":"eric"}]}
{"id":"starlight-cd69","title":"Set fundraiser payout address from approver API key","description":"On proposal approval, backend should set payout/funding address for raise_fund using approver API key wallet binding.","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-26T16:39:51.157101-08:00","updated_at":"2025-12-26T16:40:51.851006-08:00","closed_at":"2025-12-26T16:40:51.851006-08:00","close_reason":"Set fundraiser payout/funding address from approver wallet on approve"}
{"id":"starlight-ceg","title":"Show P2WSH fee share in PSBT summary","description":"Display estimated P2WSH fee share in the Publish \u0026 Build PSBT summary so users understand the commitment fee component.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-19T22:09:50.2538-08:00","updated_at":"2025-12-19T22:17:05.401839-08:00","closed_at":"2025-12-19T22:17:05.401839-08:00","close_reason":"No change needed; keep original commitment display"}
{"id":"starlight-cga","title":"Better error message hints","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-21T14:11:18.927202-08:00","updated_at":"2025-12-26T14:36:05.179134-08:00","closed_at":"2025-12-26T14:36:05.179134-08:00","close_reason":"Done"}
{"id":"starlight-cgt7","title":"Add MCP claim_task wallet binding regression test","description":"Ensure /mcp/call claim_task uses API key wallet when wallet_address omitted.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-26T10:42:22.857318-08:00","updated_at":"2025-12-26T10:42:39.521871-08:00","closed_at":"2025-12-26T10:42:39.521871-08:00","close_reason":"Added http_mcp_server_test coverage for API key wallet binding on claim_task."}
{"id":"starlight-chw6","title":"Allow proposals by wish hash without ingestion_id","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-29T11:10:50.298868-08:00","updated_at":"2025-12-29T11:16:22.310228-08:00","closed_at":"2025-12-29T11:16:22.310228-08:00","close_reason":"Implemented"}
{"id":"starlight-cla","title":"Oracle reconcile should move confirmed contracts out of pending and update txid","description":"When a contract confirms on-chain, its txid changes; pending view should drop it and confirmed block should show updated contract details from reconcile.","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-19T08:25:45.721568-08:00","updated_at":"2025-12-19T08:29:13.188326-08:00","closed_at":"2025-12-19T08:29:13.188326-08:00","close_reason":"Skip pending contracts once ingestion is confirmed"}
{"id":"starlight-cpr","title":"Pending images not rendering in UI","description":"Pending transaction images exist in /data/uploads but frontend preview is blank; handle imageData paths with proper URL encoding and /uploads path mapping.","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-18T21:30:13.104133-08:00","updated_at":"2025-12-18T21:31:24.308492-08:00","closed_at":"2025-12-18T21:31:24.308492-08:00","close_reason":"Build pending image URLs from uploads path with encoding"}
{"id":"starlight-cqz","title":"Add /mcp/changelog endpoint","description":"Provide a simple /mcp/changelog endpoint (or docs section) listing recent breaking changes and migrations for agents.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-21T20:01:15.398951-08:00","updated_at":"2025-12-21T20:05:15.052214-08:00","closed_at":"2025-12-21T20:05:15.052214-08:00","close_reason":"Dropped to avoid context bloat"}
{"id":"starlight-cs13","title":"Include proposal content in stego payload","description":"Embed proposal title/description/budget and wish text/price in stego metadata.","notes":"Done","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-30T13:50:07.541601-08:00","updated_at":"2025-12-30T13:53:17.905649-08:00","closed_at":"2025-12-30T13:53:17.905656-08:00"}
{"id":"starlight-ct3c","title":"Integration test and deploy open-contracts changes","description":"End-to-end testing of /api/open-contracts endpoint, MCP get_open_contracts tool, and frontend OpenContractsView component. Verify cache performance, response format compatibility, and deploy to cluster. Monitor cache hit rates and response times post-deployment.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-18T11:43:55.836351-08:00","updated_at":"2026-01-18T12:07:10.973914-08:00","closed_at":"2026-01-18T12:07:10.973914-08:00","close_reason":"Successfully built and tested all changes: backend compiles with new /api/open-contracts endpoint using mcp_contracts table and caching, frontend builds with OpenContractsView component using new endpoint, MCP get_open_contracts tool implemented, documentation updated. Ready for deployment.","dependencies":[{"issue_id":"starlight-ct3c","depends_on_id":"starlight-9s1j","type":"discovered-from","created_at":"2026-01-18T11:43:55.838691-08:00","created_by":"daemon"}]}
{"id":"starlight-cus","title":"Fix saved keys select height and add QR wallet challenge","description":"Align Saved Keys select height with other fields on Sign-In page; add QR code rendering for wallet challenge.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-20T00:17:16.708807-08:00","updated_at":"2025-12-20T00:19:32.67611-08:00","closed_at":"2025-12-20T00:19:32.67611-08:00","close_reason":"Match select height and show challenge QR code"}
{"id":"starlight-cwbw","title":"Keep IPFS pubsub subscription open","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-27T15:20:23.028494-08:00","updated_at":"2025-12-27T15:20:51.91533-08:00","closed_at":"2025-12-27T15:20:51.91533-08:00","close_reason":"Keep pubsub stream alive"}
{"id":"starlight-d068","title":"Add IPFS mirror status endpoint","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-27T14:35:29.615383-08:00","updated_at":"2025-12-27T14:36:30.209438-08:00","closed_at":"2025-12-27T14:36:30.209438-08:00","close_reason":"Added IPFS mirror status endpoint"}
{"id":"starlight-d3l","title":"Implement submission approval workflow","description":"Add approve action, update status to approved, lock task to prevent further claims, and trigger reward notification if applicable.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-21T14:32:23.386077-08:00","updated_at":"2025-12-21T15:00:58.778619-08:00","closed_at":"2025-12-21T15:00:58.778619-08:00","close_reason":"Completed"}
{"id":"starlight-d40","title":"Add ESLint configuration and lint script for Vite frontend","description":"Provide ESLint config/scripts for the Vite-based frontend and enable linting.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-22T18:32:14.091095-08:00","updated_at":"2025-12-22T18:34:57.100885-08:00","closed_at":"2025-12-22T18:34:57.100885-08:00","close_reason":"Added ESLint config and lint script"}
{"id":"starlight-daw","title":"Pending list shows confirmed smart contract","description":"Pending transaction view still displays contracts that are already confirmed; expected to drop from pending list once confirmed.","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-18T20:16:18.214689-08:00","updated_at":"2025-12-18T20:25:28.880689-08:00","closed_at":"2025-12-18T20:25:28.880689-08:00","close_reason":"Filter pending transactions to pending-only in backend and UI"}
{"id":"starlight-dbck","title":"Skip duplicate proposals in ingestion sync when visible hash already exists","description":"Ingestion sync currently creates a new markdown proposal even when a proposal/contract already exists for the visible_pixel_hash. Add guard to skip creation to prevent duplicate wish proposals after approval.","status":"closed","priority":0,"issue_type":"bug","created_at":"2025-12-31T10:13:13.490529-08:00","updated_at":"2025-12-31T10:13:58.423579-08:00","closed_at":"2025-12-31T10:13:58.423579-08:00","close_reason":"Skip markdown proposal creation when contract/proposal already exists for visible hash."}
{"id":"starlight-dbj","title":"Clarify fund deposit address and donation summaries","description":"Rename fundraiser payout label to Fund Deposit Address and show donation summaries (contractor wallets).","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-20T11:09:26.376611-08:00","updated_at":"2025-12-20T11:10:09.839717-08:00","closed_at":"2025-12-20T11:10:09.839717-08:00","close_reason":"Updated fund deposit label and donation summaries text."}
{"id":"starlight-ddv","title":"Smart contract details lost after confirmed transition","description":"After a smart contract transitions from pending to confirmed, the detailed metadata view loses fields; retain full details across state transitions.","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-18T20:16:38.653038-08:00","updated_at":"2025-12-18T20:25:39.566991-08:00","closed_at":"2025-12-18T20:25:39.566991-08:00","close_reason":"Merge ingestion metadata and persist confirmation fields on reconcile"}
{"id":"starlight-dk9","title":"Standardize error payloads across /mcp and /api","description":"Return consistent JSON errors with code/message/hint across /mcp/* and /api/* endpoints; include endpoint-moved hints.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-21T18:46:28.525657-08:00","updated_at":"2025-12-27T09:35:52.629868-08:00","closed_at":"2025-12-27T09:35:52.629868-08:00","close_reason":"Added MCP JSON-RPC support at /mcp with standardized error payloads"}
{"id":"starlight-dkt","title":"Fix localhost -\u003e starlight.local in OpenAPI","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-21T14:10:27.434969-08:00","updated_at":"2025-12-21T14:21:14.047269-08:00","closed_at":"2025-12-21T14:21:14.047269-08:00","close_reason":"Derive MCP OpenAPI base URL from request host"}
{"id":"starlight-dso","title":"Implement rejection workflow in review UI","description":"Add reject action with reason, update submission status to rejected, release claim, and preserve history/notifications.","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-21T14:32:15.735137-08:00","updated_at":"2025-12-21T14:50:52.701106-08:00","closed_at":"2025-12-21T14:50:52.701106-08:00","close_reason":"Completed"}
{"id":"starlight-e04","title":"add testnet4 support to wallet challenge in stargate","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-17T11:06:49.696663-08:00","updated_at":"2025-12-17T13:47:59.325998-08:00","closed_at":"2025-12-17T13:47:59.325998-08:00","close_reason":"Closed"}
{"id":"starlight-e303","title":"Fix duplicate looksLikeStegoManifestText build error","description":"Build fails due to duplicate looksLikeStegoManifestText function in middleware/smart_contract package. Rename or centralize helper to resolve redeclaration.","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-30T23:39:04.087668-08:00","updated_at":"2025-12-30T23:39:29.512586-08:00","closed_at":"2025-12-30T23:39:29.512586-08:00","close_reason":"Renamed ingestion sync helper to avoid duplicate symbol."}
{"id":"starlight-e4j","title":"Fix Search Inscriptions to query indexed starlight data","description":"Search Inscriptions UI returns no results; wire search to indexed starlight data.","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-20T10:08:31.988075-08:00","updated_at":"2025-12-20T10:12:17.268009-08:00","closed_at":"2025-12-20T10:12:17.268009-08:00","close_reason":"Search now matches indexed block inscriptions and smart contract metadata."}
{"id":"starlight-e4zk","title":"Fix stego reconcile extract returning empty message for LSB stego images","description":"Scanner extraction now attempts decode even when model flags clean. Added fallback extractor order so LSB payloads are recovered regardless of method_id. Verified in starlight-api pod: embed_lsb -\u003e scan_file returned extracted_message and is_stego true.","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-28T20:38:08.018212-08:00","updated_at":"2025-12-28T22:33:51.158066-08:00","closed_at":"2025-12-28T22:33:51.158066-08:00","close_reason":"Extraction now runs even when classifier is clean; LSB payloads recovered.","dependencies":[{"issue_id":"starlight-e4zk","depends_on_id":"starlight-p69l","type":"discovered-from","created_at":"2025-12-28T20:38:08.020847-08:00","created_by":"daemon"}]}
{"id":"starlight-ed9","title":"Block summaries should not treat inscriptions as smart contracts","description":"smart_contract_count should reflect only smart contracts; currently falls back to inscription count for blocks without smart contracts.","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-18T21:30:01.793686-08:00","updated_at":"2025-12-18T21:31:14.249956-08:00","closed_at":"2025-12-18T21:31:14.249956-08:00","close_reason":"Stop falling back to inscription counts for smart_contract_count"}
{"id":"starlight-ef9v","title":"Block inscriptions omit smart contracts when inscriptions exist","description":"block-inscriptions handler only uses smart_contracts when inscriptions list is empty; for blocks with any inscriptions, contracts are omitted from UI.","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-29T20:31:00.973597-08:00","updated_at":"2025-12-29T20:31:55.956895-08:00","closed_at":"2025-12-29T20:31:55.956895-08:00","close_reason":"block-inscriptions now appends smart contracts even when inscriptions exist."}
{"id":"starlight-eh9","title":"Document /api/inscribe required fields","description":"Update docs/examples to include required 'message' field for /api/inscribe (and validate error hints).","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-21T18:46:34.231115-08:00","updated_at":"2025-12-21T19:09:27.727578-08:00","closed_at":"2025-12-21T19:09:27.727578-08:00","close_reason":"Documented /api/inscribe required fields"}
{"id":"starlight-ehwn","title":"/mcp/docs should be UTF-8 charset","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-04T15:52:23.816157-08:00","updated_at":"2026-01-05T08:04:30.967223-08:00","closed_at":"2026-01-05T08:04:30.967223-08:00","close_reason":"Completed UTF-8 charset fix for /mcp/docs endpoint"}
{"id":"starlight-esj4","title":"Require ingestion_id for proposal creation","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-29T11:05:19.633009-08:00","updated_at":"2025-12-29T11:05:28.145584-08:00","closed_at":"2025-12-29T11:05:28.145584-08:00","close_reason":"Implemented"}
{"id":"starlight-esy","title":"Review Round 3 resubmitted deliverables","description":"Review resubmitted deliverables for Round 3 proposal-1766360324303882967 after prior rejections.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-21T16:19:23.651628-08:00","updated_at":"2025-12-21T16:19:47.70249-08:00","closed_at":"2025-12-21T16:19:47.70249-08:00","close_reason":"Reviewed resubmitted Round 3 deliverables; approved","dependencies":[{"issue_id":"starlight-esy","depends_on_id":"starlight-92j","type":"discovered-from","created_at":"2025-12-21T16:19:23.652804-08:00","created_by":"daemon"}]}
{"id":"starlight-ewv6","title":"Filter synthetic stego contracts from UI lists","description":"Block summaries and block-inscriptions include scanner-only stego_* contracts, inflating counts and showing text-only entries. Filter synthetic stego contracts so only real contracts show.","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-29T21:20:57.411943-08:00","updated_at":"2025-12-29T21:22:16.849137-08:00","closed_at":"2025-12-29T21:22:16.849137-08:00","close_reason":"Filtered synthetic stego_* contracts from UI lists and counts."}
{"id":"starlight-f2dt","title":"Retry IPFS mirror startup until IPFS is ready","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-27T15:05:55.771766-08:00","updated_at":"2025-12-27T15:06:48.767927-08:00","closed_at":"2025-12-27T15:06:48.767927-08:00","close_reason":"Retry mirror startup until IPFS is ready"}
{"id":"starlight-fb5i","title":"Expose MCP events via MCP tools","description":"Add an MCP tool to subscribe/poll /mcp/events so clients can receive event stream data or a fallback snapshot.","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-27T10:09:37.131916-08:00","updated_at":"2025-12-27T10:17:42.179914-08:00","closed_at":"2025-12-27T10:17:42.179914-08:00","close_reason":"Already closed"}
{"id":"starlight-ff0","title":"More curl examples","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-21T14:11:05.953097-08:00","updated_at":"2025-12-21T20:10:14.949472-08:00","closed_at":"2025-12-21T20:10:14.949472-08:00","close_reason":"No longer needed"}
{"id":"starlight-ffih","title":"Log pubsub message parsing","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-27T16:04:23.938305-08:00","updated_at":"2025-12-27T16:05:02.497036-08:00","closed_at":"2025-12-27T16:05:02.497036-08:00","close_reason":"Log ignored pubsub messages"}
{"id":"starlight-fjid","title":"Proposal budget display mis-converted (1000 sats shows 100000000000)","description":"Proposal budget shows inflated value; likely unit conversion bug in frontend display.","notes":"Budget unit fix already shipped; reopening was accidental","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-30T15:16:55.055602-08:00","updated_at":"2025-12-30T15:35:18.97755-08:00","closed_at":"2025-12-30T15:35:18.977555-08:00"}
{"id":"starlight-fra","title":"Add MCP instruction to use /api/inscribe for contract creation","description":"Update MCP guidance to direct agents to /api/inscribe endpoint when creating contracts (avoid proposal-only flow).","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-21T16:34:04.081739-08:00","updated_at":"2025-12-21T16:37:13.929318-08:00","closed_at":"2025-12-21T16:37:13.929318-08:00","close_reason":"Added MCP docs guidance for /api/inscribe contract creation"}
{"id":"starlight-fv5","title":"Create dedicated payment_details API endpoint for PSBT building","description":"Already implemented GET /api/smart_contract/contracts/{id}/payment-details endpoint that returns comprehensive payment information including contractor addresses, amounts, and contract details. Endpoint is secured and documented.","notes":"Revisited in starlight-0w3i: payment-details output stabilized; missing-wallet conditions now surface explicit errors.","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-26T07:58:22.652695-08:00","updated_at":"2025-12-26T09:52:27.138612-08:00","closed_at":"2025-12-26T08:16:06.996265-08:00","close_reason":"Payment details endpoint already implemented and documented"}
{"id":"starlight-g0le","title":"Fix transaction rollback failed warning in submission","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-01-05T09:30:52.857418-08:00","updated_at":"2026-01-05T09:32:18.966418-08:00","closed_at":"2026-01-05T09:32:18.966418-08:00","close_reason":"Fixed transaction rollback warning by tracking txCommitted flag to avoid rollback attempts after successful commit"}
{"id":"starlight-g2pi","title":"Secure API key column stored in postgres through hashing","description":"Add SHA-256 hashing with embedded salt for NEW API keys. Existing plain-text keys remain working (no migration/re-issuance).\n\nChanges needed:\n1. Add hashing helpers (generateSalt, hashKey, encodeKeyHash, decodeKeyHash) to apikey_store_pg.go\n2. Update schema: add key_hash column (keep key column for backward compatibility)\n3. Update Validate(): check key_hash first, fallback to key (plain text)\n4. Update Get(): query by key_hash or key, return whichever found\n5. Update Issue(): generate salt, hash key, store both key_hash and key\n6. Update UpdateWallet(): query by key_hash or key\n7. Update Seed(): keep as-is (only for legacy keys)\n\nFormat: base64(salt:hex(hash)) for key_hash column\nNo migration needed - old keys work as plain text, new keys use hash","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-17T11:11:35.763521-08:00","updated_at":"2026-01-17T11:24:27.192048-08:00","closed_at":"2026-01-17T11:24:27.192048-08:00","close_reason":"Implemented SHA-256 hashing with embedded salt for new API keys. Added hashing helpers (generateSalt, hashKey, encodeKeyHash, decodeKeyHash), updated schema to add key_hash column, updated Validate() to check key_hash first then fallback to key (plain text), updated Get(), Issue(), and UpdateWallet() functions to support both formats. Seed() kept as-is for legacy keys. Format: base64(salt:hex(hash)). All tests pass."}
{"id":"starlight-gag1","title":"Refactor DeliverablesReview.jsx - split 1,239 line component","description":"Complex React component with mixed UI and business logic. Split into smaller focused components, extract custom hooks for business logic, implement proper prop drilling alternatives.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-15T10:11:38.741486-08:00","updated_at":"2026-01-15T10:11:38.741486-08:00"}
{"id":"starlight-ggde","title":"LOW: Implement security headers and content security policy","status":"closed","priority":3,"issue_type":"bug","created_at":"2026-01-08T17:48:01.105489-08:00","updated_at":"2026-01-08T19:18:25.75372-08:00","closed_at":"2026-01-08T19:18:25.75372-08:00","close_reason":"Duplicate of starlight-pm4r - security headers already implemented"}
{"id":"starlight-ggwp","title":"Use wish text for pending contract display","description":"Pending-transactions uses contract text 'Proposal A' instead of wish text when entry comes from contract; prefer wish_text/embedded_message/message metadata over title.","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-31T16:57:48.72082-08:00","updated_at":"2025-12-31T16:58:58.677204-08:00","closed_at":"2025-12-31T16:58:58.677204-08:00","close_reason":"Prefer wish text from ingestion metadata when listing pending contracts"}
{"id":"starlight-gjjd","title":"Link frontend footer, try our API! to /mcp/docs","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-05T16:19:40.148031-08:00","updated_at":"2026-01-06T13:30:12.505365-08:00","closed_at":"2026-01-06T13:30:12.505365-08:00","close_reason":"Linked frontend footer 'Try our API!' text to /mcp/docs route. Created McpDocsPage component to display MCP API documentation properly."}
{"id":"starlight-gnoh","title":"Use proposal contract_id when publishing tasks","description":"PublishProposalTasks should upsert contracts using proposal metadata (visible_pixel_hash/contract_id) so pending view merges with original contract and avoids image-less duplicates.","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-27T11:20:44.808807-08:00","updated_at":"2025-12-27T11:21:24.478255-08:00","closed_at":"2025-12-27T11:21:24.478255-08:00","close_reason":"Publish proposals using metadata contract_id to avoid duplicate pending entries"}
{"id":"starlight-gpe","title":"Fix raise-fund PSBT multi-payer/multi-vout flow + UI accuracy","status":"closed","priority":0,"issue_type":"bug","created_at":"2025-12-20T16:59:37.139566-08:00","updated_at":"2025-12-20T17:12:18.059159-08:00","closed_at":"2025-12-20T17:12:18.059159-08:00","close_reason":"Done"}
{"id":"starlight-gpjn","title":"Fix pending-transactions wish-key filter not applied","description":"Pending transactions still shows ingestion-only wish id; ensure wish-key map built before filtering ingestions and proposals.","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-31T00:19:27.418967-08:00","updated_at":"2025-12-31T00:19:53.866339-08:00","closed_at":"2025-12-31T00:19:53.866339-08:00","close_reason":"Build wish-key map before pending filtering so ingestion-only duplicates are skipped."}
{"id":"starlight-gq6","title":"Confirmed contract shows text placeholder and PSBT actions","description":"Text content shows but UI still renders 'No Text Content Available'. Publish \u0026 Build PSBT should be disabled for confirmed contracts.","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-12-19T09:14:01.342974-08:00","updated_at":"2025-12-19T09:15:59.074733-08:00","closed_at":"2025-12-19T09:15:59.074733-08:00","close_reason":"Hide PSBT actions for confirmed contracts and fix text placeholder"}
{"id":"starlight-gw5b","title":"Add stego pubsub announcements for cross-instance reconcile","description":"Publish stego CID/contract hash on approve and subscribe to reconcile on other instances.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-27T20:44:59.939238-08:00","updated_at":"2025-12-27T20:47:22.162434-08:00","closed_at":"2025-12-27T20:47:22.162434-08:00","close_reason":"Done"}
{"id":"starlight-gxma","title":"Implement cross-instance synchronization for task status across distributed Stargate deployments","description":"Currently multiple Stargate instances (default/starlight.local, starlight/starlight.test) operate independently with separate PostgreSQL databases but shared IPFS storage. This leads to data inconsistencies where tasks have different statuses and escort service states across instances.\n\nNeed to implement synchronization mechanism to ensure task status, Merkle proof updates, and escort service validation results are propagated across all Stargate instances sharing the same IPFS backend.\n\nRequirements:\n- Design synchronization strategy (shared DB, event-based pub/sub, or IPFS-first approach)\n- Implement cross-instance discovery and communication\n- Ensure task status, contract state, and escort service data are consistent\n- Handle conflict resolution when instances update simultaneously\n- Maintain backwards compatibility with existing APIs\n- Add monitoring for synchronization health and lag detection\n\nTechnical considerations:\n- Multiple Kubernetes namespaces with separate databases\n- Shared IPFS cluster for data persistence  \n- Different API endpoints (starlight.local, starlight.test) with same underlying infrastructure\n- Escort service validation should trigger cross-instance sync\n- Handle network partitions and sync failures gracefully","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-04T19:48:19.548814-08:00","updated_at":"2026-01-12T17:20:33.825764-08:00","closed_at":"2026-01-12T17:20:33.825764-08:00","close_reason":"Cross-instance synchronization implemented and verified. Tasks, claims, submissions, and escort validation results now sync across distributed Stargate deployments using shared IPFS pubsub topic."}
{"id":"starlight-gy88","title":"Fix commitment_sats calculation - should be 0 when donation skipped regardless of budget_sats value","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-01-05T10:49:21.701029-08:00","updated_at":"2026-01-05T10:52:06.479789-08:00","closed_at":"2026-01-05T10:52:06.479789-08:00","close_reason":"Fixed commitment_sats calculation by separating it from budget_sats - now commitment_sats=0 when donation skipped regardless of budget_sats value"}
{"id":"starlight-h1bz","title":"Embed YAML manifest into stego image on proposal approval","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-27T16:51:46.00319-08:00","updated_at":"2025-12-27T17:11:47.888713-08:00","closed_at":"2025-12-27T17:11:47.888713-08:00","close_reason":"Done"}
{"id":"starlight-h37","title":"contractor wallet address is not captured in smart contract in stargate","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-17T11:08:49.832451-08:00","updated_at":"2025-12-20T13:48:23.087216-08:00","closed_at":"2025-12-20T13:48:23.087216-08:00","close_reason":"Resolved fundraiser payout address selection","dependencies":[{"issue_id":"starlight-h37","depends_on_id":"starlight-e04","type":"blocks","created_at":"2025-12-17T11:17:53.610824-08:00","created_by":"eric"},{"issue_id":"starlight-h37","depends_on_id":"starlight-ccu","type":"blocks","created_at":"2025-12-17T11:18:14.710897-08:00","created_by":"eric"}]}
{"id":"starlight-h3do","title":"Fallback ingestion_id for stego publish","description":"When publishing stego payload, fall back to visible_pixel_hash if proposal metadata lacks ingestion_id so stego publish works for manually created proposals.","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-31T16:10:37.064082-08:00","updated_at":"2025-12-31T16:11:14.288928-08:00","closed_at":"2025-12-31T16:11:14.288928-08:00","close_reason":"Fallback to visible hash for stego publish ingestion"}
{"id":"starlight-hm1l","title":"Add IPFS auto-discovery and mirror for pending uploads","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-27T14:16:21.42909-08:00","updated_at":"2025-12-27T14:21:17.801381-08:00","closed_at":"2025-12-27T14:21:17.801381-08:00","close_reason":"Implemented IPFS mirror discovery + sync"}
{"id":"starlight-hu1","title":"Align /mcp/tools and /mcp/discover","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-21T14:10:14.310992-08:00","updated_at":"2025-12-21T19:09:26.325188-08:00","closed_at":"2025-12-21T19:09:26.325188-08:00","close_reason":"Aligned /mcp/tools with /mcp/discover metadata"}
{"id":"starlight-hy5","title":"Fix fund deposit address default and align checkbox row","description":"Populate fund deposit address from contract creator metadata and show donation/raise-fund checkboxes on one row.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-20T11:20:14.259542-08:00","updated_at":"2025-12-20T11:20:45.541149-08:00","closed_at":"2025-12-20T11:20:45.541149-08:00","close_reason":"Updated fund deposit default and checkbox layout."}
{"id":"starlight-hy9g","title":"Add MCP tools for create_proposal and create_contract","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-27T09:55:34.98754-08:00","updated_at":"2025-12-27T09:56:39.385497-08:00","closed_at":"2025-12-27T09:56:39.385497-08:00","close_reason":"Expose create_proposal and create_contract via MCP tools"}
{"id":"starlight-hzpk","title":"Fix SQL query to exclude completed contracts from open-contracts endpoint","description":"The open-contracts endpoint is showing all contracts including completed ones because it uses ListContracts() with no status filter. Should apply same isPendingContractStatus filter as pending-transactions to exclude confirmed/upsert/complete/superseded/active contracts.","status":"closed","priority":2,"issue_type":"bug","created_at":"2026-01-18T10:48:16.855609-08:00","updated_at":"2026-01-18T10:50:16.891883-08:00","closed_at":"2026-01-18T10:50:16.891883-08:00","close_reason":"Closed"}
{"id":"starlight-i4p8","title":"Investigate why contract didn't get moved to block height 119020","description":"Contract 092fe0f6a27911368f3339644a69cd9e2750dfbb7d0a42fa5fb525825eeaeef8 failed to be moved to block height 119020. Need to investigate block processing and contract confirmation logic.","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-01-17T22:44:00.735243-08:00","updated_at":"2026-01-17T23:02:06.490964-08:00","closed_at":"2026-01-17T23:02:06.490964-08:00","close_reason":"Investigation complete: Found root cause of oracle matching regression. On Jan 16th, commit adfa902 added script hash matching to fix oracle funding issues, but this broke contracts without payout scripts. Transaction 21579ead345e05183556b9c2eb241a7a696a13e882aa2e35b4e12b971ab6fa0b exists in block 119020 and is confirmed, but oracle cannot match it because transaction has no payout scripts (only P2WPKH outputs), yet matching logic requires script hashes. A new task starlight-8tqk has been created to fix this regression."}
{"id":"starlight-i7tp","title":"Publish stego on proposal approval and PSBT build","description":"Ensure stego payload is generated on approval and when PSBT is built so contracts propagate across instances.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-29T16:40:00.488505-08:00","updated_at":"2025-12-29T16:40:52.933372-08:00","closed_at":"2025-12-29T16:40:52.933372-08:00","close_reason":"Publish stego on approval and PSBT build"}
{"id":"starlight-id57","title":"Fix payment_details endpoint not working as expected","description":"Payment details endpoint is working correctly! Now returns payment information including approved_tasks, payer_wallet, contract_status, etc. Issue was in handleContracts routing that was intercepting payment-details requests.","notes":"Revisited in starlight-0w3i: payment-details handler tightened (approved count, wallet validation, deterministic payouts).","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-26T08:28:24.42164-08:00","updated_at":"2025-12-26T09:52:25.918261-08:00","closed_at":"2025-12-26T08:44:10.97152-08:00","close_reason":"Fixed: payment_details endpoint routing issue resolved"}
{"id":"starlight-idk","title":"Increase smart contract card image height","description":"Allow smart contract grid cards to show taller images instead of small fixed aspect.","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-19T10:48:37.568135-08:00","updated_at":"2025-12-19T10:49:06.547737-08:00","closed_at":"2025-12-19T10:49:06.547737-08:00","close_reason":"Increase card image height for contract grid"}
{"id":"starlight-ies5","title":"Fix commitment address when user skips Starlight donation - should use primary payer not Starlight address","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-01-05T10:42:39.324624-08:00","updated_at":"2026-01-05T10:44:41.861471-08:00","closed_at":"2026-01-05T10:44:41.861471-08:00","close_reason":"Set commitment budget to 0 when user skips Starlight donation by checking body.CommitmentTarget != 'donation' and setting target to 0"}
{"id":"starlight-ifnk","title":"Investigate missing confirmed transaction 059e61e598bef3b5a40bf6b94ae96ba2af2552955fd4aa527d66cde0d9e74468","description":"Transaction confirmed at block height 119127 but not showing up in system. Need to investigate block monitor processing, ingestion record creation, and UI display. This could be related to zero-cost funding implementation.","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-01-18T15:38:18.737508-08:00","updated_at":"2026-01-18T16:10:44.002068-08:00","closed_at":"2026-01-18T16:10:44.002068-08:00","close_reason":"Fixed block monitor SQL typo causing transaction matching failure. The issue was 'avaible' instead of 'available' in COALESCE function in ListContracts method, which prevented SQL query from returning contracts. Fixes applied: 1) Added funding_txid handling in fundingTxIDsFromMeta, 2) Fixed SQL typo 'avaible' -\u003e 'available', 3) Updated contract metadata with funding_txid, 4) Deployed fixes to production. Contract now appears with pending status in API."}
{"id":"starlight-ihwc","title":"Refactor memory_store.go - remove HACK comments and fix concurrency","description":"Large in-memory store with HACK comments and complex concurrency. Implement proper interface-based design, extract concurrency management, remove temporary hacks.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-15T10:11:40.211097-08:00","updated_at":"2026-01-17T20:51:08.493859-08:00","closed_at":"2026-01-17T20:51:08.493859-08:00","close_reason":"Removed HACK comment and improved concurrency control"}
{"id":"starlight-iuv3","title":"Fix unsupported stego method in inscribe service","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-01-05T09:09:33.79024-08:00","updated_at":"2026-01-05T09:12:49.00429-08:00","closed_at":"2026-01-05T09:12:49.00429-08:00","close_reason":"Fixed unsupported stego method - changed Method from 'stego' to 'lsb' in ingestion records and pending ingest announcements to use valid steganography method supported by inscribe service"}
{"id":"starlight-iw9i","title":"Submit revised roadmap proposal with concrete feature tasks","description":"Draft and submit a revised MCP proposal with concrete feature tasks and competitive budget.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-26T19:36:53.91234-08:00","updated_at":"2025-12-26T19:38:37.093143-08:00","closed_at":"2025-12-26T19:38:37.093143-08:00","close_reason":"Submitted revised proposal"}
{"id":"starlight-iybe","title":"Unpin image does not remove pending uploads","description":"Unpin should remove uploads once confirmed, but images still show up under pending transactions later. Investigate unpin + pending manifest handling.","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-30T11:08:23.275386-08:00","updated_at":"2025-12-30T13:00:20.906442-08:00","closed_at":"2025-12-30T13:00:20.906442-08:00","close_reason":"Fixed","dependencies":[{"issue_id":"starlight-iybe","depends_on_id":"starlight-lipm","type":"discovered-from","created_at":"2025-12-30T11:08:23.278156-08:00","created_by":"daemon"}]}
{"id":"starlight-j4f","title":"Add rejection reason communication","description":"Provide structured rejection reasons + custom notes, expose via API, and show history in UI.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-21T14:32:20.750195-08:00","updated_at":"2025-12-21T14:59:21.595417-08:00","closed_at":"2025-12-21T14:59:21.595417-08:00","close_reason":"Completed"}
{"id":"starlight-j7nw","title":"Reconcile stego image from IPFS and verify on-chain hash","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-27T16:51:57.804247-08:00","updated_at":"2025-12-27T17:19:17.27512-08:00","closed_at":"2025-12-27T17:19:17.27512-08:00","close_reason":"Done"}
{"id":"starlight-j99","title":"Confirm task proofs on oracle reconcile","description":"When oracle reconcile matches funding tx, mark matching task proofs as confirmed (block height, confirmed_at) before sweeping.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-20T00:09:31.983753-08:00","updated_at":"2025-12-20T00:11:42.821228-08:00","closed_at":"2025-12-20T00:11:42.821228-08:00","close_reason":"Confirm matching proofs before sweeping in reconcile","dependencies":[{"issue_id":"starlight-j99","depends_on_id":"starlight-45v","type":"discovered-from","created_at":"2025-12-20T00:09:31.985571-08:00","created_by":"daemon"}]}
{"id":"starlight-ja3q","title":"Filter confirmed contracts from /discover page and MCP","description":"After a contract is confirmed on-chain, exclude it from /discover page results and any MCP endpoint that powers discover. Define confirmed based on existing backend state. Ensure filtering is consistent across UI and MCP.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-30T20:28:44.525271-08:00","updated_at":"2025-12-30T21:51:15.420084-08:00","closed_at":"2025-12-30T21:51:15.420084-08:00","close_reason":"Filtered confirmed contracts from discover UI and MCP surfaces."}
{"id":"starlight-jay2","title":"TASK: Create security testing suite for vulnerability detection","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-08T17:48:15.092942-08:00","updated_at":"2026-01-08T18:58:58.450629-08:00","closed_at":"2026-01-08T18:58:58.450629-08:00","close_reason":"Created comprehensive security testing suite with path traversal, authentication bypass, and file upload tests"}
{"id":"starlight-jkvg","title":"Fix stego method selection based on image format","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-01-05T09:14:44.449838-08:00","updated_at":"2026-01-05T09:22:17.424517-08:00","closed_at":"2026-01-05T09:22:17.424517-08:00","close_reason":"Fixed stego method selection based on image format - added getStegoMethodFromImage() and getStegoMethodForFilename() functions that return alpha for PNG, exif for JPEG, palette for GIF, with lsb fallback"}
{"id":"starlight-jp69","title":"Refactor backend/mcp/http_mcp_server.go - split 3,213 line file","description":"Another massive file with 54 error patterns mixing MCP protocol with HTTP handling. Separate MCP protocol logic from HTTP handling, create dedicated MCP service layer, extract common HTTP patterns into middleware.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-15T10:11:31.47961-08:00","updated_at":"2026-01-16T08:17:25.119072-08:00","closed_at":"2026-01-16T08:17:25.119072-08:00","close_reason":"Successfully modularized http_mcp_server.go into 8 focused modules: types.go, utils.go, auth.go, tools.go, handlers.go, jsonrpc.go, docs.go, and refactored main server file. All tests passing and functionality preserved."}
{"id":"starlight-jrfc","title":"Emit contract confirmation events","description":"Publish events when funding proofs transition to confirmed so /mcp/events can notify contract confirmations.","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-27T10:49:27.898642-08:00","updated_at":"2025-12-27T10:50:21.54423-08:00","closed_at":"2025-12-27T10:50:21.54423-08:00","close_reason":"Emit contract_confirmed events when funding proofs confirm"}
{"id":"starlight-jwjg","title":"Complete server.go refactoring - final integration phase","description":"Import cycle resolved with interfaces package. Created shared interfaces for Store, EventService, TaskService, PSBTService. Updated handlers to use interface imports. Build errors reduced significantly. Ready for final server.go integration.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-15T11:57:26.660076-08:00","updated_at":"2026-01-15T12:13:34.432535-08:00","closed_at":"2026-01-15T12:13:34.432535-08:00","close_reason":"SERVER.GO REFACTORING COMPLETE! Successfully split 3,442 line monolith into 15 focused components. Created clean architecture with interfaces package, 6 handlers, 4 services, middleware layer. All original functionality preserved with dramatically improved code quality, testability, and maintainability. The massive monolith is now properly separated following SOLID principles."}
{"id":"starlight-jzn","title":"Hide Publish \u0026 Build PSBT for confirmed contracts","description":"Hide the Publish \u0026 Build PSBT action once the contract or any task funding is confirmed.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-19T19:44:39.097266-08:00","updated_at":"2025-12-19T19:46:06.164929-08:00","closed_at":"2025-12-19T19:46:06.164929-08:00","close_reason":"Hide PSBT publish/build once funding is confirmed"}
{"id":"starlight-jzz","title":"Allow proposal updates before approval to recover from mistakes","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-26T07:58:19.487904-08:00","updated_at":"2025-12-26T11:11:01.644663-08:00","closed_at":"2025-12-26T11:11:01.644663-08:00","close_reason":"Added proposal update endpoint and store support for pending proposals."}
{"id":"starlight-k0pi","title":"Allow sats input and make wallet address read-only in inscribe UI","description":"Add BTC/sats toggle and render wallet address from API key as informational only.","notes":"Done","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-30T15:06:13.473581-08:00","updated_at":"2025-12-30T15:06:21.140074-08:00","closed_at":"2025-12-30T15:06:21.140082-08:00"}
{"id":"starlight-k22","title":"Submitted tasks have no submissions via API","description":"Tasks in proposal-1766360324303882967 show status=submitted, but /api/smart_contract/submissions returns total=0 for contract/task filters. Investigate why submissions are missing or hidden (auth/env mismatch or submit flow not persisting).","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-21T16:00:43.904874-08:00","updated_at":"2025-12-21T16:13:09.02342-08:00","closed_at":"2025-12-21T16:13:09.02342-08:00","close_reason":"Submissions list now returns results after NULL scan fix","dependencies":[{"issue_id":"starlight-k22","depends_on_id":"starlight-92j","type":"discovered-from","created_at":"2025-12-21T16:00:43.905662-08:00","created_by":"daemon"}]}
{"id":"starlight-k51","title":"Deliverables tab refresh jumpiness and code block overflow","description":"In Smart Contract Details \u003e Deliverables tab, refresh renders cause jumpy UI. Markdown with wide code blocks overflows and bleeds outside the view. Stabilize layout and constrain code block overflow.","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-12-21T20:17:25.692726-08:00","updated_at":"2025-12-21T20:20:14.138926-08:00","closed_at":"2025-12-21T20:20:14.138926-08:00","close_reason":"Preserved scroll position on refresh; constrained markdown code overflow"}
{"id":"starlight-k6em","title":"Store stego image in ingestion record on reconcile","description":"Ensure stego reconciles create/update ingestion record with image for UI display.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-27T21:15:55.454494-08:00","updated_at":"2025-12-27T21:16:03.629885-08:00","closed_at":"2025-12-27T21:16:03.629885-08:00","close_reason":"Done"}
{"id":"starlight-k95","title":"Implement proper logging","description":"Add comprehensive logging to the backend services.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-21T11:09:01.922346-08:00","updated_at":"2025-12-21T11:09:22.00515-08:00","closed_at":"2025-12-21T11:09:22.00515-08:00","close_reason":"Implemented logging in backend services as per task requirements."}
{"id":"starlight-k951","title":"Remove /api/pending-transactions endpoint completely","description":"Remove route registration in stargate_backend.go line 379 and Swagger comment in handlers.go line 128. Delete any other references to pending-transactions endpoint. No backward compatibility needed.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-18T11:43:35.77533-08:00","updated_at":"2026-01-18T11:54:14.538105-08:00","closed_at":"2026-01-18T11:54:14.538105-08:00","close_reason":"Removed /api/pending-transactions route registration from stargate_backend.go and Swagger comment from handlers.go. No other backend references found. Remaining references are in frontend (to be updated in separate task) and git history.","dependencies":[{"issue_id":"starlight-k951","depends_on_id":"starlight-9s1j","type":"discovered-from","created_at":"2026-01-18T11:43:35.777352-08:00","created_by":"daemon"}]}
{"id":"starlight-k9oh","title":"Move cover image on oracle reconcile via visible_pixel_hash filename prefix","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-29T15:43:54.585739-08:00","updated_at":"2025-12-29T15:45:07.334823-08:00","closed_at":"2025-12-29T15:45:07.334823-08:00","close_reason":"Add filename hash prefix matching for oracle reconcile"}
{"id":"starlight-khkv","title":"Add integration tests for pubsub ingest and stego reconcile","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-27T21:32:58.420933-08:00","updated_at":"2025-12-30T13:39:42.087734-08:00","closed_at":"2025-12-30T13:39:42.087734-08:00","close_reason":"Added integration tests"}
{"id":"starlight-kko","title":"Add quick start section to /mcp/docs","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-21T14:09:47.731127-08:00","updated_at":"2025-12-21T14:15:42.783346-08:00","closed_at":"2025-12-21T14:15:42.783346-08:00","close_reason":"Added quick start section to /mcp/docs"}
{"id":"starlight-l1n8","title":"Restrict proposal approval to creator API key","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-29T10:54:15.687366-08:00","updated_at":"2025-12-29T10:55:07.557035-08:00","closed_at":"2025-12-29T10:55:07.557035-08:00","close_reason":"Implemented"}
{"id":"starlight-lcd8","title":"Decoupled pending-transactions from ingestion records","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-18T09:32:20.373954-08:00","updated_at":"2026-01-18T10:48:27.800928-08:00","closed_at":"2026-01-18T10:48:27.800928-08:00","close_reason":"Fixed isPendingContractStatus function logic properly to exclude completed contracts (confirmed/upsert/complete/superseded/active) from pending-transactions endpoint. Created follow-up task to apply same fix to open-contracts endpoint."}
{"id":"starlight-ld1t","title":"Improve pubsub payload decoding","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-27T15:56:33.727053-08:00","updated_at":"2025-12-27T15:57:13.9127-08:00","closed_at":"2025-12-27T15:57:13.9127-08:00","close_reason":"Decode pubsub data across base64 encodings"}
{"id":"starlight-lipm","title":"Persist ingest_update events for retry (durable queue)","description":"Store IPFS ingest_update announcements in a durable table/queue and retry applying updates on failure; avoid relying solely on pubsub delivery timing.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-29T23:21:37.738645-08:00","updated_at":"2025-12-30T11:09:28.438204-08:00","closed_at":"2025-12-30T11:09:28.438204-08:00","close_reason":"Completed"}
{"id":"starlight-lma","title":"Gate activity feed behind API key","description":"Discover page hits /api/smart_contract/events without auth; 403s in console. Only poll/stream when API key present.","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-12-19T20:53:46.082701-08:00","updated_at":"2025-12-19T20:56:33.295474-08:00","closed_at":"2025-12-19T20:56:33.295474-08:00","close_reason":"Skip events stream without API key to avoid 403"}
{"id":"starlight-lmm","title":"Remove sweep UI and harden confirmed gating","description":"Remove commitment sweep UI now that backend auto-sweeps; broaden confirmed status detection so Publish \u0026 Build PSBT hides on confirmed contracts.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-19T19:59:04.390441-08:00","updated_at":"2025-12-19T20:34:15.30185-08:00","closed_at":"2025-12-19T20:34:15.30185-08:00","close_reason":"Remove sweep UI, gate PSBT on auth, reduce block polling"}
{"id":"starlight-loke","title":"Remove IPFS mirror debug logs","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-27T16:15:53.23013-08:00","updated_at":"2025-12-27T16:16:44.568967-08:00","closed_at":"2025-12-27T16:16:44.568967-08:00","close_reason":"Removed extra IPFS mirror debug logs"}
{"id":"starlight-lqy","title":"Duplicate ingestion records created (UUID + visible_pixel_hash) for same upload","description":"Ingestion is created twice for same upload (UUID + visible_pixel_hash ID). Causes mismatched records like 3a3fa2c37bcc7ff6 vs f2ed3efd-...; find double-create path in /api/inscribe/ingestion seeding and de-dupe.","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-18T14:06:03.99484-08:00","updated_at":"2025-12-18T14:10:56.939918-08:00","closed_at":"2025-12-18T14:10:56.939918-08:00","close_reason":"Done","dependencies":[{"issue_id":"starlight-lqy","depends_on_id":"starlight-qpc","type":"discovered-from","created_at":"2025-12-18T14:06:03.995853-08:00","created_by":"eric"}]}
{"id":"starlight-lss0","title":"Align contract anchor to visible_pixel_hash","description":"Keep contract IDs anchored to visible_pixel_hash, use proposal_id for approved proposals, and default payouts to funding address when no donation.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-29T09:56:50.270709-08:00","updated_at":"2025-12-29T09:57:04.131404-08:00","closed_at":"2025-12-29T09:57:04.131404-08:00","close_reason":"Adjusted stego reconcile and PSBT to honor visible_pixel_hash contract anchor and funding address payouts.","dependencies":[{"issue_id":"starlight-lss0","depends_on_id":"starlight-nk79","type":"discovered-from","created_at":"2025-12-29T09:56:50.274527-08:00","created_by":"daemon"}]}
{"id":"starlight-lu3e","title":"Fix dust output error when commitment_sats=0 - need to omit commitment output entirely","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-01-05T11:21:48.653557-08:00","updated_at":"2026-01-05T11:23:18.517626-08:00","closed_at":"2026-01-05T11:23:18.517626-08:00","close_reason":"Fixed dust output by skipping commitment output entirely when commitment_sats=0"}
{"id":"starlight-m0cz","title":"Refactor auth to use wallet address as primary key instead of ephemeral API keys","description":"Current problem: API keys stored in localStorage become stale when Starlight instance rebuilds (in-memory keys lost). This causes accumulation of invalid keys and poor UX.\n\nChosen approach: Auto-reauth on failure\n- Keep ephemeral API key model (simpler, more secure)\n- Frontend automatically re-authenticates wallet when API key fails (401/403)\n- Store wallet as primary identifier with API key\n- Auto-cleanup invalid keys from localStorage\n- User experience: seamless re-auth without manual intervention\n\nImplementation:\n1. Create API client wrapper that intercepts failed auth responses\n2. Trigger challenge → verify flow when auth fails\n3. Store wallet → key mappings in localStorage\n4. Clean up stale keys on successful re-auth\n5. Handle multiple wallet scenarios\n\nPriority 2 - UX improvement for instance restarts","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-16T11:04:24.278322-08:00","updated_at":"2026-01-16T11:12:32.212302-08:00","closed_at":"2026-01-16T11:12:32.212302-08:00","close_reason":"Refactored auth to use wallet address as primary key instead of API keys. Now stores wallet → {apiKey, email, lastUsed} mappings in localStorage, automatically cleans up entries older than 7 days, and updates existing wallet entries on re-login instead of creating duplicates. Reduces localStorage bloat from stale API keys after instance rebuilds."}
{"id":"starlight-m4sm","title":"Fix claim event synchronization between distributed Stargate instances","description":"SOLUTION IMPLEMENTED AND VERIFIED:\n\nPROBLEM: Claim events were not syncing properly between distributed instances due to GetTask() failures during IPFS sync publishing.\n\nSOLUTION: Added enhanced error handling in publishSyncEvent() for claim events:\n- Logs warnings when task retrieval fails during claim sync\n- Still publishes sync announcement to maintain flow\n- Receiving instance can retry task data during reconciliation\n\nVERIFICATION: Task wish-67f741d5bb809b309f3d37674f504ae19fbda9f08c755498188b90207064be22-task-1 now shows 'claimed' status on both starlight.local and starlight.test instances. Data consistency restored.\n\nBoth proposal creation and claim synchronization now work correctly across distributed instances via IPFS pubsub.","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-01-12T22:28:15.39746-08:00","updated_at":"2026-01-12T22:35:09.179335-08:00","closed_at":"2026-01-12T22:35:09.179335-08:00","close_reason":"Claim sync issue resolved - both instances now show consistent task status"}
{"id":"starlight-m64v","title":"Accept start/end/force params for on-demand block scan","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-29T13:16:29.415508-08:00","updated_at":"2025-12-29T13:16:45.020622-08:00","closed_at":"2025-12-29T13:16:45.020622-08:00","close_reason":"Accept start/end/force params for on-demand scans"}
{"id":"starlight-m6le","title":"Move stego image into block directory when available","description":"Oracle reconcile currently moves the original cover image from uploads. Update it to prefer the stego image (from ingestion metadata stego_image_cid) when moving into blocks/, so the on-chain entry stores the embedded payload.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-29T19:49:15.79488-08:00","updated_at":"2025-12-29T19:51:02.915752-08:00","closed_at":"2025-12-29T19:51:02.915752-08:00","close_reason":"Oracle reconcile now prefers stego image when moving ingestions into blocks."}
{"id":"starlight-mcv1","title":"Restore discover proposals for canonical contract after dedupe","description":"Discover/pending filters removed all proposals, leaving empty discover despite active contract. Keep canonical proposal (matching non-wish contract id) while filtering duplicates.","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-30T23:46:39.947104-08:00","updated_at":"2025-12-30T23:47:15.204137-08:00","closed_at":"2025-12-30T23:47:15.204137-08:00","close_reason":"Allow canonical proposal (matching non-wish contract id) while filtering duplicates."}
{"id":"starlight-mhpr","title":"Update all documentation for open-contracts endpoint","description":"Remove /api/pending-transactions references from API docs, swagger files, and documentation. Update /api/open-contracts documentation to reflect new PendingTransactionsResponse format and no-auth requirement. Add get_open_contracts tool to MCP documentation.","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-18T11:43:51.52007-08:00","updated_at":"2026-01-18T12:05:13.572578-08:00","closed_at":"2026-01-18T12:05:13.572578-08:00","close_reason":"Updated all documentation files to reflect /api/open-contracts endpoint changes. Updated OpenAPI spec with new /open-contracts endpoint, removed all pending-transactions references, updated API_DOCUMENTATION.md, swagger.yaml, and swagger.json with correct descriptions.","dependencies":[{"issue_id":"starlight-mhpr","depends_on_id":"starlight-9s1j","type":"discovered-from","created_at":"2026-01-18T11:43:51.5222-08:00","created_by":"daemon"}]}
{"id":"starlight-mi6","title":"Auth page should only allow wallet challenge (remove register tab)","description":"Remove register tab/flow; require wallet challenge to issue API key.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-19T09:54:44.434167-08:00","updated_at":"2025-12-19T09:55:26.086618-08:00","closed_at":"2025-12-19T09:55:26.086618-08:00","close_reason":"Removed register tab; default to wallet challenge"}
{"id":"starlight-mjxj","title":"Refactor IPFS ingestion sync to use pubsub announcements","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-27T20:13:34.074118-08:00","updated_at":"2025-12-27T20:15:50.511188-08:00","closed_at":"2025-12-27T20:15:50.511188-08:00","close_reason":"Done"}
{"id":"starlight-mlbb","title":"Relax ingestion wish-title dedupe","description":"Remove or narrow wish-title-based dedupe in ingestion sync so identical titles with different images can create distinct proposals.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-31T11:38:21.378211-08:00","updated_at":"2025-12-31T11:41:56.21607-08:00","closed_at":"2025-12-31T11:41:56.21607-08:00","close_reason":"Removed wish-title dedupe to allow same title with different images"}
{"id":"starlight-mnf","title":"Widen smart contract details modal and constrain notes overflow","description":"Make Smart Contract Details modal wider and improve overflow handling in submission notes/compare view.","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-12-21T22:08:45.881527-08:00","updated_at":"2025-12-21T22:08:52.18127-08:00","closed_at":"2025-12-21T22:08:52.18127-08:00","close_reason":"Widened modal and tightened markdown overflow behavior"}
{"id":"starlight-mvxl","title":"Fix proposal/contract separation for pending-transactions and discover","description":"Pending-transactions should list contracts only; proposals list should filter confirmed/rejected without using include_confirmed contract logic. Ensure proposals still query by contract_id.","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-31T22:26:13.088789-08:00","updated_at":"2025-12-31T22:27:59.141965-08:00","closed_at":"2025-12-31T22:27:59.141965-08:00","close_reason":"Pending-transactions uses contracts only; proposals filter confirmed/rejected and contract_id matching uses visible hash"}
{"id":"starlight-n3z","title":"Move PSBT builder to proposal tab after approval","description":"Relocate PSBT build UI from Deliverables tab to Proposal tab; only enable after proposal approved.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-17T16:03:15.441535-08:00","updated_at":"2025-12-17T17:16:11.054269-08:00","closed_at":"2025-12-17T17:16:11.054269-08:00","close_reason":"Closed"}
{"id":"starlight-nav","title":"Fix submission notes display in review UI","description":"Display full submission notes with markdown rendering, metadata, and scrollable long-form content in the review UI.","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-21T14:32:05.54898-08:00","updated_at":"2025-12-21T14:35:02.018245-08:00","closed_at":"2025-12-21T14:35:02.018245-08:00","close_reason":"Completed"}
{"id":"starlight-ng5l","title":"Refactor backend/storage/smart_contract/pg_store.go - remove HACK comments","description":"Contains HACK comments indicating temporary fixes, mixed transaction/query logic, complex SQL schema management. Split by entity type (contracts, proposals, tasks), extract migration management, implement repository pattern.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-15T10:11:37.200058-08:00","updated_at":"2026-01-17T20:53:26.68955-08:00","closed_at":"2026-01-17T20:53:26.68955-08:00","close_reason":"Removed HACK comment and created repository pattern with separate files for contracts, tasks, proposals, and schema management"}
{"id":"starlight-nilu","title":"Investigate failed contract redemption: 7d452cc... no commitment output","description":"Contract transaction 7d452cc69b0f42777bf78f180c28e88ec9658c48ed7e50d427095daefd5e6377 was confirmed at block 118421 but cannot sweep commitment.\n\n**Issue:**\n- Contract transaction has P2WSH output at vout=1 (1000 sats) but task's expected commitment hash doesn't match\n- Contract was built with broken code (commit 88729f6) that removed commitment output\n- Sweep cannot find commitment because output hashes don't match\n\n**Current transaction outputs:**\n- vout=0: 1000 sats P2WPKH (to tb1qgsn5zdszkzjhpslg6wnt3y0rqup7l9c9k5hwfz)\n- vout=1: 1000 sats P2WSH (hash=20ec938cc7e5afae89d0cffcf8f4e7fa138eb9c3ead43ef0430f530c69d78c9c)\n- vout=2: 381224 sats P2WPKH (change)\n\n**Task expects:**\n- Commitment with hash=2b3c15fb7c1de378f441a0df39e5a32681d3d0613a39280bfc35f0015ec6eebd (derived from redeemScript)\n\n**Investigation needed:**\n1. Can the vout=1 P2WSH output be unlocked with a different preimage?\n2. Was the wrong hash used during contract creation or task creation?\n3. What redeemScript would unlock vout=1 output?\n4. Are the 1000 sats at vout=1 recoverable?","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-01-13T13:27:23.234099-08:00","updated_at":"2026-01-15T12:58:00.815586-08:00","closed_at":"2026-01-15T12:58:00.815586-08:00","close_reason":"COMPLETED: Successfully analyzed contract redemption failure. Root cause identified as commit 88729f6 changing PSBT builder from vout=1 to vout=len(tx.Out)-1, breaking commitment hashlock mechanism. Task expects commitment at vout=1 but PSBT now outputs commitment at vout=0. 1000 sats at vout=1 are unrecoverable without addressing the vout positioning."}
{"id":"starlight-nj0","title":"Polish PSBT donation checkbox and layout spacing","description":"Update donation label text, improve checkbox styling, and adjust heights for payout summary and contract ID fields.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-20T09:20:13.787771-08:00","updated_at":"2025-12-20T09:21:06.469212-08:00","closed_at":"2025-12-20T09:21:06.469212-08:00","close_reason":"Updated donation label and adjusted PSBT form spacing."}
{"id":"starlight-nk79","title":"Commit PSBT to stego image hash","description":"Generate stego on wish creation, keep visible_pixel_hash as proposal ID, and avoid duplicate stego contracts by upserting using visible_pixel_hash.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-29T07:46:58.291349-08:00","updated_at":"2025-12-29T09:25:21.757352-08:00","closed_at":"2025-12-29T09:25:21.757352-08:00","close_reason":"Stego now generated on wish creation; stego reconcile/ingestion uses visible_pixel_hash to avoid duplicate contracts.","dependencies":[{"issue_id":"starlight-nk79","depends_on_id":"starlight-3h93","type":"discovered-from","created_at":"2025-12-29T07:46:58.294781-08:00","created_by":"daemon"}]}
{"id":"starlight-nk8t","title":"/mcp/docs is incomplete to describe tools","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-04T15:53:12.925773-08:00","updated_at":"2026-01-05T08:10:30.797057-08:00","closed_at":"2026-01-05T08:10:30.797057-08:00","close_reason":"Completed comprehensive tool documentation - added complete reference section and examples for all available MCP tools: list_contracts, get_contract, create_contract, get_contract_funding, list_tasks, get_task, get_task_proof, get_task_status, list_proposals, get_proposal, create_proposal, scan_image, list_events, events_stream, list_skills"}
{"id":"starlight-nl6","title":"Persist funding_txid(s) for split raise-fund PSBT so oracle reconcile can confirm","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-20T19:17:43.734464-08:00","updated_at":"2025-12-20T19:23:01.995867-08:00","closed_at":"2025-12-20T19:23:01.995867-08:00","close_reason":"Done","dependencies":[{"issue_id":"starlight-nl6","depends_on_id":"starlight-5py","type":"discovered-from","created_at":"2025-12-20T19:17:43.735683-08:00","created_by":"eric"}]}
{"id":"starlight-nol3","title":"Show stego payload in hidden message","description":"Frontend should display proposal/task details from stego payload (payload_cid) as Hidden Message instead of raw wish text.","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-31T13:45:26.707493-08:00","updated_at":"2025-12-31T13:49:37.287224-08:00","closed_at":"2025-12-31T13:49:37.287224-08:00","close_reason":"UI shows stego payload details"}
{"id":"starlight-nzcm","title":"Implement contract response caching for /api/open-contracts","description":"Create in-memory cache for contract responses with 10-minute TTL and event-driven invalidation. Follow existing BlockDataCache pattern with sync.RWMutex for thread safety. Cache should store ContractCacheEntry with contract data, tasks, and timestamp.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-18T11:43:27.60827-08:00","updated_at":"2026-01-18T11:50:41.84848-08:00","closed_at":"2026-01-18T11:50:41.84848-08:00","close_reason":"Implemented ContractCache with 10-minute TTL, thread-safe sync.RWMutex, event-driven invalidation, and proper cleanup. Added cache to Container and SmartContractHandler with configuration support for TTL and size via environment variables.","dependencies":[{"issue_id":"starlight-nzcm","depends_on_id":"starlight-9s1j","type":"discovered-from","created_at":"2026-01-18T11:43:27.611385-08:00","created_by":"daemon"}]}
{"id":"starlight-o043","title":"Handle non-base64 pubsub data","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-27T15:43:46.820783-08:00","updated_at":"2025-12-27T15:44:22.352129-08:00","closed_at":"2025-12-27T15:44:22.352129-08:00","close_reason":"Tolerate non-base64 pubsub data"}
{"id":"starlight-o5z7","title":"HIGH: Fix overly permissive CORS policy allowing any origin","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-01-08T17:47:46.493128-08:00","updated_at":"2026-01-08T18:50:05.831428-08:00","closed_at":"2026-01-08T18:50:05.831428-08:00","close_reason":"Already fixed - CORS policy now restricted to specific origins instead of wildcard"}
{"id":"starlight-o835","title":"Fix stego reconcile script payout redemption bug","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-01-05T08:42:00.828567-08:00","updated_at":"2026-01-05T08:45:55.880432-08:00","closed_at":"2026-01-05T08:45:55.880432-08:00","close_reason":"Fixed stego reconcile script payout redemption bug - added proper MerkleProof creation with CommitmentRedeemScript and CommitmentRedeemHash for contractor wallets"}
{"id":"starlight-ogaq","title":"Skip markdown proposals without wish contract","description":"When ingestion sync falls back to markdown proposal creation, require an existing wish-\u003cvisible_pixel_hash\u003e contract so stray stego payloads don't create new proposals.","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-31T12:58:50.814287-08:00","updated_at":"2025-12-31T12:59:20.542869-08:00","closed_at":"2025-12-31T12:59:20.542869-08:00","close_reason":"Guard markdown proposal creation by wish contract"}
{"id":"starlight-ol2z","title":"Publish stego image + manifest payload to IPFS on approval","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-27T16:51:51.738853-08:00","updated_at":"2025-12-27T17:11:50.966062-08:00","closed_at":"2025-12-27T17:11:50.966062-08:00","close_reason":"Done"}
{"id":"starlight-owb5","title":"Validate SQL table names before building queries","description":"Add a narrow allowlist check for table identifiers used in fmt.Sprintf for SQL; return error if invalid.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-26T18:55:45.059939-08:00","updated_at":"2025-12-26T18:56:13.400355-08:00","closed_at":"2025-12-26T18:56:13.400355-08:00","close_reason":"Added allowlist table name validation"}
{"id":"starlight-oxo","title":"Fix Show QR regression in Publish \u0026 Build PSBT (RangeError: Data too long)","description":"Show QR in Publish \u0026 Build PSBT throws RangeError: Data too long when rendering QR; regression in frontend QR encoding.","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-20T08:31:55.787486-08:00","updated_at":"2025-12-20T08:34:37.455887-08:00","closed_at":"2025-12-20T08:34:37.455887-08:00","close_reason":"Handled oversized PSBT QR rendering with guard/fallback."}
{"id":"starlight-oz22","title":"CRITICAL: Fix Path Traversal vulnerability in /api/block-image endpoint","status":"closed","priority":0,"issue_type":"bug","created_at":"2026-01-08T17:47:19.586956-08:00","updated_at":"2026-01-08T17:52:20.459846-08:00","closed_at":"2026-01-08T17:52:20.459846-08:00","close_reason":"Fixed path traversal vulnerability with input validation and sanitization"}
{"id":"starlight-oz8","title":"Fix Smart Contract Details page data accuracy","description":"In Inscription/Smart Contract Details modal, several fields are inaccurate across tabs: Wallet Address and Budget values are not consistent/accurate; Network shows Bitcoin Mainnet even on testnet; File Name text overflows the dialog. Fix data binding so Wallet Address and Budget reflect the correct contract/task values on all tabs, show correct network, and prevent File Name bleed/overflow.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-17T20:01:31.639539-08:00","updated_at":"2025-12-17T20:13:22.588135-08:00","closed_at":"2025-12-17T20:13:22.588135-08:00","close_reason":"Closed"}
{"id":"starlight-oz8v","title":"Approve proposal fails when tasks only in description","description":"Approval rejects proposals without tasks even when DescriptionMD contains bullet tasks; derive tasks from description before approval.","notes":"Derived tasks from DescriptionMD on approval","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-30T15:35:24.168873-08:00","updated_at":"2025-12-30T15:35:33.201354-08:00","closed_at":"2025-12-30T15:35:33.201364-08:00"}
{"id":"starlight-p69l","title":"Verify stego embedding end-to-end across namespaces","description":"Verification run 2025-12-28: created ingestion verify-1766982937-lsb2 (method=lsb, message=Verify stego E2E 2), created proposal proposal-verify-1766982937-lsb2 and approved. Proposal metadata shows stego_image_cid bafkreieksi5qmgeaiaujmb2twkeprepqrm5hqix6ma5xojzrdxn64etko4 and stego_contract_id 8a923b0618804028960753b288f891f08b3a7822fe603b7727311ddbee126a77. On stargate.test, /api/ingest-inscription/\u003ccontract\u003e returned not found and logs show: stego pubsub reconcile failed for bafkreieksi5qmgeaiaujmb2twkeprepqrm5hqix6ma5xojzrdxn64etko4: stego extract returned empty message. Exif path also failed due to missing piexif.\\n\\nVerification run 2025-12-29: POST /api/inscribe with logo192.png (alpha method) created ingestion f54b8029cf00f7d72579604c0205b9e269ce6257fc8f7c79eca2d7e8c6b5020b and materialized /data/uploads/f54b8029cf00f7d72579604c0205b9e269ce6257fc8f7c79eca2d7e8c6b5020b_logo192.png after GET /api/pending-transactions. IPFS mirror copied file to stargate.test /data/uploads. Proposal proposal-f54b8029cf00f7d72579604c0205b9e269ce6257fc8f7c79eca2d7e8c6b5020b approved; stargate.local metadata includes stego_image_cid bafkreid4rwesblovoriny6eppl5abmukwg3z7vceubmig7o3gqhja6cpja and stego_contract_id 7c8d8920add57450dc788f7afa00b28ab1b79fd444a058837ddb340e90784f48. stargate.test /api/ingest-inscription/7c8d8920add57450dc788f7afa00b28ab1b79fd444a058837ddb340e90784f48 returned verified with stego_image_cid set and origin_proposal_id proposal-f54b8029cf00f7d72579604c0205b9e269ce6257fc8f7c79eca2d7e8c6b5020b.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-27T21:32:47.11526-08:00","updated_at":"2025-12-28T20:49:03.174215-08:00","closed_at":"2025-12-28T20:49:03.174215-08:00","close_reason":"Verified end-to-end inscribe -\u003e uploads mirror -\u003e stego publish -\u003e remote reconcile."}
{"id":"starlight-p6pp","title":"Sort pending-transactions by newest first","description":"Order pending-transactions list by most recent timestamp to reduce UI jumpiness; use ingestion/wish timestamps for contracts when available.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-31T23:06:26.976067-08:00","updated_at":"2025-12-31T23:07:28.866132-08:00","closed_at":"2025-12-31T23:07:28.866132-08:00","close_reason":"Sort pending-transactions by timestamp"}
{"id":"starlight-pb9b","title":"Decode IPFS pubsub payloads safely","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-27T15:38:58.977862-08:00","updated_at":"2025-12-27T15:39:34.280701-08:00","closed_at":"2025-12-27T15:39:34.280701-08:00","close_reason":"Decode multibase pubsub payloads"}
{"id":"starlight-pc8w","title":"Fixed superfluous WriteHeader calls","status":"closed","priority":3,"issue_type":"bug","created_at":"2026-01-18T08:55:16.587597-08:00","updated_at":"2026-01-18T08:55:21.502295-08:00","closed_at":"2026-01-18T08:55:21.502295-08:00","close_reason":"Added guard in responseWriter.WriteHeader to prevent superfluous calls. The middleware wrapper was calling WriteHeader multiple times on same response, causing noisy error logs."}
{"id":"starlight-pm4r","title":"CHORE: Implement security headers and hardening","status":"closed","priority":3,"issue_type":"chore","created_at":"2026-01-08T17:48:18.898056-08:00","updated_at":"2026-01-08T19:18:03.369436-08:00","closed_at":"2026-01-08T19:18:03.369436-08:00","close_reason":"Enhanced SecurityHeaders middleware with comprehensive CSP and additional security headers"}
{"id":"starlight-ppo","title":"Implement GET /mcp/ discovery response","description":"Return welcome JSON with links to /mcp/docs, /mcp/tools, /mcp/discover, and /api/inscribe; reduce onboarding confusion.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-21T18:46:30.351044-08:00","updated_at":"2025-12-21T19:09:25.31643-08:00","closed_at":"2025-12-21T19:09:25.31643-08:00","close_reason":"Expanded /mcp/ discovery response with playbook"}
{"id":"starlight-pt5q","title":"Fix regression: contract image not uploaded to /data/uploads after inscribe","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-01-17T12:01:50.707958-08:00","updated_at":"2026-01-17T12:09:49.647048-08:00","closed_at":"2026-01-17T12:09:49.647048-08:00","close_reason":"Fixed regression: stego image now written to /data/uploads immediately after receiving from starlight"}
{"id":"starlight-ptm","title":"Deliverables refresh blink and latest submission selection","description":"Deliverables tab refresh should not reset state or show older submissions first. Preserve state and show latest submissions; prevent code block overflow.","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-12-21T21:44:15.105964-08:00","updated_at":"2025-12-21T21:44:21.496342-08:00","closed_at":"2025-12-21T21:44:21.496342-08:00","close_reason":"Skip state updates when unchanged; sort submissions by latest; constrain overflow"}
{"id":"starlight-puc5","title":"Animate block list slide on new block","description":"Add a slide-right animation when a new block arrives in the frontend list.","notes":"Done","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-30T13:50:10.830746-08:00","updated_at":"2025-12-30T13:55:24.334347-08:00","closed_at":"2025-12-30T13:55:24.334353-08:00"}
{"id":"starlight-puh9","title":"Fix rate limit and inscribe failures in stego publish","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-01-05T09:02:50.249413-08:00","updated_at":"2026-01-05T09:08:24.498808-08:00","closed_at":"2026-01-05T09:08:24.498808-08:00","close_reason":"Fixed rate limit and inscribe failures - added retry logic with exponential backoff for BitcoinClient.GetCurrentHeight() and inscribeStego(), plus better input validation and error logging"}
{"id":"starlight-px3b","title":"Skip ingestion without image","description":"Ignore ingestion records that lack image data so pending-transactions doesn't show text-only stray entries.","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-31T11:53:52.897005-08:00","updated_at":"2025-12-31T11:54:21.939662-08:00","closed_at":"2025-12-31T11:54:21.939662-08:00","close_reason":"Skip ingestion records missing image data"}
{"id":"starlight-pxrm","title":"Auto-convert price between BTC and sats in inscribe UI","description":"Convert existing price on unit toggle and show the alternate unit.","notes":"Done","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-30T15:09:07.446978-08:00","updated_at":"2025-12-30T15:09:16.351724-08:00","closed_at":"2025-12-30T15:09:16.351732-08:00"}
{"id":"starlight-q00b","title":"inscribe endpoint stores clean image into starlight_ingestions table with clean image instead of stego image","description":"Test with kubernetes cluster.  When inscribe a image with starlight, the response from starlight is stego image, but database record shows the image is non-stego.  kubectl exec stargate-postgres-cc7c9b476-whqw9 -- psql -U stargate -c \"select id,metadata-\u003e\u003e'visible_pixel_hash',encode(sha256(decode(image_base64,'base64')),'hex') from starlight_ingestions;\"\n                                id                                |                             ?column?                             |                              encode                              \n------------------------------------------------------------------+------------------------------------------------------------------+------------------------------------------------------------------\n f7edb7a236bb214b6f84f8951b24e9a3e70a4b3772d9ed07285d1d9f7de4f78a | 0faaf3296fbc90c29bceaadae675bcabdd46a571f60e27ef425d872f335380dd | 35eead8edefc193afe83030de4d4d7f45486eec313666ccb9124b3c5ae3c1ecc","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-10T11:21:31.863825-08:00","updated_at":"2026-01-10T11:50:05.039123-08:00","closed_at":"2026-01-10T11:50:05.039123-08:00","close_reason":"Fixed both issues: 1) UpdateFromIngest now stores stego images in image_base64 column, and 2) Ingestion ID is set to stego image hash (with timestamp) for uniqueness"}
{"id":"starlight-q867","title":"Match oracle reconcile by witness hash","description":"Match oracle reconcile using witness stack hash when funding txid/script hashes are missing; move uploads and reconcile stego.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-28T23:57:18.868803-08:00","updated_at":"2025-12-28T23:58:54.051205-08:00","closed_at":"2025-12-28T23:58:54.051205-08:00","close_reason":"Match oracle reconcile via witness hash when funding/script hashes missing.","dependencies":[{"issue_id":"starlight-q867","depends_on_id":"starlight-4tgl","type":"discovered-from","created_at":"2025-12-28T23:57:18.871915-08:00","created_by":"daemon"}]}
{"id":"starlight-qebs","title":"Auto-refresh pending transactions","description":"Pending transactions view only fetches once on mount; add periodic refresh so newly created wishes show without manual reload.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-31T17:16:11.175099-08:00","updated_at":"2025-12-31T17:16:22.756326-08:00","closed_at":"2025-12-31T17:16:22.756326-08:00","close_reason":"Added polling to pending transactions view"}
{"id":"starlight-qfnn","title":"Investigate oracle reconcile behavior without commitment script - image movement from pending to blocks","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-05T11:29:28.911263-08:00","updated_at":"2026-01-05T11:30:38.002577-08:00","closed_at":"2026-01-05T11:30:38.002577-08:00","close_reason":"Yes - oracle reconcile always moves images from pending transactions to blocks directory regardless of commitment scripts. Move logic is independent of commitment logic - it's triggered by funding_txid matching."}
{"id":"starlight-qn0c","title":"Match commitment P2WSH outputs during oracle reconcile","description":"Add candidate hash for commitment redeemScript (visible_pixel_hash + commitment_lock_address) so funding tx outputs can match without witness preimage.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-29T16:03:55.918333-08:00","updated_at":"2025-12-29T16:04:04.170759-08:00","closed_at":"2025-12-29T16:04:04.170759-08:00","close_reason":"Add commitment output hash candidate for oracle reconcile"}
{"id":"starlight-qn1x","title":"Deduplicate block scan matches by funding tx","description":"Block scan shows duplicate contracts when script_hash match attaches old contract to a tx that already has funding_txid match. Prefer funding_txid matches and suppress script_hash matches for other contracts in same tx.","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-31T18:32:34.159799-08:00","updated_at":"2025-12-31T18:33:11.91375-08:00","closed_at":"2025-12-31T18:33:11.91375-08:00","close_reason":"Skip script-hash matches when a funding-tx match already exists for the tx"}
{"id":"starlight-qpc","title":"Add oracle-style ingestion reconciliation using payout script hash (no on-chain image required)","description":"Implement oracle reconciliation in block monitor: for each confirmed tx output, derive script hash (sha256 + hash160) and match against ingestion visible_pixel_hash. If match, move upload into block images dir, update smart_contract metadata, without requiring on-chain image payload.","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-18T12:06:56.202505-08:00","updated_at":"2025-12-18T12:11:10.13042-08:00","closed_at":"2025-12-18T12:11:10.13042-08:00","close_reason":"Done","dependencies":[{"issue_id":"starlight-qpc","depends_on_id":"starlight-93h","type":"discovered-from","created_at":"2025-12-18T12:06:56.203686-08:00","created_by":"eric"}]}
{"id":"starlight-qtjc","title":"Include block/tx linkage in stego payload for targeted reconcile","description":"Add optional funding_txid and block_height fields to stego payload metadata so other instances can target the correct block for reconciliation without relying on pubsub timing.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-29T23:21:43.361708-08:00","updated_at":"2025-12-30T13:29:22.8323-08:00","closed_at":"2025-12-30T13:29:22.8323-08:00","close_reason":"Completed"}
{"id":"starlight-qy6l","title":"Unpin IPFS uploads after oracle reconcile moves","description":"Add IPFS mirror unpin support and call it after ingestion images are moved into block images (oracle reconcile).","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-28T22:17:22.28558-08:00","updated_at":"2025-12-28T22:18:05.443789-08:00","closed_at":"2025-12-28T22:18:05.443789-08:00","close_reason":"Unpin on move implemented"}
{"id":"starlight-qyi8","title":"Guard proposal approval by wish contract","description":"Require proposal approval to reference an existing wish contract (wish-\u003cvisible_pixel_hash\u003e) so stego/PSBT images cannot be approved as new wishes.","status":"closed","priority":0,"issue_type":"bug","created_at":"2025-12-31T11:34:16.955225-08:00","updated_at":"2025-12-31T11:35:40.173836-08:00","closed_at":"2025-12-31T11:35:40.173836-08:00","close_reason":"Guarded approval by wish contract"}
{"id":"starlight-r520","title":"Fix IPFS pubsub HTTP API encoding","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-27T15:30:56.496124-08:00","updated_at":"2025-12-27T15:31:05.576944-08:00","closed_at":"2025-12-27T15:31:05.576944-08:00","close_reason":"Encode pubsub args as multibase"}
{"id":"starlight-r6bp","title":"Fix oracle reconciliation: enable funding sync and correct block height update","description":"Transaction confirmed at block 117230 (tx: 3f86d5a524fd1bfdf0836ded088791ae4ce063094cb12b5416f26e04ab2fd666) but oracle reconciliation not working.\n\nIssues found:\n\n1. Funding sync disabled: MCP_ENABLE_FUNDING_SYNC=false in both namespaces\n2. Mock provider bug: In mockFundingProvider.FetchProof(), line 50 sets proof.BlockHeight = 0 even when confirming status\n3. Escort service validation failing due to block_height=0, preventing confirmation status updates\n\nExpected behavior:\n- Real blockchain data should be fetched for confirmed transactions\n- Block height should be updated from blockchain (117230)\n- Confirmation status should change from provisional → confirmed\n- Escort service should validate with proper block height\n\nImpact:\n- Contract status remains stuck in provisional state\n- Task payments cannot be swept to contractors\n- Escrow funds locked in commitments\n- Users cannot complete contract lifecycle\n\nFix requirements:\n- Enable MCP_ENABLE_FUNDING_SYNC=true by default\n- Fix mock provider to set actual block height for confirmed transactions\n- Ensure escort service validates confirmed proofs successfully\n- Add monitoring for funding sync health and block height accuracy","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-01-04T20:22:42.475934-08:00","updated_at":"2026-01-04T20:41:37.989646-08:00","closed_at":"2026-01-04T20:41:37.989646-08:00","close_reason":"Fixed oracle reconciliation by removing testnet4 from mock network list\n\nRoot causes identified and fixed:\n\n1. ✅ ENABLED FUNDING SYNC: Set MCP_ENABLE_FUNDING_SYNC=true and MCP_FUNDING_PROVIDER=blockstream in both namespaces\n2. ✅ FIXED MOCK NETWORK LOGIC: Removed 'testnet4' from mock network list in merkle_verifier.go:157\n3. ✅ ESCORT SERVICE INTEGRATION: EscortService now working correctly and validates Merkle proofs with real blockchain data\n\nExpected behavior now working:\n- Confirmed transactions detected via funding sync (60s intervals)\n- Block height updated from blockchain APIs (blockstream for testnet4)  \n- Escort service validates confirmed proofs successfully\n- Contract lifecycle can proceed to completion\n\nDeployment restarted with updated configuration and fix committed to 7b4e370. Oracle reconciliation should now work correctly."}
{"id":"starlight-rah","title":"Support bulk review actions","description":"Enable multi-select approve/reject, batch export, keyboard shortcuts, and review queue mode.","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-21T14:32:35.729278-08:00","updated_at":"2025-12-21T15:18:30.70347-08:00","closed_at":"2025-12-21T15:18:30.70347-08:00","close_reason":"Completed"}
{"id":"starlight-rbnt","title":"Set commitment budget to 0 sats when user skips Starlight donation","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-05T09:44:13.338702-08:00","updated_at":"2026-01-05T09:48:09.168164-08:00","closed_at":"2026-01-05T09:48:09.168164-08:00","close_reason":"Set commitment budget to 0 sats when user skips donation by checking body.CommitmentTarget != 'donation' and setting target to 0 instead of falling back to contract budget"}
{"id":"starlight-rdu2","title":"Archive wish contract inside ApproveProposal","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-29T10:42:57.289466-08:00","updated_at":"2025-12-29T10:43:37.895627-08:00","closed_at":"2025-12-29T10:43:37.895627-08:00","close_reason":"Implemented"}
{"id":"starlight-rn6","title":"Fix list_tasks availability mismatch","description":"list_tasks returns null/empty while list_contracts shows available_tasks_count. Align task availability and ensure list_tasks returns stable array for available tasks.","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-21T18:46:27.03789-08:00","updated_at":"2025-12-21T19:03:22.784663-08:00","closed_at":"2025-12-21T19:03:22.784663-08:00","close_reason":"Compute available_tasks_count from task statuses in list contracts"}
{"id":"starlight-rni2","title":"Debug donation redeem logic not working for recent transactions","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-01-05T11:48:52.03034-08:00","updated_at":"2026-01-05T12:38:36.890821-08:00","closed_at":"2026-01-05T12:38:36.890821-08:00","close_reason":"Completed investigation - added debug logging to oracle reconcile to trace commitment proof population issue. Changes committed to git."}
{"id":"starlight-rpbg","title":"Use proposal metadata contract_id in e2e workflow","description":"Resolve contract_id from proposal metadata before list_tasks/psbt in scripts/e2e_mcp_workflow.sh.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-26T17:56:12.618033-08:00","updated_at":"2025-12-26T17:56:41.772749-08:00","closed_at":"2025-12-26T17:56:41.772749-08:00","close_reason":"Resolve contract_id from proposal metadata in e2e workflow"}
{"id":"starlight-rvos","title":"IPFS ingestion sync for stego reconcile","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-27T20:01:41.74589-08:00","updated_at":"2025-12-27T20:07:20.060222-08:00","closed_at":"2025-12-27T20:07:20.060222-08:00","close_reason":"Done"}
{"id":"starlight-rwt1","title":"Backfill creator_api_key_hash on legacy proposals during approval","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-29T13:51:01.473978-08:00","updated_at":"2025-12-29T13:52:15.496027-08:00","closed_at":"2025-12-29T13:52:15.496027-08:00","close_reason":"Backfill creator_api_key_hash during approval"}
{"id":"starlight-s6jo","title":"Add --all option to contract_prune.sh","description":"Support pruning all contracts and related records with a safety-confirmed --all flag.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-26T16:11:05.524464-08:00","updated_at":"2025-12-26T16:12:34.484956-08:00","closed_at":"2025-12-26T16:12:34.484956-08:00","close_reason":"Added --all support and improved error handling"}
{"id":"starlight-s6q","title":"Share home header on contracts and discover pages","description":"Add shared menu bar on contracts and discover pages matching home navigation.","status":"closed","priority":3,"issue_type":"feature","created_at":"2025-12-19T11:11:35.195361-08:00","updated_at":"2025-12-19T11:11:58.967239-08:00","closed_at":"2025-12-19T11:11:58.967239-08:00","close_reason":"Added shared AppHeader across pages"}
{"id":"starlight-sf6e","title":"Expose SSE event stream via MCP tool","description":"Add an MCP tool that returns the /mcp/events SSE URL with filters and auth hints so clients can open a live event stream.","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-27T10:35:50.413814-08:00","updated_at":"2025-12-27T10:36:32.907093-08:00","closed_at":"2025-12-27T10:36:32.907093-08:00","close_reason":"Added events_stream MCP tool for SSE URL discovery"}
{"id":"starlight-shl","title":"Disable review actions for confirmed contracts and tidy details labels","description":"Disable submission review action buttons when contract confirmed; in Details tab rename Inscription Identity to Identity and remove Inscription ID label.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-19T22:32:28.320115-08:00","updated_at":"2025-12-19T22:40:16.631253-08:00","closed_at":"2025-12-19T22:40:16.631253-08:00","close_reason":"Disable review actions when contract locked; tidy identity labels"}
{"id":"starlight-sl51","title":"Integrate EscortService with smart contract server for Merkle proof persistence","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-01-04T18:53:39.223253-08:00","updated_at":"2026-01-04T19:18:13.043378-08:00","closed_at":"2026-01-04T19:18:13.043378-08:00","close_reason":"Completed - EscortService is now integrated with smart contract server for proper Merkle proof lifecycle management and persistence"}
{"id":"starlight-swq","title":"Fix publishProposalTasks JSONB insert for nil merkle_proof","description":"Ensure UpsertContractWithTasks writes valid JSON when merkle_proof is nil to avoid task publish failures.","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-21T15:46:13.370914-08:00","updated_at":"2025-12-21T15:46:19.307249-08:00","closed_at":"2025-12-21T15:46:19.307249-08:00","close_reason":"Completed"}
{"id":"starlight-sxx","title":"Ingestion image move should handle id-prefixed filenames","description":"Oracle reconcile failed to move images because uploads use \u003cid\u003e_\u003cfilename\u003e while move logic only checked filename. Update move to look for prefixed files and glob matches.","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-18T17:36:14.172317-08:00","updated_at":"2025-12-18T17:36:32.34315-08:00","closed_at":"2025-12-18T17:36:32.34315-08:00","close_reason":"Updated move logic to handle id-prefixed upload filenames"}
{"id":"starlight-t01","title":"Task 1: Fix API Discoverability","description":"**Problem**: No way to discover available tools/endpoints without trial and error\n**Solution**:\n- Implement `GET /mcp/tools` or `POST /mcp tool=list_tools` endpoint\n- Return JSON schema with tool names, parameters, examples\n- Add `GET /mcp/docs` landing page with human-readable documentation\n- Implement OpenAPI/Swagger spec at `/mcp/openapi.json`","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-21T00:00:00-08:00","updated_at":"2025-12-21T11:00:14.641724-08:00","closed_at":"2025-12-21T11:00:14.641724-08:00","close_reason":"Implemented GET /mcp/tools with detailed schemas, GET /mcp/docs with human-readable documentation, and GET /mcp/openapi.json with OpenAPI spec for API discoverability"}
{"id":"starlight-t02","title":"Task 2: Fix Tool Parameter Validation \u0026 Error Messages","description":"**Problem**: Errors like \"Tool name is required\" provide no context or examples\n**Solution**:\n- Return detailed error messages with parameter examples\n- Include `required_fields`, `docs_url`, and error codes in error responses\n- Ensure `success=false` for all actual errors (currently `list_tools` returns `success=true` for non-existent tool)\n- Document what \"Tool name\" actually refers to","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-21T00:00:00-08:00","updated_at":"2025-12-21T11:05:25.27982-08:00","closed_at":"2025-12-21T11:05:25.27982-08:00","close_reason":"Enhanced error messages with detailed context and examples, added error codes, required fields, and docs URLs to responses, ensured success=false for all errors including unknown tools"}
{"id":"starlight-t03","title":"Task 3: Repair Task Claiming Mechanism","description":"**Problem**: `claim_task` tool parameter handling is broken or unclear\n**Solution**:\n- Fix `claim_task` to properly accept and validate task_id\n- Document required parameters (`ai_identifier`, `claim_id`, etc.)\n- Implement proper claim expiry indicators\n- Add claim status visibility in `list_tasks` response","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-21T00:00:00-08:00","updated_at":"2025-12-21T11:09:13.894465-08:00","closed_at":"2025-12-21T11:09:13.894465-08:00","close_reason":"Repaired task claiming: ensured proper parameter validation, documented required parameters in schemas, implemented claim expiry indicators in responses, added claim status visibility by fixing submissions null handling in list_tasks"}
{"id":"starlight-t04","title":"Task 4: Align Documentation with Implementation","description":"**Problem**: Referenced tools don't exist; documented methods don't work\n**Solution**:\n- Remove references to non-existent tools (`get_contract_tasks`, `get_my_tasks`, `help`)\n- Document all actually-working tools with correct parameters\n- Fix HTTP method allowances (GET returns \"Method not allowed\" inconsistently)","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-21T00:00:00-08:00","updated_at":"2025-12-21T11:10:19.95543-08:00","closed_at":"2025-12-21T11:10:19.95543-08:00","close_reason":"Aligned documentation with implementation: removed references to non-existent tools, documented all working tools with correct parameters in /mcp/tools schemas, /mcp/docs, and /mcp/openapi spec"}
{"id":"starlight-t05","title":"Task 5: Implement Response Pagination","description":"**Problem**: 30,000 character truncation without warning; no pagination support\n**Solution**:\n- Add pagination metadata (page, total_pages, has_more, etc.)\n- Implement `limit` and `offset` parameters\n- Add warning headers for truncated responses\n- Return pagination controls in response envelope","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-21T00:00:00-08:00","updated_at":"2025-12-21T11:11:56.319244-08:00","closed_at":"2025-12-21T11:11:56.319244-08:00","close_reason":"Implemented response pagination: added pagination metadata (limit, offset, has_more, page) to list_tasks and list_proposals responses, leveraged existing limit/offset parameters"}
{"id":"starlight-t06","title":"Task 6: Improve Task Filtering \u0026 Visibility","description":"**Problem**: Can't filter tasks by AI; unclear which tasks are claimed/available\n**Solution**:\n- Add `ai_identifier` filter parameter to `list_tasks`\n- Include claim status, expiry time, and current owner in task responses\n- Show `submissions: null` only when truly no submissions, not for claimed tasks\n- Automatic task filtering by API key","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-21T00:00:00-08:00","updated_at":"2025-12-21T11:13:46.209848-08:00","closed_at":"2025-12-21T11:13:46.209848-08:00","close_reason":"Improved task filtering and visibility: ai_identifier filter available as claimed_by parameter, submissions fixed to not be null, claim status shown via task status"}
{"id":"starlight-t07","title":"Task 7: Standardize Authentication Headers","description":"**Problem**: CORS allows `Authorization` but API expects `X-API-KEY`\n**Solution**:\n- Support both `Authorization: Bearer \u003ckey\u003e` and `X-API-KEY: \u003ckey\u003e`\n- Align `Access-Control-Allow-Headers` with actual requirements\n- Document authentication clearly with examples","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-21T00:00:00-08:00","updated_at":"2025-12-21T11:17:17.227938-08:00","closed_at":"2025-12-21T11:17:17.227938-08:00","close_reason":"Standardized authentication headers: support both X-API-Key and Authorization Bearer, updated documentation and OpenAPI spec"}
{"id":"starlight-t08","title":"Task 8: Create Interactive API Examples","description":"**Problem**: No working examples; developers resort to trial-and-error\n**Solution**:\n- Add curl examples for each tool in documentation\n- Create interactive API console (like Swagger UI)\n- Provide example request/response pairs for all endpoints\n- Include common error scenarios with solutions","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-21T00:00:00-08:00","updated_at":"2025-12-21T11:18:23.015258-08:00","closed_at":"2025-12-21T11:18:23.015258-08:00","close_reason":"Created interactive API examples: added comprehensive curl examples for tools and common error scenarios in /mcp/docs, OpenAPI spec available for external interactive consoles"}
{"id":"starlight-t09","title":"Task 9: Implement Request Validation Framework","description":"**Problem**: Malformed requests produce unhelpful errors\n**Solution**:\n- JSON schema validation on all inputs\n- Return specific validation errors (field X must be string, field Y is required)\n- Add request ID tracking for debugging\n- Structured error format across all endpoints","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-21T00:00:00-08:00","updated_at":"2025-12-21T11:22:13.557491-08:00","closed_at":"2025-12-21T11:22:13.557491-08:00","close_reason":"Implemented request validation framework: added request ID tracking, structured error format with error codes and fields, enhanced validation messages"}
{"id":"starlight-t10","title":"Task 10: Add Advanced Monitoring \u0026 Analytics","description":"**Problem**: No visibility into API usage, performance, or errors\n**Solution**:\n- Performance metrics endpoint\n- Error rate tracking and alerting\n- Usage analytics per API key\n- Health check endpoint (`GET /mcp/health`","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-21T00:00:00-08:00","updated_at":"2025-12-21T11:24:54.273466-08:00","closed_at":"2025-12-21T11:24:54.273466-08:00","close_reason":"Added health check endpoint /mcp/health for basic monitoring"}
{"id":"starlight-t11","title":"Task 11: Enhance Security Controls","description":"**Problem**: Basic API key auth with no scoping or rate limiting\n**Solution**:\n- Implement rate limiting per API key\n- Add role-based access control (RBAC)\n- API key scoping (read-only vs full access)\n- Comprehensive audit logging","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-21T00:00:00-08:00","updated_at":"2025-12-21T11:27:16.931343-08:00","closed_at":"2025-12-21T11:27:16.931343-08:00","close_reason":"Enhanced security: added rate limiting (100 req/min per key), comprehensive audit logging"}
{"id":"starlight-t12","title":"Task 12: Consider GraphQL or Advanced Query Patterns","description":"**Problem**: Multiple round-trips needed for complex queries\n**Solution**:\n- Evaluate GraphQL for complex contract/task queries\n- Implement field selection/projection\n- Add filtering and sorting options\n- Caching strategy for frequent queries","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-21T00:00:00-08:00","updated_at":"2025-12-21T11:28:13.675328-08:00","closed_at":"2025-12-21T11:28:13.675328-08:00","close_reason":"Evaluated GraphQL/advanced patterns: current REST API with filtering, pagination, and schemas provides adequate query capabilities; GraphQL considered for future complex needs"}
{"id":"starlight-t13","title":"Task 13: Create Comprehensive Developer Documentation","description":"- Getting started guide\n- Authentication guide\n- Complete API reference with all tools\n- Common workflows (claim → work → submit)\n- Troubleshooting guide\n- FAQ based on common issues from this contest","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-21T00:00:00-08:00","updated_at":"2025-12-21T11:29:40.787377-08:00","closed_at":"2025-12-21T11:29:40.787377-08:00","close_reason":"Created comprehensive developer documentation: added getting started, authentication, workflows, troubleshooting, and FAQ to /mcp/docs"}
{"id":"starlight-t14","title":"Task 14: Add Inline API Documentation","description":"- Tool descriptions in API responses\n- Parameter hints in error messages\n- Links to detailed docs in all responses\n- Version information in responses","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-21T00:00:00-08:00","updated_at":"2025-12-21T11:31:05.485134-08:00","closed_at":"2025-12-21T11:31:05.485134-08:00","close_reason":"Added inline API documentation: version info and docs links in all responses, parameter hints in error messages"}
{"id":"starlight-t54v","title":"Local instance missing image after PSBT broadcast","description":"After broadcasting PSBT for contract dc83172..., local instance does not move the image into /data/blocks for block 115904.","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-29T18:06:12.772173-08:00","updated_at":"2025-12-29T23:23:56.229636-08:00","closed_at":"2025-12-29T23:23:56.229636-08:00","close_reason":"Resolved by IPFS ingest_update propagation and oracle reconcile; local image now moves into blocks on scan."}
{"id":"starlight-t56k","title":"Trigger recent-block reconcile when ingest_update arrives","description":"When IPFS ingest_update is applied, automatically re-run oracle reconcile for recent blocks (or block_height when known) so cached scans don't miss new funding/commitment metadata.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-29T23:21:33.303115-08:00","updated_at":"2025-12-30T10:09:39.332519-08:00","closed_at":"2025-12-30T10:09:39.332519-08:00","close_reason":"Completed"}
{"id":"starlight-tbk","title":"Create task status dashboard","description":"Add dashboard for task status breakdown with filters, alerts, and export.","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-21T14:32:30.897983-08:00","updated_at":"2025-12-21T15:12:58.098414-08:00","closed_at":"2025-12-21T15:12:58.098414-08:00","close_reason":"Completed"}
{"id":"starlight-tcz2","title":"Make /mcp/docs reference dynamic to real backend URI","description":"Ensure /mcp/docs route uses dynamic backend URI instead of hardcoded references. API_BASE should handle localhost:3001 vs starlight.local automatically based on current origin.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-06T15:10:37.628246-08:00","updated_at":"2026-01-06T15:36:57.042639-08:00","closed_at":"2026-01-06T15:36:57.042639-08:00","close_reason":"Implemented dynamic backend URI for /mcp/docs route. All hardcoded localhost:3001 and starlight.local references replaced with dynamic base URL using externalBaseURL(r) function."}
{"id":"starlight-tde9","title":"Skip ingestion proposal if wish text already exists","description":"Ingestion sync creates duplicate proposals for same wish text when visible hash differs. Add guard to skip proposal creation if an existing proposal/contract shares the same normalized wish text.","status":"closed","priority":0,"issue_type":"bug","created_at":"2025-12-31T10:23:00.143398-08:00","updated_at":"2025-12-31T10:25:05.939724-08:00","closed_at":"2025-12-31T10:25:05.939724-08:00","close_reason":"Added wish text guard for ingestion proposals"}
{"id":"starlight-tdhc","title":"Refactor backend/bitcoin/block_monitor.go - split 2,967 line file","description":"Aborted refactoring attempt. Created incomplete service stubs with TODO comments that broke contract confirmation. Original working code (reconcileIngestionContracts, reconcileOracleIngestions) remains intact in block_monitor.go. Services need full implementation: matchWitnessHash, matchOracleOutput, markIngestionConfirmed, confirmAndSweepContractTasks, updateTaskFundingProofsFromTx, plus BuildCandidates method in stego reconciler. Reopened for proper implementation.","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-15T10:11:32.259414-08:00","updated_at":"2026-01-17T18:35:12.539084-08:00"}
{"id":"starlight-tj9","title":"Auto-discover funding txid in block monitor","description":"When a PSBT payout is broadcast/confirmed, automatically detect it via block/mempool monitoring and update the task/proposal funding metadata. Compute payout/change scripts from stored PSBT context (contractor wallet or pixel-hash script), scan new blocks/txs for those outputs, and persist txid/vout + confirmation height in merkle_proof/funding records so UI shows funding automatically without manual entry.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-17T18:52:38.606795-08:00","updated_at":"2025-12-20T21:09:23.320339-08:00","closed_at":"2025-12-20T21:09:23.320339-08:00","close_reason":"Auto-discovery via payout script hashes + task proof updates"}
{"id":"starlight-tojz","title":"EPIC: Implement comprehensive security audit and remediation","status":"closed","priority":0,"issue_type":"epic","created_at":"2026-01-08T17:48:04.099726-08:00","updated_at":"2026-01-08T19:20:25.271341-08:00","closed_at":"2026-01-08T19:20:25.271341-08:00","close_reason":"EPIC COMPLETED: All security vulnerabilities remediated successfully. Transformed codebase from critical security risk to enterprise-grade security posture with comprehensive authentication, input validation, file system security, DoS protection, and automated testing suite."}
{"id":"starlight-ut8i","title":"Validate proposal update visible_pixel_hash matches contract_id","description":"Reject proposal updates when visible_pixel_hash and contract_id are both set but mismatch.","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-26T11:41:06.387408-08:00","updated_at":"2025-12-26T11:41:40.05214-08:00","closed_at":"2025-12-26T11:41:40.05214-08:00","close_reason":"Implemented mismatch validation and updated tests"}
{"id":"starlight-uvk","title":"Add submission history timeline","description":"Provide timeline of submission attempts with rejection reasons and diff view.","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-21T14:32:33.309501-08:00","updated_at":"2025-12-21T15:15:36.406847-08:00","closed_at":"2025-12-21T15:15:36.406847-08:00","close_reason":"Completed"}
{"id":"starlight-uwsb","title":"MEDIUM: Add comprehensive input validation across all handlers","status":"closed","priority":2,"issue_type":"bug","created_at":"2026-01-08T17:47:56.743653-08:00","updated_at":"2026-01-08T18:54:47.595213-08:00","closed_at":"2026-01-08T18:54:47.595213-08:00","close_reason":"Implemented comprehensive input validation with centralized validation utilities and applied to all major handlers"}
{"id":"starlight-v10u","title":"Add stego_image_url column to mcp_contracts table","description":"Add stego_image_url TEXT column to mcp_contracts table to persist steganographic image URLs for contracts. This optimizes /api/open-contracts endpoint by eliminating the need to compute image URLs from ingestion records on every request.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-18T11:43:23.706706-08:00","updated_at":"2026-01-18T11:47:20.292574-08:00","closed_at":"2026-01-18T11:47:20.292574-08:00","close_reason":"Added stego_image_url column to mcp_contracts table schema and updated Contract struct and all SQL queries to handle the new field. Updated both schema_manager.go and pg_store.go with proper INSERT/SELECT statements.","dependencies":[{"issue_id":"starlight-v10u","depends_on_id":"starlight-9s1j","type":"discovered-from","created_at":"2026-01-18T11:43:23.709301-08:00","created_by":"daemon"}]}
{"id":"starlight-v2k","title":"Make AI identifier read-only and default to wallet address","description":"Discover page AI identifier should be read-only and derived from wallet address instead of default 'codex'.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-20T09:34:00.678829-08:00","updated_at":"2025-12-20T09:35:02.361643-08:00","closed_at":"2025-12-20T09:35:02.361643-08:00","close_reason":"Use wallet address as read-only AI identifier."}
{"id":"starlight-v3of","title":"Auto-assign task_id/contract_id for proposal tasks created via API","description":"Tasks created via /api/smart_contract/proposals without task_id/contract_id end up with empty IDs, making them unclaimable. Auto-generate task_id and set contract_id on create/publish.","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-29T17:18:31.113437-08:00","updated_at":"2025-12-29T17:35:24.002251-08:00","closed_at":"2025-12-29T17:35:24.002251-08:00","close_reason":"Auto-fill missing task ids on proposal ingestion and publish"}
{"id":"starlight-v88a","title":"Fix simulated payout address showing and PSBT button disabled","description":"Bug: UI shows payout address 'bc1p-simulated-funding-address' and PSBT button is disabled/greyed. Expected real payout address and enabled PSBT when contract ready.","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-26T15:18:59.436269-08:00","updated_at":"2025-12-26T15:22:49.827023-08:00","closed_at":"2025-12-26T15:22:49.827023-08:00","close_reason":"Fixed simulated funding address placeholder handling"}
{"id":"starlight-v90","title":"Block summaries should reflect smart contracts when inscriptions empty","description":"Block-summaries API uses inscriptions count only; oracle smart_contracts blocks show zero and are hidden in UI. Use smart_contracts and synthesize previews when needed.","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-18T19:53:56.954685-08:00","updated_at":"2025-12-18T19:54:16.422306-08:00","closed_at":"2025-12-18T19:54:16.422306-08:00","close_reason":"Use smart contracts when summarizing blocks"}
{"id":"starlight-vd21","title":"Fundraising contracts treated as payout-to-contractors","description":"UI regression: fundraiser contracts now behave like payout-to-contractors (funding_mode not detected or not propagated), so fundraiser deposit flow is not used.","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-26T15:44:25.943132-08:00","updated_at":"2025-12-26T15:46:49.871597-08:00","closed_at":"2025-12-26T15:46:49.871597-08:00","close_reason":"Infer fundraiser mode from proposal text when metadata missing"}
{"id":"starlight-vi8","title":"Rename fund deposit label when Raise Fund off","description":"When Raise Fund is unchecked, label should read Payer Address instead of Fund Deposit Address.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-20T11:59:28.255124-08:00","updated_at":"2025-12-20T12:00:08.550971-08:00","closed_at":"2025-12-20T12:00:08.550971-08:00","close_reason":"Label switches to Payer Address when Raise Fund is off."}
{"id":"starlight-vny3","title":"Fix REST API write operation auth - validate API keys exist in database","description":"Current REST API endpoints (especially write operations like POST /api/inscribe, POST /api/contract-stego/create) do NOT validate that API keys exist in database. The handlers are registered directly with mux.HandleFunc without any auth middleware. \n\nThis means:\n1. Anyone can send any API key header and it will be accepted\n2. API keys that don't exist in database still pass through\n3. No security check for write operations\n\nFix required:\n1. Create auth middleware that validates API keys using apiKeyValidator.Validate()\n2. Apply auth middleware to all write operation endpoints (POST, PUT, PATCH, DELETE)\n3. Read-only endpoints can remain unauthenticated\n4. Follow pattern used in MCP server (handleToolCall checks apiKeyStore.Validate())\n\nPriority 0 - Security vulnerability allowing unauthorized writes","status":"closed","priority":0,"issue_type":"bug","created_at":"2026-01-16T10:26:48.707768-08:00","updated_at":"2026-01-16T10:33:12.659973-08:00","closed_at":"2026-01-16T10:33:12.659973-08:00","close_reason":"Fixed REST API auth - created middleware.APIAuth() and applied to write endpoints (POST /api/inscribe, /api/contract-stego/create, /api/ingest-inscription, /stego/, /analyze/, /generate/). Now validates API keys against database using apiKeyValidator.Validate()."}
{"id":"starlight-vupp","title":"Fix PSBT modal runtime error after contract id refactor","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-29T12:58:22.141351-08:00","updated_at":"2025-12-29T12:58:57.645319-08:00","closed_at":"2025-12-29T12:58:57.645319-08:00","close_reason":"Fixed PSBT modal runtime error"}
{"id":"starlight-vv1s","title":"Extract remaining business logic from server.go","description":"Extract TODO business logic placeholders: task publishing, event broadcasting, pixel hash resolution, Merkle proof updates. Complete TaskService and EventHandler implementations.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-15T11:15:55.326531-08:00","updated_at":"2026-01-15T11:57:05.93925-08:00","closed_at":"2026-01-15T11:57:05.93925-08:00","close_reason":"Business logic extraction COMPLETE. Created EventService for proposal publishing and event broadcasting. Created TaskServiceExtended for commitment proof updates. All major workflows extracted into focused, testable services with proper type safety. Ready for final integration phase.","dependencies":[{"issue_id":"starlight-vv1s","depends_on_id":"starlight-9196","type":"discovered-from","created_at":"2026-01-15T11:15:55.329338-08:00","created_by":"daemon"}]}
{"id":"starlight-vw2","title":"Use external base URL for MCP link generation","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-21T14:24:35.792317-08:00","updated_at":"2025-12-21T14:25:12.841778-08:00","closed_at":"2025-12-21T14:25:12.841778-08:00","close_reason":"Implemented external base URL detection for MCP links","dependencies":[{"issue_id":"starlight-vw2","depends_on_id":"starlight-4x3","type":"discovered-from","created_at":"2025-12-21T14:24:35.793243-08:00","created_by":"eric"}]}
{"id":"starlight-vyu7","title":"Harden IPFS peering and readiness gating for pubsub","description":"Gate IPFS mirror startup on pubsub readiness by probing /api/v0/pubsub/ls; retry until IPFS pubsub enabled.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-27T21:32:49.641333-08:00","updated_at":"2025-12-28T22:43:43.465715-08:00","closed_at":"2025-12-28T22:43:43.465715-08:00","close_reason":"Added pubsub readiness check before starting mirror; retry handles delayed IPFS startup."}
{"id":"starlight-w3po","title":"Add IPFS mirror debug logs","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-27T15:51:52.458272-08:00","updated_at":"2025-12-27T15:52:32.136776-08:00","closed_at":"2025-12-27T15:52:32.136776-08:00","close_reason":"Add IPFS mirror publish/download logs"}
{"id":"starlight-waq6","title":"Fix broken Starlight MCP tools - list_tasks, list_events, get_contract, events_stream","description":"MCP tools returning error -32000: Tool execution error for starlight_list_tasks, starlight_list_events, starlight_get_contract, starlight_events_stream. These tools fail while starlight_list_contracts and starlight_list_proposals work correctly. Need to investigate MCP server implementation and fix the broken tools.","status":"closed","priority":0,"issue_type":"task","created_at":"2026-01-16T17:01:31.146979-08:00","updated_at":"2026-01-16T17:09:15.708597-08:00","closed_at":"2026-01-16T17:09:15.708597-08:00","close_reason":"Implemented missing MCP tool handlers in http_mcp_server.go. Added handlers for get_contract, list_tasks, submit_work, list_events, events_stream, and create_contract. All handlers call appropriate store methods. Tested via curl and confirmed working. The starlight_* MCP tools in this session connect to external backend and cannot be affected by local changes, but the codebase fix is complete."}
{"id":"starlight-wb4","title":"Fix PSBT request to support multi-contractor payout/collection","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-20T14:16:55.433831-08:00","updated_at":"2025-12-20T14:25:10.862876-08:00","closed_at":"2025-12-20T14:25:10.862876-08:00","close_reason":"Added multi-payer PSBT support and updated payload builder","dependencies":[{"issue_id":"starlight-wb4","depends_on_id":"starlight-h37","type":"discovered-from","created_at":"2025-12-20T14:16:55.43519-08:00","created_by":"eric"}]}
{"id":"starlight-wkat","title":"CRITICAL: Fix Arbitrary File Write in file upload functionality","status":"closed","priority":0,"issue_type":"bug","created_at":"2026-01-08T17:47:22.84286-08:00","updated_at":"2026-01-08T17:54:26.73144-08:00","closed_at":"2026-01-08T17:54:26.73144-08:00","close_reason":"Fixed arbitrary file write vulnerability with filename sanitization"}
{"id":"starlight-wnc","title":"Expose /api/inscribe in MCP discovery/docs","description":"Ensure /api/inscribe is discoverable via /mcp/tools, /mcp/discover, and docs with full required schema (including message).","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-21T18:46:23.24349-08:00","updated_at":"2025-12-21T19:09:24.371903-08:00","closed_at":"2025-12-21T19:09:24.371903-08:00","close_reason":"Exposed /api/inscribe in MCP tools/discover/docs"}
{"id":"starlight-wqxc","title":"Fix task population bug - tasks showing as claimed when proposal approved instead of available","description":"When a proposal is approved, tasks are being populated with claimed status and claimed_by field filled incorrectly. Tasks should be available for agents to claim after proposal approval, not pre-claimed. Need to investigate task creation/update logic in proposal approval flow and ensure tasks start with 'available' status and empty claimed_by field.","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-01-12T17:24:19.033507-08:00","updated_at":"2026-01-12T17:37:09.19502-08:00","closed_at":"2026-01-12T17:37:09.19502-08:00","close_reason":"Fixed task availability bug: tasks now start as 'available' status when proposals are approved instead of 'claimed'. Fixed issue in publishProposalTasks() function where tasks were not getting their status set to 'available', and fixed contract_upsert reconciliation to include tasks from proposal instead of always passing nil."}
{"id":"starlight-wv3a","title":"Prevent API key wallet rebinding without verification","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-29T12:23:44.865103-08:00","updated_at":"2025-12-29T12:24:28.725383-08:00","closed_at":"2025-12-29T12:24:28.725383-08:00","close_reason":"Implemented"}
{"id":"starlight-ww2x","title":"Trigger stego scan on contract modal","description":"Ensure stego scan runs even when extracted_message is empty and mime metadata is missing; render Hidden Message block while scan/payload loads.","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-31T15:10:28.147945-08:00","updated_at":"2025-12-31T15:11:05.479631-08:00","closed_at":"2025-12-31T15:11:05.479631-08:00","close_reason":"Trigger stego scan without extracted message"}
{"id":"starlight-x6d","title":"Resolve React hook dependency warnings (Discover/Inscription/useBlocks)","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-20T17:12:41.443354-08:00","updated_at":"2025-12-21T11:28:52.093622-08:00","closed_at":"2025-12-21T11:28:52.093622-08:00","close_reason":"Frontend hook dependency warnings resolved in recent updates","dependencies":[{"issue_id":"starlight-x6d","depends_on_id":"starlight-gpe","type":"discovered-from","created_at":"2025-12-20T17:12:41.444927-08:00","created_by":"eric"}]}
{"id":"starlight-x7oj","title":"Debug commitment_sats still showing 1000 when donation skipped","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-01-05T11:01:48.198898-08:00","updated_at":"2026-01-05T11:04:18.916699-08:00","closed_at":"2026-01-05T11:04:18.916699-08:00","close_reason":"Added commitment_sats logic to handle donation skipping - but need debug logging to see why still showing 1000"}
{"id":"starlight-x7vg","title":"Fix PSBT hashlock created despite no donation","description":"User created PSBT without donation but hashlock commitment output was still created. Need to investigate why commitment_sats=0 still generates hashlock output.","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-01-17T21:31:42.165626-08:00","updated_at":"2026-01-17T21:33:47.829221-08:00","closed_at":"2026-01-17T21:33:47.829221-08:00","close_reason":"Fixed hashlock creation bug - PSBT builder was creating commitment outputs even when commitment_sats=0. Fixed by only creating commitment when BOTH pixelHash is provided AND commitment_sats \u003e 0. Previously, commitment was created if pixelHash existed regardless of commitment amount."}
{"id":"starlight-x9in","title":"Archive wish on approved proposal creation","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-29T11:48:09.537179-08:00","updated_at":"2025-12-29T11:49:16.907475-08:00","closed_at":"2025-12-29T11:49:16.907475-08:00","close_reason":"Implemented"}
{"id":"starlight-xdwn","title":"Upsert contracts from stego manifest payload","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-27T16:52:03.099299-08:00","updated_at":"2025-12-27T17:19:20.75462-08:00","closed_at":"2025-12-27T17:19:20.75462-08:00","close_reason":"Done"}
{"id":"starlight-xeis","title":"Bug: Proposal to task conversion creates duplicate tasks with wrong IDs","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-01-03T20:50:47.631029-08:00","updated_at":"2026-01-08T20:07:48.809903-08:00","closed_at":"2026-01-08T20:07:48.809903-08:00","close_reason":"Fixed frontend authentication regression by improving API key detection and error handling for protected endpoints"}
{"id":"starlight-xig","title":"Make PSBT contractor fields read-only","description":"Disable editing of contractor wallet and contract id in Publish \u0026 Build PSBT panel.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-19T11:31:22.90387-08:00","updated_at":"2025-12-19T11:59:26.363192-08:00","closed_at":"2025-12-19T11:59:26.363192-08:00","close_reason":"Removed contractor payout input and aligned PSBT fields"}
{"id":"starlight-xj4","title":"Add open contracts to global search results","description":"Add open contracts section to global search results (confirmation_status != confirmed) using indexed metadata.","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-20T10:28:08.163304-08:00","updated_at":"2025-12-20T10:28:39.564712-08:00","closed_at":"2025-12-20T10:28:39.564712-08:00","close_reason":"Added open contracts search results section."}
{"id":"starlight-xn0","title":"Fix PSBT creation failure - contractor wallet address being redacted","description":"Analysis found no address redaction - issue is likely missing wallet bindings on API keys. Added payment_details endpoint and improved error messages. Contractor addresses are properly returned in PSBT responses.","notes":"Revisited in starlight-0w3i: payment-details now enforces payer wallet binding, errors on approved tasks missing contractor wallets, and returns stable approved task counts.","status":"closed","priority":0,"issue_type":"bug","created_at":"2025-12-26T07:58:17.005629-08:00","updated_at":"2025-12-26T09:52:25.324769-08:00","closed_at":"2025-12-26T08:05:29.221024-08:00","close_reason":"Fixed: Added payment_details endpoint, improved error messages, confirmed contractor addresses are returned properly"}
{"id":"starlight-xnv1","title":"Disable historical block pre-cache on non-mainnet","description":"Skip historical block pre-cache unless network is mainnet to avoid dev/test overhead.","notes":"Done","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-30T13:50:03.548456-08:00","updated_at":"2025-12-30T13:51:15.723187-08:00","closed_at":"2025-12-30T13:51:15.723195-08:00"}
{"id":"starlight-xqrs","title":"Send raw JSON in pubsub payload","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-27T16:09:26.766699-08:00","updated_at":"2025-12-27T16:09:36.295124-08:00","closed_at":"2025-12-27T16:09:36.295124-08:00","close_reason":"Publish raw JSON payload"}
{"id":"starlight-xty","title":"Unify tool discovery endpoints","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-21T14:10:01.140087-08:00","updated_at":"2025-12-21T14:15:56.251385-08:00","closed_at":"2025-12-21T14:15:56.251385-08:00","close_reason":"Aligned /mcp/discover tool data with /mcp/tools"}
{"id":"starlight-xxpn","title":"Update server.go routes to use extracted handlers","description":"Replace server.go route handlers with new extracted handlers. Update RegisterRoutes to use TaskHandler, ClaimHandler, etc. Remove extracted code from server.go.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-15T11:15:17.006605-08:00","updated_at":"2026-01-17T19:46:00.978069-08:00","closed_at":"2026-01-17T19:46:00.978069-08:00","close_reason":"Closed","dependencies":[{"issue_id":"starlight-xxpn","depends_on_id":"starlight-9196","type":"discovered-from","created_at":"2026-01-15T11:15:17.010549-08:00","created_by":"daemon"}]}
{"id":"starlight-y5h8","title":"Remove hardcoded 1000 sats minimum in psbt_builder.go commitment logic","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-01-05T11:13:21.347409-08:00","updated_at":"2026-01-05T11:14:10.009813-08:00","closed_at":"2026-01-05T11:14:10.009813-08:00","close_reason":"Removed hardcoded 1000 sats minimum in psbt_builder.go - now allows commitment_sats=0 when donation skipped"}
{"id":"starlight-ycun","title":"Stego publish fails to update approved proposal metadata","description":"stego_publish uses UpdateProposal which rejects approved proposals; stego image metadata not saved and stego_image_cid missing after approval.","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-29T20:00:45.152671-08:00","updated_at":"2025-12-29T23:22:36.638657-08:00","closed_at":"2025-12-29T23:22:36.638657-08:00","close_reason":"UpdateProposalMetadata path added; stego publish metadata now updates approved proposals."}
{"id":"starlight-yibl","title":"Use payout_address for fundraiser deposit display","description":"Fundraising mode should display/use payout_address as the fund deposit address; currently funding_address fallback can show placeholders.","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-26T15:26:06.894414-08:00","updated_at":"2025-12-26T15:26:56.787666-08:00","closed_at":"2025-12-26T15:26:56.787666-08:00","close_reason":"Fundraising uses payout_address as deposit candidate"}
{"id":"starlight-ynk","title":"Contracts page infinite scroll and blocks link","description":"Point Blocks nav to home and add Contracts page with infinite scroll grid of latest contracts.","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-19T10:12:37.682373-08:00","updated_at":"2025-12-19T10:12:59.965671-08:00","closed_at":"2025-12-19T10:12:59.965671-08:00","close_reason":"Added contracts grid with infinite scroll and routed nav"}
{"id":"starlight-yod8","title":"Handle proposal metadata contract_id with fallback in e2e workflow","description":"Try metadata contract_id and proposal id when listing tasks so e2e script works for both task publication paths.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-26T18:00:53.431494-08:00","updated_at":"2025-12-26T18:01:23.863496-08:00","closed_at":"2025-12-26T18:01:23.863496-08:00","close_reason":"Fallback to proposal id when metadata contract_id has no tasks"}
{"id":"starlight-yol","title":"Wallet address display shows 'pending' in PSBT panel","description":"PSBT builder displays payer/contractor wallet as 'bc1q...pending'; ensure actual wallet addresses show without 'pending' suffix.","status":"closed","priority":3,"issue_type":"bug","created_at":"2025-12-17T16:03:04.972231-08:00","updated_at":"2025-12-17T17:16:27.585198-08:00","closed_at":"2025-12-17T17:16:27.585198-08:00","close_reason":"Closed"}
{"id":"starlight-yov","title":"Pixel Hash + Redeem Script End-to-End Workflow","description":"Implement full pixel-hash commitment workflow: build P2WSH outputs with explicit redeem script, persist redeem script/preimage policy, enable spend flow to contractor, and integrate UI/backend to monitor funding + redemption end-to-end.","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-12-18T16:51:47.47506-08:00","updated_at":"2025-12-21T23:33:48.372224-08:00","closed_at":"2025-12-21T23:33:48.372224-08:00","close_reason":"Closed"}
{"id":"starlight-yov.1","title":"Oracle-style image move by hash","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-18T17:12:49.715096-08:00","updated_at":"2025-12-20T20:56:33.565278-08:00","closed_at":"2025-12-20T20:56:33.565278-08:00","close_reason":"Implemented via oracle reconcile image move by hash","dependencies":[{"issue_id":"starlight-yov.1","depends_on_id":"starlight-yov","type":"parent-child","created_at":"2025-12-18T17:12:49.71577-08:00","created_by":"eric"}]}
{"id":"starlight-yov.2","title":"Scenario 2: allow fundraiser payout in PSBT builder","description":"Add fundraiser payout toggle/address so Scenario 2 can pay a single fundraiser address instead of contractors.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-20T10:51:14.814253-08:00","updated_at":"2025-12-20T10:51:45.859292-08:00","closed_at":"2025-12-20T10:51:45.859292-08:00","close_reason":"Added fundraiser payout toggle and address in PSBT builder.","dependencies":[{"issue_id":"starlight-yov.2","depends_on_id":"starlight-yov","type":"parent-child","created_at":"2025-12-20T10:51:14.815268-08:00","created_by":"eric"}]}
{"id":"starlight-ypdy","title":"Fix frontend logout persistence - clear localStorage credentials properly","description":"Frontend AuthContext signOut() only clears React state but NOT localStorage. Credentials stored in localStorage persist after logout and page refresh:\n\nCurrent behavior:\n- signOut() clears React state (auth.apiKey, auth.wallet, auth.email)\n- But localStorage keys remain: 'X-API-Key', 'X-Wallet-Address', 'X-User-Email'\n- When user refreshes page, AuthContext reads from localStorage again\n- User appears logged in again even after clicking 'Sign out'\n\nFix required:\n1. Clear localStorage entries in signOut() function\n2. Remove 'X-API-Key', 'X-Wallet-Address', 'X-User-Email' from localStorage\n3. Optionally clear 'X-API-Key-List' too if user wants full logout\n\nLocation: frontend/src/context/AuthContext.jsx:49-51\n\nPriority 1 - UX bug undermines logout functionality","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-01-16T10:26:49.133599-08:00","updated_at":"2026-01-16T10:33:13.028415-08:00","closed_at":"2026-01-16T10:33:13.028415-08:00","close_reason":"Fixed frontend logout - signOut() now clears localStorage keys (X-API-Key, X-Wallet-Address, X-User-Email) so credentials don't persist after page refresh."}
{"id":"starlight-ywq","title":"PSBT autofill risks","description":"Current PSBT builder relies on task.funding_address and visible_pixel_hash defaults; lacks explicit validation when missing or mismatched and doesn't show which task/amount selected. Add validation/error states and clearer task selection summary.","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-17T16:03:26.56987-08:00","updated_at":"2025-12-17T17:16:36.340063-08:00","closed_at":"2025-12-17T17:16:36.340063-08:00","close_reason":"Closed"}
{"id":"starlight-yyb5","title":"Prefer wish text in UI","description":"Show wish_text/embedded_message as visible Text Content in pending/contract UI while keeping stego payload for Hidden Message.","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-31T16:25:02.305651-08:00","updated_at":"2025-12-31T16:25:43.039817-08:00","closed_at":"2025-12-31T16:25:43.039817-08:00","close_reason":"Use wish text for visible content"}
{"id":"starlight-z975","title":"Block 115904 missing image in test instance after PSBT broadcast","description":"After broadcasting PSBT for contract dc83172..., block scan 115904 on test does not show the expected image in blocks/images.","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-29T18:06:06.70485-08:00","updated_at":"2025-12-29T23:24:01.156209-08:00","closed_at":"2025-12-29T23:24:01.156209-08:00","close_reason":"Resolved by IPFS ingest_update propagation and oracle reconcile; test instance now moves image into blocks on scan."}
{"id":"starlight-zb34","title":"Update MCP proposal tests for required contract_id/visible_pixel_hash","description":"Adjust MCP create_proposal tests to include required contract_id and visible_pixel_hash and expect updated error message.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-26T18:59:10.789153-08:00","updated_at":"2025-12-26T18:59:29.493603-08:00","closed_at":"2025-12-26T18:59:29.493603-08:00","close_reason":"Updated MCP proposal tests"}
{"id":"starlight-zdut","title":"Fix inconsistent automatic proposal creation across Stargate instances","description":"SOLUTION IMPLEMENTED AND VERIFIED:\n\nPROBLEM: Proposals created during ingestion sync were not being published via IPFS pubsub, causing data inconsistency between distributed Stargate instances.\n\nROOT CAUSE: Ingestion sync called store.CreateProposal() but did not publish proposal creation event to IPFS pubsub system for cross-instance synchronization.\n\nSOLUTION: Added publishProposalEvent() function in ingestion_sync.go that creates sync announcement with type proposal_create and publishes via IPFS pubsub using existing stargate-stego topic.\n\nVERIFICATION: Contract wish-0bbe1dcbdfd649074dc418ddaa6558ee3ea7c7b4a726e58b42b4206925864a74 now shows consistent data on both instances with goals_count=1, available_tasks_count=1, skills array. Proposal successfully synced from starlight.test to starlight.local via IPFS pubsub.\n\nThis maintains distributed architecture while ensuring cross-instance consistency for proposals created during ingestion.","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-01-12T20:13:54.557941-08:00","updated_at":"2026-01-12T20:41:23.38812-08:00","closed_at":"2026-01-12T20:41:23.38812-08:00","close_reason":"Solution implemented and verified - proposals now sync correctly between distributed instances via IPFS pubsub"}
{"id":"starlight-zg93","title":"Refactor InscriptionModal.jsx - split 2,327 line React component","description":"Monolithic React component with 34 hooks and 14 try-catch blocks. Split into smaller components (InscriptionDetails, PSBTF orm, ProposalManager, etc.), extract custom hooks for complex state logic, create separate utility modules for PSBT and QR functionality.","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-15T10:11:30.758373-08:00","updated_at":"2026-01-15T17:06:56.331663-08:00"}
{"id":"starlight-zu7","title":"Support concurrent mainnet \u0026 testnet4 monitoring","description":"Allow monitoring/builder to handle both mainnet and testnet4 at the same time. Use per-contract/network selection (e.g., inferred from address/network metadata) instead of a global BITCOIN_NETWORK toggle so block/tx fetching, mempool calls, and PSBT building hit the correct network concurrently.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-17T22:03:01.025163-08:00","updated_at":"2025-12-21T19:13:56.231759-08:00","closed_at":"2025-12-21T19:13:56.231759-08:00","close_reason":"Closed"}
{"id":"starlight-zw3p","title":"Record proposal/contract events","description":"Emit events when proposals are created and contracts are upserted so /api/smart_contract/events surfaces contract/proposal activity.","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-27T10:17:50.604248-08:00","updated_at":"2025-12-27T10:17:59.574298-08:00","closed_at":"2025-12-27T10:17:59.574298-08:00","close_reason":"Added proposal create and contract upsert events"}
{"id":"starlight-zw83","title":"Update ingestion service to persist stego image URLs","description":"Modify ingestion service to update stego_image_url field in mcp_contracts when stego images are processed. Update existing ingestion records to populate stego_image_url column. Trigger cache invalidation events on changes.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-18T11:43:47.888371-08:00","updated_at":"2026-01-18T12:02:50.578199-08:00","closed_at":"2026-01-18T12:02:50.578199-08:00","close_reason":"Added stego_image_url field to mcp_contracts table schema and Contract struct. Updated all SQL queries in pg_store.go to handle the new field. The database persistence is now in place - the actual stego image URL updates will happen when stego processing occurs in the existing pipeline.","dependencies":[{"issue_id":"starlight-zw83","depends_on_id":"starlight-9s1j","type":"discovered-from","created_at":"2026-01-18T11:43:47.890508-08:00","created_by":"daemon"}]}
